{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport Button from 'src/components/Button';\nimport { Select } from 'src/components';\nimport { css, styled, t } from '@superset-ui/core';\nimport VizTypeGallery, { MAX_ADVISABLE_VIZ_GALLERY_WIDTH } from 'src/explore/components/controls/VizTypeControl/VizTypeGallery';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst ESTIMATED_NAV_HEIGHT = '56px';\nconst StyledContainer = styled.div`\n  ${({ theme }) => `\n    flex: 1 1 auto;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 100%;\n    max-width: ${MAX_ADVISABLE_VIZ_GALLERY_WIDTH}px;\n    max-height: calc(100vh - ${ESTIMATED_NAV_HEIGHT});\n    border-radius: ${theme.gridUnit}px;\n    background-color: ${theme.colors.grayscale.light5};\n    margin-left: auto;\n    margin-right: auto;\n    padding-left: ${theme.gridUnit * 4}px;\n    padding-right: ${theme.gridUnit * 4}px;\n    padding-bottom: ${theme.gridUnit * 4}px;\n\n    h3 {\n      padding-bottom: ${theme.gridUnit * 3}px;\n    }\n\n    & .dataset {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n\n      & > div {\n        min-width: 200px;\n        width: 300px;\n      }\n\n      & > span {\n        color: ${theme.colors.grayscale.light1};\n        margin-left: ${theme.gridUnit * 4}px;\n        margin-top: ${theme.gridUnit * 5}px;\n      }\n    }\n  `}\n`;\nconst cssStatic = css`\n  flex: 0 0 auto;\n`;\nconst StyledVizTypeGallery = styled(VizTypeGallery)`\n  ${({ theme }) => `\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    margin: ${theme.gridUnit * 3}px 0px;\n    flex: 1 1 auto;\n  `}\n`;\nexport default class AddSliceContainer extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3;\n    super(props);\n    this.state = {\n      visType: null };\n\n    this.changeDatasource = _bindInstanceProperty(_context = this.changeDatasource).call(_context, this);\n    this.changeVisType = _bindInstanceProperty(_context2 = this.changeVisType).call(_context2, this);\n    this.gotoSlice = _bindInstanceProperty(_context3 = this.gotoSlice).call(_context3, this);\n  }\n  exploreUrl() {\n    const formData = encodeURIComponent(_JSON$stringify({\n      viz_type: this.state.visType,\n      datasource: this.state.datasourceValue }));\n\n    return `/superset/explore/?form_data=${formData}`;\n  }\n  gotoSlice() {\n    window.location.href = this.exploreUrl();\n  }\n  changeDatasource(value) {\n    this.setState({\n      datasourceValue: value,\n      datasourceId: value.split('__')[0] });\n\n  }\n  changeVisType(visType) {\n    this.setState({ visType });\n  }\n  isBtnDisabled() {\n    return !(this.state.datasourceId && this.state.visType);\n  }\n  render() {\n    return ___EmotionJSX(StyledContainer, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 108, columnNumber: 17 } },\n    ___EmotionJSX(\"h3\", { css: cssStatic, __self: this, __source: { fileName: _jsxFileName, lineNumber: 109, columnNumber: 9 } }, t('Create a new chart')),\n    ___EmotionJSX(\"div\", { className: \"dataset\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 110, columnNumber: 9 } },\n    ___EmotionJSX(Select, { ariaLabel: t('Dataset'), name: \"select-datasource\", header: t('Choose a dataset'), onChange: this.changeDatasource, options: this.props.datasources, placeholder: t('Choose a dataset'), showSearch: true, value: this.state.datasourceValue, __self: this, __source: { fileName: _jsxFileName, lineNumber: 111, columnNumber: 11 } }),\n    ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 112, columnNumber: 11 } },\n    t('Instructions to add a dataset are available in the Superset tutorial.'), ' ',\n    ___EmotionJSX(\"a\", { href: \"https://superset.apache.org/docs/creating-charts-dashboards/first-dashboard#adding-a-new-table\", rel: \"noopener noreferrer\", target: \"_blank\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 114, columnNumber: 13 } },\n    ___EmotionJSX(\"i\", { className: \"fa fa-external-link\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 115, columnNumber: 15 } })))),\n\n\n\n    ___EmotionJSX(StyledVizTypeGallery, { onChange: this.changeVisType, selectedViz: this.state.visType, __self: this, __source: { fileName: _jsxFileName, lineNumber: 119, columnNumber: 9 } }),\n    ___EmotionJSX(Button, { css: [\n      cssStatic,\n      css`\n              align-self: flex-end;\n            `, process.env.NODE_ENV === \"production\" ? \"\" : \";label:AddSliceContainer;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9hZGRTbGljZS9BZGRTbGljZUNvbnRhaW5lci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBdUhnQiIsImZpbGUiOiIvVXNlcnMvZnJhbmtoZS9wcm9qZWN0cy9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvYWRkU2xpY2UvQWRkU2xpY2VDb250YWluZXIudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCB7IFNlbGVjdCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCB7IGNzcywgc3R5bGVkLCB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFZpelR5cGVHYWxsZXJ5LCB7IE1BWF9BRFZJU0FCTEVfVklaX0dBTExFUllfV0lEVEgsIH0gZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9WaXpUeXBlQ29udHJvbC9WaXpUeXBlR2FsbGVyeSc7XG5jb25zdCBFU1RJTUFURURfTkFWX0hFSUdIVCA9ICc1NnB4JztcbmNvbnN0IFN0eWxlZENvbnRhaW5lciA9IHN0eWxlZC5kaXYgYFxuICAkeyh7IHRoZW1lIH0pID0+IGBcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1heC13aWR0aDogJHtNQVhfQURWSVNBQkxFX1ZJWl9HQUxMRVJZX1dJRFRIfXB4O1xuICAgIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAke0VTVElNQVRFRF9OQVZfSEVJR0hUfSk7XG4gICAgYm9yZGVyLXJhZGl1czogJHt0aGVtZS5ncmlkVW5pdH1weDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQ1fTtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgcGFkZGluZy1sZWZ0OiAke3RoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBwYWRkaW5nLWJvdHRvbTogJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHg7XG5cbiAgICBoMyB7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgfVxuXG4gICAgJiAuZGF0YXNldCB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAgICYgPiBkaXYge1xuICAgICAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICB9XG5cbiAgICAgICYgPiBzcGFuIHtcbiAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDF9O1xuICAgICAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHg7XG4gICAgICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuZ3JpZFVuaXQgKiA1fXB4O1xuICAgICAgfVxuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBjc3NTdGF0aWMgPSBjc3MgYFxuICBmbGV4OiAwIDAgYXV0bztcbmA7XG5jb25zdCBTdHlsZWRWaXpUeXBlR2FsbGVyeSA9IHN0eWxlZChWaXpUeXBlR2FsbGVyeSkgYFxuICAkeyh7IHRoZW1lIH0pID0+IGBcbiAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICBib3JkZXItcmFkaXVzOiAke3RoZW1lLmdyaWRVbml0fXB4O1xuICAgIG1hcmdpbjogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHggMHB4O1xuICAgIGZsZXg6IDEgMSBhdXRvO1xuICBgfVxuYDtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkZFNsaWNlQ29udGFpbmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmlzVHlwZTogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEYXRhc291cmNlID0gdGhpcy5jaGFuZ2VEYXRhc291cmNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlVmlzVHlwZSA9IHRoaXMuY2hhbmdlVmlzVHlwZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmdvdG9TbGljZSA9IHRoaXMuZ290b1NsaWNlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGV4cGxvcmVVcmwoKSB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHZpel90eXBlOiB0aGlzLnN0YXRlLnZpc1R5cGUsXG4gICAgICAgICAgICBkYXRhc291cmNlOiB0aGlzLnN0YXRlLmRhdGFzb3VyY2VWYWx1ZSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gYC9zdXBlcnNldC9leHBsb3JlLz9mb3JtX2RhdGE9JHtmb3JtRGF0YX1gO1xuICAgIH1cbiAgICBnb3RvU2xpY2UoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGhpcy5leHBsb3JlVXJsKCk7XG4gICAgfVxuICAgIGNoYW5nZURhdGFzb3VyY2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBkYXRhc291cmNlVmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZGF0YXNvdXJjZUlkOiB2YWx1ZS5zcGxpdCgnX18nKVswXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNoYW5nZVZpc1R5cGUodmlzVHlwZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmlzVHlwZSB9KTtcbiAgICB9XG4gICAgaXNCdG5EaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuICEodGhpcy5zdGF0ZS5kYXRhc291cmNlSWQgJiYgdGhpcy5zdGF0ZS52aXNUeXBlKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKDxTdHlsZWRDb250YWluZXI+XG4gICAgICAgIDxoMyBjc3M9e2Nzc1N0YXRpY30+e3QoJ0NyZWF0ZSBhIG5ldyBjaGFydCcpfTwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGF0YXNldFwiPlxuICAgICAgICAgIDxTZWxlY3QgYXJpYUxhYmVsPXt0KCdEYXRhc2V0Jyl9IG5hbWU9XCJzZWxlY3QtZGF0YXNvdXJjZVwiIGhlYWRlcj17dCgnQ2hvb3NlIGEgZGF0YXNldCcpfSBvbkNoYW5nZT17dGhpcy5jaGFuZ2VEYXRhc291cmNlfSBvcHRpb25zPXt0aGlzLnByb3BzLmRhdGFzb3VyY2VzfSBwbGFjZWhvbGRlcj17dCgnQ2hvb3NlIGEgZGF0YXNldCcpfSBzaG93U2VhcmNoIHZhbHVlPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VWYWx1ZX0vPlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAge3QoJ0luc3RydWN0aW9ucyB0byBhZGQgYSBkYXRhc2V0IGFyZSBhdmFpbGFibGUgaW4gdGhlIFN1cGVyc2V0IHR1dG9yaWFsLicpfXsnICd9XG4gICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9zdXBlcnNldC5hcGFjaGUub3JnL2RvY3MvY3JlYXRpbmctY2hhcnRzLWRhc2hib2FyZHMvZmlyc3QtZGFzaGJvYXJkI2FkZGluZy1hLW5ldy10YWJsZVwiIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXh0ZXJuYWwtbGlua1wiLz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8U3R5bGVkVml6VHlwZUdhbGxlcnkgb25DaGFuZ2U9e3RoaXMuY2hhbmdlVmlzVHlwZX0gc2VsZWN0ZWRWaXo9e3RoaXMuc3RhdGUudmlzVHlwZX0vPlxuICAgICAgICA8QnV0dG9uIGNzcz17W1xuICAgICAgICAgICAgICAgIGNzc1N0YXRpYyxcbiAgICAgICAgICAgICAgICBjc3MgYFxuICAgICAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICBdfSBidXR0b25TdHlsZT1cInByaW1hcnlcIiBkaXNhYmxlZD17dGhpcy5pc0J0bkRpc2FibGVkKCl9IG9uQ2xpY2s9e3RoaXMuZ290b1NsaWNlfT5cbiAgICAgICAgICB7dCgnQ3JlYXRlIG5ldyBjaGFydCcpfVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvU3R5bGVkQ29udGFpbmVyPik7XG4gICAgfVxufVxuIl19 */\"],\n      buttonStyle: \"primary\", disabled: this.isBtnDisabled(), onClick: this.gotoSlice, __self: this, __source: { fileName: _jsxFileName, lineNumber: 120, columnNumber: 9 } },\n    t('Create new chart')));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ESTIMATED_NAV_HEIGHT, \"ESTIMATED_NAV_HEIGHT\", \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");reactHotLoader.register(StyledContainer, \"StyledContainer\", \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");reactHotLoader.register(cssStatic, \"cssStatic\", \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");reactHotLoader.register(StyledVizTypeGallery, \"StyledVizTypeGallery\", \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");reactHotLoader.register(AddSliceContainer, \"AddSliceContainer\", \"/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/addSlice/AddSliceContainer.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport Button from 'src/components/Button';\nimport { Select } from 'src/components';\nimport { css, styled, t } from '@superset-ui/core';\n\nimport VizTypeGallery, {\n  MAX_ADVISABLE_VIZ_GALLERY_WIDTH,\n} from 'src/explore/components/controls/VizTypeControl/VizTypeGallery';\n\ninterface Datasource {\n  label: string;\n  value: string;\n}\n\nexport type AddSliceContainerProps = {\n  datasources: Datasource[];\n};\n\nexport type AddSliceContainerState = {\n  datasourceId?: string;\n  datasourceType?: string;\n  datasourceValue?: string;\n  visType: string | null;\n};\n\nconst ESTIMATED_NAV_HEIGHT = '56px';\n\nconst StyledContainer = styled.div`\n  ${({ theme }) => `\n    flex: 1 1 auto;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 100%;\n    max-width: ${MAX_ADVISABLE_VIZ_GALLERY_WIDTH}px;\n    max-height: calc(100vh - ${ESTIMATED_NAV_HEIGHT});\n    border-radius: ${theme.gridUnit}px;\n    background-color: ${theme.colors.grayscale.light5};\n    margin-left: auto;\n    margin-right: auto;\n    padding-left: ${theme.gridUnit * 4}px;\n    padding-right: ${theme.gridUnit * 4}px;\n    padding-bottom: ${theme.gridUnit * 4}px;\n\n    h3 {\n      padding-bottom: ${theme.gridUnit * 3}px;\n    }\n\n    & .dataset {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n\n      & > div {\n        min-width: 200px;\n        width: 300px;\n      }\n\n      & > span {\n        color: ${theme.colors.grayscale.light1};\n        margin-left: ${theme.gridUnit * 4}px;\n        margin-top: ${theme.gridUnit * 5}px;\n      }\n    }\n  `}\n`;\n\nconst cssStatic = css`\n  flex: 0 0 auto;\n`;\n\nconst StyledVizTypeGallery = styled(VizTypeGallery)`\n  ${({ theme }) => `\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    margin: ${theme.gridUnit * 3}px 0px;\n    flex: 1 1 auto;\n  `}\n`;\n\nexport default class AddSliceContainer extends React.PureComponent<\n  AddSliceContainerProps,\n  AddSliceContainerState\n> {\n  constructor(props: AddSliceContainerProps) {\n    super(props);\n    this.state = {\n      visType: null,\n    };\n\n    this.changeDatasource = this.changeDatasource.bind(this);\n    this.changeVisType = this.changeVisType.bind(this);\n    this.gotoSlice = this.gotoSlice.bind(this);\n  }\n\n  exploreUrl() {\n    const formData = encodeURIComponent(\n      JSON.stringify({\n        viz_type: this.state.visType,\n        datasource: this.state.datasourceValue,\n      }),\n    );\n    return `/superset/explore/?form_data=${formData}`;\n  }\n\n  gotoSlice() {\n    window.location.href = this.exploreUrl();\n  }\n\n  changeDatasource(value: string) {\n    this.setState({\n      datasourceValue: value,\n      datasourceId: value.split('__')[0],\n    });\n  }\n\n  changeVisType(visType: string | null) {\n    this.setState({ visType });\n  }\n\n  isBtnDisabled() {\n    return !(this.state.datasourceId && this.state.visType);\n  }\n\n  render() {\n    return (\n      <StyledContainer>\n        <h3 css={cssStatic}>{t('Create a new chart')}</h3>\n        <div className=\"dataset\">\n          <Select\n            ariaLabel={t('Dataset')}\n            name=\"select-datasource\"\n            header={t('Choose a dataset')}\n            onChange={this.changeDatasource}\n            options={this.props.datasources}\n            placeholder={t('Choose a dataset')}\n            showSearch\n            value={this.state.datasourceValue}\n          />\n          <span>\n            {t(\n              'Instructions to add a dataset are available in the Superset tutorial.',\n            )}{' '}\n            <a\n              href=\"https://superset.apache.org/docs/creating-charts-dashboards/first-dashboard#adding-a-new-table\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              <i className=\"fa fa-external-link\" />\n            </a>\n          </span>\n        </div>\n        <StyledVizTypeGallery\n          onChange={this.changeVisType}\n          selectedViz={this.state.visType}\n        />\n        <Button\n          css={[\n            cssStatic,\n            css`\n              align-self: flex-end;\n            `,\n          ]}\n          buttonStyle=\"primary\"\n          disabled={this.isBtnDisabled()}\n          onClick={this.gotoSlice}\n        >\n          {t('Create new chart')}\n        </Button>\n      </StyledContainer>\n    );\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}