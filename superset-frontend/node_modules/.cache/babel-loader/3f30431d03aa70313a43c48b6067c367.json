{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric' };\n\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]) }) };\n\n\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 } };\n\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {var _context, _context2, _context3, _context4;\n    super(props);\n    this.onChange = _bindInstanceProperty(_context = this.onChange).call(_context, this);\n    this.setType = _bindInstanceProperty(_context2 = this.setType).call(_context2, this);\n    this.setFixedValue = _bindInstanceProperty(_context3 = this.setFixedValue).call(_context3, this);\n    this.setMetric = _bindInstanceProperty(_context4 = this.setMetric).call(_context4, this);\n    const type =\n    (props.value ? props.value.type : props.default.type) ||\n    controlTypes.fixed;\n    const value =\n    (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null };\n\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n      this.state.type === controlTypes.fixed ?\n      this.state.fixedValue :\n      this.state.metricValue });\n\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource ?\n    this.props.datasource.columns :\n    null;\n    const metrics = this.props.datasource ?\n    this.props.datasource.metrics :\n    null;\n    return (\n      ___EmotionJSX(\"div\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 102, columnNumber: 7 } },\n      ___EmotionJSX(ControlHeader, _extends({}, this.props, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 103, columnNumber: 9 } })),\n      ___EmotionJSX(Collapse, {\n        ghost: true,\n        css: (theme) => /*#__PURE__*/css(\"&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px \",\n\n\n\n\n        theme.gridUnit * 2, \"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:\",\n\n\n\n\n\n\n\n\n\n\n        theme.gridUnit * 2, \"px;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:FixedOrMetricControl;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvRml4ZWRPck1ldHJpY0NvbnRyb2wvaW5kZXguanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlHMkIiLCJmaWxlIjoiL1VzZXJzL2ZyYW5raGUvcHJvamVjdHMvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9GaXhlZE9yTWV0cmljQ29udHJvbC9pbmRleC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL3JlYWN0JztcbmltcG9ydCB7IHQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IENvbGxhcHNlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NvbGxhcHNlJztcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcbmltcG9ydCBNZXRyaWNzQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL01ldHJpY0NvbnRyb2wvTWV0cmljc0NvbnRyb2wnO1xuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcbmltcG9ydCBQb3BvdmVyU2VjdGlvbiBmcm9tICdzcmMvY29tcG9uZW50cy9Qb3BvdmVyU2VjdGlvbic7XG5cbmNvbnN0IGNvbnRyb2xUeXBlcyA9IHtcbiAgZml4ZWQ6ICdmaXgnLFxuICBtZXRyaWM6ICdtZXRyaWMnLFxufTtcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHZhbHVlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBpc0Zsb2F0OiBQcm9wVHlwZXMuYm9vbCxcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBkZWZhdWx0OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIHR5cGU6IFByb3BUeXBlcy5vbmVPZihbJ2ZpeCcsICdtZXRyaWMnXSksXG4gICAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcbiAgfSksXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgZGVmYXVsdDogeyB0eXBlOiBjb250cm9sVHlwZXMuZml4ZWQsIHZhbHVlOiA1IH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXhlZE9yTWV0cmljQ29udHJvbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRUeXBlID0gdGhpcy5zZXRUeXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRGaXhlZFZhbHVlID0gdGhpcy5zZXRGaXhlZFZhbHVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRNZXRyaWMgPSB0aGlzLnNldE1ldHJpYy5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHR5cGUgPVxuICAgICAgKHByb3BzLnZhbHVlID8gcHJvcHMudmFsdWUudHlwZSA6IHByb3BzLmRlZmF1bHQudHlwZSkgfHxcbiAgICAgIGNvbnRyb2xUeXBlcy5maXhlZDtcbiAgICBjb25zdCB2YWx1ZSA9XG4gICAgICAocHJvcHMudmFsdWUgPyBwcm9wcy52YWx1ZS52YWx1ZSA6IHByb3BzLmRlZmF1bHQudmFsdWUpIHx8ICcxMDAnO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB0eXBlLFxuICAgICAgZml4ZWRWYWx1ZTogdHlwZSA9PT0gY29udHJvbFR5cGVzLmZpeGVkID8gdmFsdWUgOiAnJyxcbiAgICAgIG1ldHJpY1ZhbHVlOiB0eXBlID09PSBjb250cm9sVHlwZXMubWV0cmljID8gdmFsdWUgOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIHR5cGU6IHRoaXMuc3RhdGUudHlwZSxcbiAgICAgIHZhbHVlOlxuICAgICAgICB0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZFxuICAgICAgICAgID8gdGhpcy5zdGF0ZS5maXhlZFZhbHVlXG4gICAgICAgICAgOiB0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlLFxuICAgIH0pO1xuICB9XG5cbiAgc2V0VHlwZSh0eXBlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHR5cGUgfSwgdGhpcy5vbkNoYW5nZSk7XG4gIH1cblxuICBzZXRGaXhlZFZhbHVlKGZpeGVkVmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZml4ZWRWYWx1ZSB9LCB0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHNldE1ldHJpYyhtZXRyaWNWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRyaWNWYWx1ZSB9LCB0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWUgfHwgdGhpcy5wcm9wcy5kZWZhdWx0O1xuICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS50eXBlIHx8IGNvbnRyb2xUeXBlcy5maXhlZDtcbiAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5wcm9wcy5kYXRhc291cmNlXG4gICAgICA/IHRoaXMucHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMucHJvcHMuZGF0YXNvdXJjZVxuICAgICAgPyB0aGlzLnByb3BzLmRhdGFzb3VyY2UubWV0cmljc1xuICAgICAgOiBudWxsO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8Q29udHJvbEhlYWRlciB7Li4udGhpcy5wcm9wc30gLz5cbiAgICAgICAgPENvbGxhcHNlXG4gICAgICAgICAgZ2hvc3RcbiAgICAgICAgICBjc3M9e3RoZW1lID0+IGNzc2BcbiAgICAgICAgICAgICYuYW50LWNvbGxhcHNlXG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1pdGVtLmFudC1jb2xsYXBzZS1uby1hcnJvd1xuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtaGVhZGVyIHtcbiAgICAgICAgICAgICAgYm9yZGVyOiAwcHg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDBweCAwcHggJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHggMHB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAmLmFudC1jb2xsYXBzZS1naG9zdFxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtaXRlbVxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtY29udGVudFxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtY29udGVudC1ib3gge1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwcHg7XG5cbiAgICAgICAgICAgICAgJiAud2VsbCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPlxuICAgICAgICAgIDxDb2xsYXBzZS5QYW5lbFxuICAgICAgICAgICAgc2hvd0Fycm93PXtmYWxzZX1cbiAgICAgICAgICAgIGhlYWRlcj17XG4gICAgICAgICAgICAgIDxMYWJlbCBvbkNsaWNrPXsoKSA9PiB1bmRlZmluZWR9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8c3Bhbj57dGhpcy5zdGF0ZS5maXhlZFZhbHVlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5tZXRyaWMgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPm1ldHJpYzogPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUubWV0cmljVmFsdWUubGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlbGxcIj5cbiAgICAgICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0ZpeGVkJyl9XG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17dHlwZSA9PT0gY29udHJvbFR5cGVzLmZpeGVkfVxuICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoY29udHJvbFR5cGVzLmZpeGVkKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBpc0Zsb2F0XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRGaXhlZFZhbHVlfVxuICAgICAgICAgICAgICAgICAgb25Gb2N1cz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoY29udHJvbFR5cGVzLmZpeGVkKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5maXhlZFZhbHVlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgICAgICAgICAgIDxQb3BvdmVyU2VjdGlvblxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdCYXNlZCBvbiBhIG1ldHJpYycpfVxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e3R5cGUgPT09IGNvbnRyb2xUeXBlcy5tZXRyaWN9XG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMubWV0cmljKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPE1ldHJpY3NDb250cm9sXG4gICAgICAgICAgICAgICAgICBuYW1lPVwibWV0cmljXCJcbiAgICAgICAgICAgICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XG4gICAgICAgICAgICAgICAgICBzYXZlZE1ldHJpY3M9e21ldHJpY3N9XG4gICAgICAgICAgICAgICAgICBtdWx0aT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMubWV0cmljKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRNZXRyaWN9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5tZXRyaWNWYWx1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1BvcG92ZXJTZWN0aW9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9Db2xsYXBzZS5QYW5lbD5cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuRml4ZWRPck1ldHJpY0NvbnRyb2wucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuRml4ZWRPck1ldHJpY0NvbnRyb2wuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuIl19 */\"), __self: this, __source: { fileName: _jsxFileName, lineNumber: 104, columnNumber: 9 } },\n\n\n\n\n      ___EmotionJSX(Collapse.Panel, {\n        showArrow: false,\n        header:\n        ___EmotionJSX(Label, { onClick: () => undefined, __self: this, __source: { fileName: _jsxFileName, lineNumber: 130, columnNumber: 15 } },\n        this.state.type === controlTypes.fixed &&\n        ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 132, columnNumber: 19 } }, this.state.fixedValue),\n\n        this.state.type === controlTypes.metric &&\n        ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 135, columnNumber: 19 } },\n        ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 136, columnNumber: 21 } }, \"metric: \"),\n        ___EmotionJSX(\"strong\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 137, columnNumber: 21 } },\n        this.state.metricValue ?\n        this.state.metricValue.label :\n        null))), __self: this, __source: { fileName: _jsxFileName, lineNumber: 127, columnNumber: 11 } },\n\n\n\n\n\n\n      ___EmotionJSX(\"div\", { className: \"well\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 147, columnNumber: 13 } },\n      ___EmotionJSX(PopoverSection, {\n        title: t('Fixed'),\n        isSelected: type === controlTypes.fixed,\n        onSelect: () => {\n          this.setType(controlTypes.fixed);\n        }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 148, columnNumber: 15 } },\n\n      ___EmotionJSX(TextControl, {\n        isFloat: true,\n        onChange: this.setFixedValue,\n        onFocus: () => {\n          this.setType(controlTypes.fixed);\n        },\n        value: this.state.fixedValue, __self: this, __source: { fileName: _jsxFileName, lineNumber: 155, columnNumber: 17 } })),\n\n\n      ___EmotionJSX(PopoverSection, {\n        title: t('Based on a metric'),\n        isSelected: type === controlTypes.metric,\n        onSelect: () => {\n          this.setType(controlTypes.metric);\n        }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 164, columnNumber: 15 } },\n\n      ___EmotionJSX(MetricsControl, {\n        name: \"metric\",\n        columns: columns,\n        savedMetrics: metrics,\n        multi: false,\n        onFocus: () => {\n          this.setType(controlTypes.metric);\n        },\n        onChange: this.setMetric,\n        value: this.state.metricValue, __self: this, __source: { fileName: _jsxFileName, lineNumber: 171, columnNumber: 17 } })))))));\n\n\n\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(controlTypes, \"controlTypes\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(FixedOrMetricControl, \"FixedOrMetricControl\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx"],"names":["React","PropTypes","css","t","Label","Collapse","TextControl","MetricsControl","ControlHeader","PopoverSection","controlTypes","fixed","metric","propTypes","onChange","func","value","object","isFloat","bool","datasource","isRequired","default","shape","type","oneOf","oneOfType","string","number","defaultProps","FixedOrMetricControl","Component","constructor","props","setType","setFixedValue","setMetric","state","fixedValue","metricValue","setState","render","columns","metrics","theme","gridUnit","undefined","label"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric',\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 },\n};\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n      (props.value ? props.value.type : props.default.type) ||\n      controlTypes.fixed;\n    const value =\n      (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null,\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n        this.state.type === controlTypes.fixed\n          ? this.state.fixedValue\n          : this.state.metricValue,\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource\n      ? this.props.datasource.columns\n      : null;\n    const metrics = this.props.datasource\n      ? this.props.datasource.metrics\n      : null;\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Collapse\n          ghost\n          css={theme => css`\n            &.ant-collapse\n              > .ant-collapse-item.ant-collapse-no-arrow\n              > .ant-collapse-header {\n              border: 0px;\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\n              display: inline-block;\n            }\n            &.ant-collapse-ghost\n              > .ant-collapse-item\n              > .ant-collapse-content\n              > .ant-collapse-content-box {\n              padding: 0px;\n\n              & .well {\n                margin-bottom: 0px;\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n          `}\n        >\n          <Collapse.Panel\n            showArrow={false}\n            header={\n              <Label onClick={() => undefined}>\n                {this.state.type === controlTypes.fixed && (\n                  <span>{this.state.fixedValue}</span>\n                )}\n                {this.state.type === controlTypes.metric && (\n                  <span>\n                    <span>metric: </span>\n                    <strong>\n                      {this.state.metricValue\n                        ? this.state.metricValue.label\n                        : null}\n                    </strong>\n                  </span>\n                )}\n              </Label>\n            }\n          >\n            <div className=\"well\">\n              <PopoverSection\n                title={t('Fixed')}\n                isSelected={type === controlTypes.fixed}\n                onSelect={() => {\n                  this.setType(controlTypes.fixed);\n                }}\n              >\n                <TextControl\n                  isFloat\n                  onChange={this.setFixedValue}\n                  onFocus={() => {\n                    this.setType(controlTypes.fixed);\n                  }}\n                  value={this.state.fixedValue}\n                />\n              </PopoverSection>\n              <PopoverSection\n                title={t('Based on a metric')}\n                isSelected={type === controlTypes.metric}\n                onSelect={() => {\n                  this.setType(controlTypes.metric);\n                }}\n              >\n                <MetricsControl\n                  name=\"metric\"\n                  columns={columns}\n                  savedMetrics={metrics}\n                  multi={false}\n                  onFocus={() => {\n                    this.setType(controlTypes.metric);\n                  }}\n                  onChange={this.setMetric}\n                  value={this.state.metricValue}\n                />\n              </PopoverSection>\n            </div>\n          </Collapse.Panel>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}