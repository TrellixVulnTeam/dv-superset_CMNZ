{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/common/components';\nimport shortid from 'shortid';\nimport { t, withTheme } from '@superset-ui/core';\nimport {\nSortableContainer,\nSortableHandle,\nSortableElement,\narrayMove } from\n'react-sortable-hoc';\nimport Icons from 'src/components/Icons';\nimport {\nHeaderContainer,\nAddIconButton } from\n'src/explore/components/controls/OptionControls';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport controlMap from '..';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired };\n\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: t('Empty collection'),\n  itemGenerator: () => ({ key: shortid.generate() }),\n  keyAccessor: (o) => o.key,\n  value: [],\n  addTooltip: t('Add an item') };\n\nconst SortableListItem = SortableElement(CustomListItem);\nconst SortableList = SortableContainer(List);\nconst SortableDragger = SortableHandle(() =>\n___EmotionJSX(\"i\", {\n  role: \"img\",\n  \"aria-label\": \"drag\",\n  className: \"fa fa-bars text-primary\",\n  style: { cursor: 'ns-resize' }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 68, columnNumber: 3 } }));var _ref = process.env.NODE_ENV === \"production\" ? { name: \"11g6mpt\", styles: \"justify-content:flex-start\" } : { name: \"13cksz1-CollectionControl\", styles: \"justify-content:flex-start;label:CollectionControl;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvQ29sbGVjdGlvbkNvbnRyb2wvaW5kZXguanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVIYyIsImZpbGUiOiIvVXNlcnMvZnJhbmtoZS9wcm9qZWN0cy9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NvbGxlY3Rpb25Db250cm9sL2luZGV4LmpzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgTGlzdCB9IGZyb20gJ3NyYy9jb21tb24vY29tcG9uZW50cyc7XG5pbXBvcnQgc2hvcnRpZCBmcm9tICdzaG9ydGlkJztcbmltcG9ydCB7IHQsIHdpdGhUaGVtZSB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7XG4gIFNvcnRhYmxlQ29udGFpbmVyLFxuICBTb3J0YWJsZUhhbmRsZSxcbiAgU29ydGFibGVFbGVtZW50LFxuICBhcnJheU1vdmUsXG59IGZyb20gJ3JlYWN0LXNvcnRhYmxlLWhvYyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IHtcbiAgSGVhZGVyQ29udGFpbmVyLFxuICBBZGRJY29uQnV0dG9uLFxufSBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL09wdGlvbkNvbnRyb2xzJztcbmltcG9ydCB7IEluZm9Ub29sdGlwV2l0aFRyaWdnZXIgfSBmcm9tICdAc3VwZXJzZXQtdWkvY2hhcnQtY29udHJvbHMnO1xuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcbmltcG9ydCBDdXN0b21MaXN0SXRlbSBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0N1c3RvbUxpc3RJdGVtJztcbmltcG9ydCBjb250cm9sTWFwIGZyb20gJy4uJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBkZXNjcmlwdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGFkZFRvb2x0aXA6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGl0ZW1HZW5lcmF0b3I6IFByb3BUeXBlcy5mdW5jLFxuICBrZXlBY2Nlc3NvcjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheV0pLFxuICBpc0Zsb2F0OiBQcm9wVHlwZXMuYm9vbCxcbiAgaXNJbnQ6IFByb3BUeXBlcy5ib29sLFxuICBjb250cm9sTmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBsYWJlbDogbnVsbCxcbiAgZGVzY3JpcHRpb246IG51bGwsXG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgcGxhY2Vob2xkZXI6IHQoJ0VtcHR5IGNvbGxlY3Rpb24nKSxcbiAgaXRlbUdlbmVyYXRvcjogKCkgPT4gKHsga2V5OiBzaG9ydGlkLmdlbmVyYXRlKCkgfSksXG4gIGtleUFjY2Vzc29yOiBvID0+IG8ua2V5LFxuICB2YWx1ZTogW10sXG4gIGFkZFRvb2x0aXA6IHQoJ0FkZCBhbiBpdGVtJyksXG59O1xuY29uc3QgU29ydGFibGVMaXN0SXRlbSA9IFNvcnRhYmxlRWxlbWVudChDdXN0b21MaXN0SXRlbSk7XG5jb25zdCBTb3J0YWJsZUxpc3QgPSBTb3J0YWJsZUNvbnRhaW5lcihMaXN0KTtcbmNvbnN0IFNvcnRhYmxlRHJhZ2dlciA9IFNvcnRhYmxlSGFuZGxlKCgpID0+IChcbiAgPGlcbiAgICByb2xlPVwiaW1nXCJcbiAgICBhcmlhLWxhYmVsPVwiZHJhZ1wiXG4gICAgY2xhc3NOYW1lPVwiZmEgZmEtYmFycyB0ZXh0LXByaW1hcnlcIlxuICAgIHN0eWxlPXt7IGN1cnNvcjogJ25zLXJlc2l6ZScgfX1cbiAgLz5cbikpO1xuXG5jbGFzcyBDb2xsZWN0aW9uQ29udHJvbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMub25BZGQgPSB0aGlzLm9uQWRkLmJpbmQodGhpcyk7XG4gIH1cblxuICBvbkNoYW5nZShpLCB2YWx1ZSkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5wcm9wcy52YWx1ZVtpXSwgdmFsdWUpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy52YWx1ZSk7XG4gIH1cblxuICBvbkFkZCgpIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMudmFsdWUuY29uY2F0KFt0aGlzLnByb3BzLml0ZW1HZW5lcmF0b3IoKV0pKTtcbiAgfVxuXG4gIG9uU29ydEVuZCh7IG9sZEluZGV4LCBuZXdJbmRleCB9KSB7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShhcnJheU1vdmUodGhpcy5wcm9wcy52YWx1ZSwgb2xkSW5kZXgsIG5ld0luZGV4KSk7XG4gIH1cblxuICByZW1vdmVJdGVtKGkpIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMudmFsdWUuZmlsdGVyKChvLCBpeCkgPT4gaSAhPT0gaXgpKTtcbiAgfVxuXG4gIHJlbmRlckxpc3QoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkXCI+e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9PC9kaXY+O1xuICAgIH1cbiAgICBjb25zdCBDb250cm9sID0gY29udHJvbE1hcFt0aGlzLnByb3BzLmNvbnRyb2xOYW1lXTtcbiAgICByZXR1cm4gKFxuICAgICAgPFNvcnRhYmxlTGlzdFxuICAgICAgICB1c2VEcmFnSGFuZGxlXG4gICAgICAgIGxvY2tBeGlzPVwieVwiXG4gICAgICAgIG9uU29ydEVuZD17dGhpcy5vblNvcnRFbmQuYmluZCh0aGlzKX1cbiAgICAgICAgYm9yZGVyZWRcbiAgICAgICAgY3NzPXt0aGVtZSA9PiAoe1xuICAgICAgICAgIGJvcmRlclJhZGl1czogdGhlbWUuZ3JpZFVuaXQsXG4gICAgICAgIH0pfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy52YWx1ZS5tYXAoKG8sIGkpID0+IHtcbiAgICAgICAgICAvLyBsYWJlbCByZWxldmFudCBvbmx5IGZvciBoZWFkZXIsIG5vdCBoZXJlXG4gICAgICAgICAgY29uc3QgeyBsYWJlbCwgLi4uY29tbW9uUHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTb3J0YWJsZUxpc3RJdGVtXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNsZWFyZml4XCJcbiAgICAgICAgICAgICAgY3NzPXt7IGp1c3RpZnlDb250ZW50OiAnZmxleC1zdGFydCcgfX1cbiAgICAgICAgICAgICAga2V5PXt0aGlzLnByb3BzLmtleUFjY2Vzc29yKG8pfVxuICAgICAgICAgICAgICBpbmRleD17aX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFNvcnRhYmxlRHJhZ2dlciAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY3NzPXt0aGVtZSA9PiAoe1xuICAgICAgICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLmdyaWRVbml0ICogMixcbiAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiB0aGVtZS5ncmlkVW5pdCAqIDIsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8Q29udHJvbFxuICAgICAgICAgICAgICAgICAgey4uLmNvbW1vblByb3BzfVxuICAgICAgICAgICAgICAgICAgey4uLm99XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMsIGkpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8SW5mb1Rvb2x0aXBXaXRoVHJpZ2dlclxuICAgICAgICAgICAgICAgIGljb249XCJ0aW1lc1wiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJyZW1vdmUtaXRlbVwiXG4gICAgICAgICAgICAgICAgdG9vbHRpcD17dCgnUmVtb3ZlIGl0ZW0nKX1cbiAgICAgICAgICAgICAgICBic1N0eWxlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5yZW1vdmVJdGVtLmJpbmQodGhpcywgaSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1NvcnRhYmxlTGlzdEl0ZW0+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L1NvcnRhYmxlTGlzdD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0PVwiQ29sbGVjdGlvbkNvbnRyb2xcIiBjbGFzc05hbWU9XCJDb2xsZWN0aW9uQ29udHJvbFwiPlxuICAgICAgICA8SGVhZGVyQ29udGFpbmVyPlxuICAgICAgICAgIDxDb250cm9sSGVhZGVyIHsuLi50aGlzLnByb3BzfSAvPlxuICAgICAgICAgIDxBZGRJY29uQnV0dG9uIG9uQ2xpY2s9e3RoaXMub25BZGR9PlxuICAgICAgICAgICAgPEljb25zLlBsdXNMYXJnZVxuICAgICAgICAgICAgICBpY29uU2l6ZT1cInNcIlxuICAgICAgICAgICAgICBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQ1fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0FkZEljb25CdXR0b24+XG4gICAgICAgIDwvSGVhZGVyQ29udGFpbmVyPlxuICAgICAgICB7dGhpcy5yZW5kZXJMaXN0KCl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbkNvbGxlY3Rpb25Db250cm9sLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbkNvbGxlY3Rpb25Db250cm9sLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKENvbGxlY3Rpb25Db250cm9sKTtcbiJdfQ== */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\n\n\nclass CollectionControl extends React.Component {\n  constructor(props) {var _context;\n    super(props);\n    this.onAdd = _bindInstanceProperty(_context = this.onAdd).call(_context, this);\n  }\n\n  onChange(i, value) {\n    _Object$assign(this.props.value[i], value);\n    this.props.onChange(this.props.value);\n  }\n\n  onAdd() {var _context2;\n    this.props.onChange(_concatInstanceProperty(_context2 = this.props.value).call(_context2, [this.props.itemGenerator()]));\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n\n  removeItem(i) {var _context3;\n    this.props.onChange(_filterInstanceProperty(_context3 = this.props.value).call(_context3, (o, ix) => i !== ix));\n  }\n\n  renderList() {var _context4, _context5;\n    if (this.props.value.length === 0) {\n      return ___EmotionJSX(\"div\", { className: \"text-muted\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 101, columnNumber: 14 } }, this.props.placeholder);\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      ___EmotionJSX(SortableList, {\n        useDragHandle: true,\n        lockAxis: \"y\",\n        onSortEnd: _bindInstanceProperty(_context4 = this.onSortEnd).call(_context4, this),\n        bordered: true,\n        css: (theme) => ({\n          borderRadius: theme.gridUnit }), __self: this, __source: { fileName: _jsxFileName, lineNumber: 105, columnNumber: 7 } },\n\n\n      _mapInstanceProperty(_context5 = this.props.value).call(_context5, (o, i) => {var _context6, _context7;\n        // label relevant only for header, not here\n        const { label, ...commonProps } = this.props;\n        return (\n          ___EmotionJSX(SortableListItem, {\n            className: \"clearfix\",\n            css: _ref,\n            key: this.props.keyAccessor(o),\n            index: i, __self: this, __source: { fileName: _jsxFileName, lineNumber: 118, columnNumber: 13 } },\n\n          ___EmotionJSX(SortableDragger, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 124, columnNumber: 15 } }),\n          ___EmotionJSX(\"div\", {\n            css: (theme) => ({\n              flex: 1,\n              marginLeft: theme.gridUnit * 2,\n              marginRight: theme.gridUnit * 2 }), __self: this, __source: { fileName: _jsxFileName, lineNumber: 125, columnNumber: 15 } },\n\n\n          ___EmotionJSX(Control, _extends({},\n          commonProps,\n          o, {\n            onChange: _bindInstanceProperty(_context6 = this.onChange).call(_context6, this, i), __self: this, __source: { fileName: _jsxFileName, lineNumber: 132, columnNumber: 17 } }))),\n\n\n          ___EmotionJSX(InfoTooltipWithTrigger, {\n            icon: \"times\",\n            label: \"remove-item\",\n            tooltip: t('Remove item'),\n            bsStyle: \"primary\",\n            onClick: _bindInstanceProperty(_context7 = this.removeItem).call(_context7, this, i), __self: this, __source: { fileName: _jsxFileName, lineNumber: 138, columnNumber: 15 } })));\n\n\n\n      })));\n\n\n  }\n\n  render() {\n    const { theme } = this.props;\n    return (\n      ___EmotionJSX(\"div\", { \"data-test\": \"CollectionControl\", className: \"CollectionControl\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 155, columnNumber: 7 } },\n      ___EmotionJSX(HeaderContainer, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 156, columnNumber: 9 } },\n      ___EmotionJSX(ControlHeader, _extends({}, this.props, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 157, columnNumber: 11 } })),\n      ___EmotionJSX(AddIconButton, { onClick: this.onAdd, __self: this, __source: { fileName: _jsxFileName, lineNumber: 158, columnNumber: 11 } },\n      ___EmotionJSX(Icons.PlusLarge, {\n        iconSize: \"s\",\n        iconColor: theme.colors.grayscale.light5, __self: this, __source: { fileName: _jsxFileName, lineNumber: 159, columnNumber: 13 } }))),\n\n\n\n      this.renderList()));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;const _default =\n\nwithTheme(CollectionControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableListItem, \"SortableListItem\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableList, \"SortableList\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(SortableDragger, \"SortableDragger\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(CollectionControl, \"CollectionControl\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/CollectionControl/index.jsx"],"names":["React","PropTypes","List","shortid","t","withTheme","SortableContainer","SortableHandle","SortableElement","arrayMove","Icons","HeaderContainer","AddIconButton","InfoTooltipWithTrigger","ControlHeader","CustomListItem","controlMap","propTypes","name","string","isRequired","label","description","placeholder","addTooltip","itemGenerator","func","keyAccessor","onChange","value","oneOfType","array","isFloat","bool","isInt","controlName","defaultProps","key","generate","o","SortableListItem","SortableList","SortableDragger","cursor","CollectionControl","Component","constructor","props","onAdd","i","onSortEnd","oldIndex","newIndex","removeItem","ix","renderList","length","Control","theme","borderRadius","gridUnit","commonProps","flex","marginLeft","marginRight","render","colors","grayscale","light5"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/common/components';\nimport shortid from 'shortid';\nimport { t, withTheme } from '@superset-ui/core';\nimport {\n  SortableContainer,\n  SortableHandle,\n  SortableElement,\n  arrayMove,\n} from 'react-sortable-hoc';\nimport Icons from 'src/components/Icons';\nimport {\n  HeaderContainer,\n  AddIconButton,\n} from 'src/explore/components/controls/OptionControls';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport controlMap from '..';\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: t('Empty collection'),\n  itemGenerator: () => ({ key: shortid.generate() }),\n  keyAccessor: o => o.key,\n  value: [],\n  addTooltip: t('Add an item'),\n};\nconst SortableListItem = SortableElement(CustomListItem);\nconst SortableList = SortableContainer(List);\nconst SortableDragger = SortableHandle(() => (\n  <i\n    role=\"img\"\n    aria-label=\"drag\"\n    className=\"fa fa-bars text-primary\"\n    style={{ cursor: 'ns-resize' }}\n  />\n));\n\nclass CollectionControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onAdd = this.onAdd.bind(this);\n  }\n\n  onChange(i, value) {\n    Object.assign(this.props.value[i], value);\n    this.props.onChange(this.props.value);\n  }\n\n  onAdd() {\n    this.props.onChange(this.props.value.concat([this.props.itemGenerator()]));\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n\n  removeItem(i) {\n    this.props.onChange(this.props.value.filter((o, ix) => i !== ix));\n  }\n\n  renderList() {\n    if (this.props.value.length === 0) {\n      return <div className=\"text-muted\">{this.props.placeholder}</div>;\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      <SortableList\n        useDragHandle\n        lockAxis=\"y\"\n        onSortEnd={this.onSortEnd.bind(this)}\n        bordered\n        css={theme => ({\n          borderRadius: theme.gridUnit,\n        })}\n      >\n        {this.props.value.map((o, i) => {\n          // label relevant only for header, not here\n          const { label, ...commonProps } = this.props;\n          return (\n            <SortableListItem\n              className=\"clearfix\"\n              css={{ justifyContent: 'flex-start' }}\n              key={this.props.keyAccessor(o)}\n              index={i}\n            >\n              <SortableDragger />\n              <div\n                css={theme => ({\n                  flex: 1,\n                  marginLeft: theme.gridUnit * 2,\n                  marginRight: theme.gridUnit * 2,\n                })}\n              >\n                <Control\n                  {...commonProps}\n                  {...o}\n                  onChange={this.onChange.bind(this, i)}\n                />\n              </div>\n              <InfoTooltipWithTrigger\n                icon=\"times\"\n                label=\"remove-item\"\n                tooltip={t('Remove item')}\n                bsStyle=\"primary\"\n                onClick={this.removeItem.bind(this, i)}\n              />\n            </SortableListItem>\n          );\n        })}\n      </SortableList>\n    );\n  }\n\n  render() {\n    const { theme } = this.props;\n    return (\n      <div data-test=\"CollectionControl\" className=\"CollectionControl\">\n        <HeaderContainer>\n          <ControlHeader {...this.props} />\n          <AddIconButton onClick={this.onAdd}>\n            <Icons.PlusLarge\n              iconSize=\"s\"\n              iconColor={theme.colors.grayscale.light5}\n            />\n          </AddIconButton>\n        </HeaderContainer>\n        {this.renderList()}\n      </div>\n    );\n  }\n}\n\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;\n\nexport default withTheme(CollectionControl);\n"]},"metadata":{},"sourceType":"module"}