{"ast":null,"code":"var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect } from 'react';\nimport { t } from '@superset-ui/core';\nimport { useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { useToasts } from 'src/messageToasts/enhancers/withToasts';\nimport Loading from 'src/components/Loading';\nimport { useDashboard, useDashboardCharts, useDashboardDatasets } from 'src/common/hooks/apiResources';\nimport { hydrateDashboard } from 'src/dashboard/actions/hydrate';\nimport { setDatasources } from 'src/dashboard/actions/datasources';\nimport injectCustomCss from 'src/dashboard/util/injectCustomCss';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DashboardContainer = /*#__PURE__*/React.lazy(() => import(\n/* webpackChunkName: \"DashboardContainer\" */\n/* webpackPreload: true */\n'src/dashboard/containers/Dashboard'));\nconst DashboardPage = () => {\n  const dispatch = useDispatch();\n  const { addDangerToast } = useToasts();\n  const { idOrSlug } = useParams();\n  const { result: dashboard, error: dashboardApiError } = useDashboard(idOrSlug);\n  const { result: charts, error: chartsApiError } = useDashboardCharts(idOrSlug);\n  const { result: datasets, error: datasetsApiError } = useDashboardDatasets(idOrSlug);\n  const error = dashboardApiError || chartsApiError;\n  const readyToRender = Boolean(dashboard && charts);\n  const { dashboard_title, css } = dashboard || {};\n  useEffect(() => {\n    if (readyToRender) {\n      dispatch(hydrateDashboard(dashboard, charts));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [readyToRender]);\n  useEffect(() => {\n    if (dashboard_title) {\n      document.title = dashboard_title;\n    }\n  }, [dashboard_title]);\n  useEffect(() => {\n    if (css) {\n      // returning will clean up custom css\n      // when dashboard unmounts or changes\n      return injectCustomCss(css);\n    }\n    return () => {};\n  }, [css]);\n  useEffect(() => {\n    if (datasetsApiError) {\n      addDangerToast(t('Error loading chart datasources. Filters may not work correctly.'));\n    } else\n    {\n      dispatch(setDatasources(datasets));\n    }\n  }, [addDangerToast, datasets, datasetsApiError, dispatch]);\n  if (error)\n  throw error; // caught in error boundary\n  if (!readyToRender)\n  return ___EmotionJSX(Loading, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 73, columnNumber: 16 } });\n  return ___EmotionJSX(DashboardContainer, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 74, columnNumber: 12 } });\n};__signature__(DashboardPage, \"useDispatch{dispatch}\\nuseToasts{{ addDangerToast }}\\nuseParams{{ idOrSlug }}\\nuseDashboard{{ result: dashboard, error: dashboardApiError }}\\nuseDashboardCharts{{ result: charts, error: chartsApiError }}\\nuseDashboardDatasets{{ result: datasets, error: datasetsApiError }}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useDispatch, useToasts, useParams, useDashboard, useDashboardCharts, useDashboardDatasets]);const _default =\nDashboardPage;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DashboardContainer, \"DashboardContainer\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx\");reactHotLoader.register(DashboardPage, \"DashboardPage\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/dashboard/containers/DashboardPage.tsx"],"names":[],"mappings":"2ZAAA;;;;;;;;;;;;;;;;;AAiBG;AACH,OAAO,KAAP,IAAgB,SAAhB,QAAqC,OAArC;AACA,SAAS,CAAT,QAAkB,mBAAlB;AACA,SAAS,WAAT,QAA4B,aAA5B;AACA,SAAS,SAAT,QAA0B,kBAA1B;AACA,SAAS,SAAT,QAA0B,wCAA1B;AACA,OAAO,OAAP,MAAoB,wBAApB;AACA,SACE,YADF,EAEE,kBAFF,EAGE,oBAHF,QAIO,+BAJP;AAKA,SAAS,gBAAT,QAAiC,+BAAjC;AACA,SAAS,cAAT,QAA+B,mCAA/B;AACA,OAAO,eAAP,MAA4B,oCAA5B,C;AAEA,MAAM,kBAAkB,gBAAG,KAAK,CAAC,IAAN,CACzB,MACE;AACE;AACA;AACA,oCAHF,CAFuB,CAA3B;AASA,MAAM,aAAa,GAAO,MAAK;AAC7B,QAAM,QAAQ,GAAG,WAAW,EAA5B;AACA,QAAM,EAAE,cAAF,KAAqB,SAAS,EAApC;AACA,QAAM,EAAE,QAAF,KAAe,SAAS,EAA9B;AACA,QAAM,EAAE,MAAM,EAAE,SAAV,EAAqB,KAAK,EAAE,iBAA5B,KAAkD,YAAY,CAClE,QADkE,CAApE;AAGA,QAAM,EAAE,MAAM,EAAE,MAAV,EAAkB,KAAK,EAAE,cAAzB,KAA4C,kBAAkB,CAClE,QADkE,CAApE;AAGA,QAAM,EAAE,MAAM,EAAE,QAAV,EAAoB,KAAK,EAAE,gBAA3B,KAAgD,oBAAoB,CACxE,QADwE,CAA1E;AAIA,QAAM,KAAK,GAAG,iBAAiB,IAAI,cAAnC;AACA,QAAM,aAAa,GAAG,OAAO,CAAC,SAAS,IAAI,MAAd,CAA7B;AACA,QAAM,EAAE,eAAF,EAAmB,GAAnB,KAA2B,SAAS,IAAI,EAA9C;AAEA,EAAA,SAAS,CAAC,MAAK;AACb,QAAI,aAAJ,EAAmB;AACjB,MAAA,QAAQ,CAAC,gBAAgB,CAAC,SAAD,EAAY,MAAZ,CAAjB,CAAR;AACD;AACD;AACD,GALQ,EAKN,CAAC,aAAD,CALM,CAAT;AAOA,EAAA,SAAS,CAAC,MAAK;AACb,QAAI,eAAJ,EAAqB;AACnB,MAAA,QAAQ,CAAC,KAAT,GAAiB,eAAjB;AACD;AACF,GAJQ,EAIN,CAAC,eAAD,CAJM,CAAT;AAMA,EAAA,SAAS,CAAC,MAAK;AACb,QAAI,GAAJ,EAAS;AACP;AACA;AACA,aAAO,eAAe,CAAC,GAAD,CAAtB;AACD;AACD,WAAO,MAAK,CAAG,CAAf;AACD,GAPQ,EAON,CAAC,GAAD,CAPM,CAAT;AASA,EAAA,SAAS,CAAC,MAAK;AACb,QAAI,gBAAJ,EAAsB;AACpB,MAAA,cAAc,CACZ,CAAC,CAAC,kEAAD,CADW,CAAd;AAGD,KAJD;AAIO;AACL,MAAA,QAAQ,CAAC,cAAc,CAAC,QAAD,CAAf,CAAR;AACD;AACF,GARQ,EAQN,CAAC,cAAD,EAAiB,QAAjB,EAA2B,gBAA3B,EAA6C,QAA7C,CARM,CAAT;AAUA,MAAI,KAAJ;AAAW,QAAM,KAAN,CAlDkB,CAkDL;AACxB,MAAI,CAAC,aAAL;AAAoB,SAAO,cAAC,OAAD,2FAAP;AAEpB,SAAO,cAAC,kBAAD,2FAAP;AACD,CAtDD,C,cAAM,a,iVACa,W,EACU,S,EACN,S,EACmC,Y,EAGN,kB,EAGI,oB;AA8CzC,a,CAAf,wB,iLAjEM,kB,iJASA,a","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, FC } from 'react';\nimport { t } from '@superset-ui/core';\nimport { useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { useToasts } from 'src/messageToasts/enhancers/withToasts';\nimport Loading from 'src/components/Loading';\nimport {\n  useDashboard,\n  useDashboardCharts,\n  useDashboardDatasets,\n} from 'src/common/hooks/apiResources';\nimport { hydrateDashboard } from 'src/dashboard/actions/hydrate';\nimport { setDatasources } from 'src/dashboard/actions/datasources';\nimport injectCustomCss from 'src/dashboard/util/injectCustomCss';\n\nconst DashboardContainer = React.lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"DashboardContainer\" */\n      /* webpackPreload: true */\n      'src/dashboard/containers/Dashboard'\n    ),\n);\n\nconst DashboardPage: FC = () => {\n  const dispatch = useDispatch();\n  const { addDangerToast } = useToasts();\n  const { idOrSlug } = useParams<{ idOrSlug: string }>();\n  const { result: dashboard, error: dashboardApiError } = useDashboard(\n    idOrSlug,\n  );\n  const { result: charts, error: chartsApiError } = useDashboardCharts(\n    idOrSlug,\n  );\n  const { result: datasets, error: datasetsApiError } = useDashboardDatasets(\n    idOrSlug,\n  );\n\n  const error = dashboardApiError || chartsApiError;\n  const readyToRender = Boolean(dashboard && charts);\n  const { dashboard_title, css } = dashboard || {};\n\n  useEffect(() => {\n    if (readyToRender) {\n      dispatch(hydrateDashboard(dashboard, charts));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [readyToRender]);\n\n  useEffect(() => {\n    if (dashboard_title) {\n      document.title = dashboard_title;\n    }\n  }, [dashboard_title]);\n\n  useEffect(() => {\n    if (css) {\n      // returning will clean up custom css\n      // when dashboard unmounts or changes\n      return injectCustomCss(css);\n    }\n    return () => {};\n  }, [css]);\n\n  useEffect(() => {\n    if (datasetsApiError) {\n      addDangerToast(\n        t('Error loading chart datasources. Filters may not work correctly.'),\n      );\n    } else {\n      dispatch(setDatasources(datasets));\n    }\n  }, [addDangerToast, datasets, datasetsApiError, dispatch]);\n\n  if (error) throw error; // caught in error boundary\n  if (!readyToRender) return <Loading />;\n\n  return <DashboardContainer />;\n};\n\nexport default DashboardPage;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}