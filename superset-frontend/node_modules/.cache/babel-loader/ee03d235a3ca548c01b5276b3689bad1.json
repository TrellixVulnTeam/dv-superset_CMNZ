{"ast":null,"code":"import \"core-js/modules/es.string.replace.js\";import \"core-js/modules/web.dom-collections.iterator.js\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";import _sortInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/sort\";import _trimInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/trim\";import _findInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _URLSearchParams from \"@babel/runtime-corejs3/core-js-stable/url-search-params\";import _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _spliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/splice\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _startsWithInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/starts-with\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t, FeatureFlag, isFeatureEnabled } from '@superset-ui/core';\nimport React, { useEffect, useState, useReducer } from 'react';\nimport Tabs from 'src/components/Tabs';\nimport { Select } from 'src/common/components';\nimport Alert from 'src/components/Alert';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport IconButton from 'src/components/IconButton';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport { testDatabaseConnection, useSingleViewResource, useAvailableDatabases, useDatabaseValidation, getDatabaseImages, getConnectionAlert } from 'src/views/CRUD/hooks';\nimport { useCommonConf } from 'src/views/CRUD/data/database/state';\nimport { CONFIGURATION_METHOD } from 'src/views/CRUD/data/database/types';\nimport Loading from 'src/components/Loading';\nimport ExtraOptions from './ExtraOptions';\nimport SqlAlchemyForm from './SqlAlchemyForm';\nimport DatabaseConnectionForm from './DatabaseConnectionForm';\nimport { antDErrorAlertStyles, antDAlertStyles, StyledAlertMargin, antDModalNoPaddingStyles, antDModalStyles, antDTabsStyles, buttonLinkStyles, alchemyButtonLinkStyles, TabHeader, formHelperStyles, formStyles, StyledAlignment, SelectDatabaseStyles, infoTooltip, StyledFooterButton, StyledStickyHeader } from './styles';\nimport ModalHeader, { DOCUMENTATION_LINK } from './ModalHeader';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst errorAlertMapping = {\n  CONNECTION_MISSING_PARAMETERS_ERROR: {\n    message: 'Missing Required Fields',\n    description: 'Please complete all required fields.' },\n\n  CONNECTION_INVALID_HOSTNAME_ERROR: {\n    message: 'Could not verify the host',\n    description: 'The host is invalid. Please verify that this field is entered correctly.' },\n\n  CONNECTION_PORT_CLOSED_ERROR: {\n    message: 'Port is closed',\n    description: 'Please verify that port is open to connect.' },\n\n  CONNECTION_INVALID_PORT_ERROR: {\n    message: 'Invalid Port Number',\n    description: 'The port must be a whole number less than or equal to 65535.' },\n\n  CONNECTION_ACCESS_DENIED_ERROR: {\n    message: 'Invalid account information',\n    description: 'Either the username or password is incorrect.' },\n\n  CONNECTION_INVALID_PASSWORD_ERROR: {\n    message: 'Invalid account information',\n    description: 'Either the username or password is incorrect.' },\n\n  INVALID_PAYLOAD_SCHEMA_ERROR: {\n    message: 'Incorrect Fields',\n    description: 'Please make sure all fields are filled out correctly' },\n\n  TABLE_DOES_NOT_EXIST_ERROR: {\n    message: 'URL could not be identified',\n    description: 'The URL could not be identified. Please check for typos and make sure that \"Type of google sheet allowed\" selection matches the input' } };\n\n\nvar ActionType;\n(function (ActionType) {\n  ActionType[ActionType[\"configMethodChange\"] = 0] = \"configMethodChange\";\n  ActionType[ActionType[\"dbSelected\"] = 1] = \"dbSelected\";\n  ActionType[ActionType[\"editorChange\"] = 2] = \"editorChange\";\n  ActionType[ActionType[\"fetched\"] = 3] = \"fetched\";\n  ActionType[ActionType[\"inputChange\"] = 4] = \"inputChange\";\n  ActionType[ActionType[\"parametersChange\"] = 5] = \"parametersChange\";\n  ActionType[ActionType[\"reset\"] = 6] = \"reset\";\n  ActionType[ActionType[\"textChange\"] = 7] = \"textChange\";\n  ActionType[ActionType[\"extraInputChange\"] = 8] = \"extraInputChange\";\n  ActionType[ActionType[\"extraEditorChange\"] = 9] = \"extraEditorChange\";\n  ActionType[ActionType[\"addTableCatalogSheet\"] = 10] = \"addTableCatalogSheet\";\n  ActionType[ActionType[\"removeTableCatalogSheet\"] = 11] = \"removeTableCatalogSheet\";\n})(ActionType || (ActionType = {}));\nfunction dbReducer(state, action) {var _action$payload$type, _trimmedState$catalog2, _extra_json4, _extra_json4$engine_p, _action$payload2, _action$payload2$para;\n  const trimmedState = {\n    ...(state || {}) };\n\n  let query = '';\n  let deserializeExtraJSON = {};\n  let extra_json;\n  switch (action.type) {\n    case ActionType.extraEditorChange:\n      return {\n        ...trimmedState,\n        extra_json: {\n          ...trimmedState.extra_json,\n          [action.payload.name]: action.payload.json } };\n\n\n    case ActionType.extraInputChange:\n      if (action.payload.name === 'schema_cache_timeout' ||\n      action.payload.name === 'table_cache_timeout') {var _trimmedState$extra_j;\n        return {\n          ...trimmedState,\n          extra_json: {\n            ...trimmedState.extra_json,\n            metadata_cache_timeout: {\n              ...((_trimmedState$extra_j = trimmedState.extra_json) == null ? void 0 : _trimmedState$extra_j.metadata_cache_timeout),\n              [action.payload.name]: action.payload.value } } };\n\n\n\n      }\n      return {\n        ...trimmedState,\n        extra_json: {\n          ...trimmedState.extra_json,\n          [action.payload.name]: action.payload.type === 'checkbox' ?\n          action.payload.checked :\n          action.payload.value } };\n\n\n    case ActionType.inputChange:\n      if (action.payload.type === 'checkbox') {\n        return {\n          ...trimmedState,\n          [action.payload.name]: action.payload.checked };\n\n      }\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value };\n\n    case ActionType.parametersChange:\n      if (trimmedState.catalog !== undefined && (_action$payload$type =\n      action.payload.type) != null && _startsWithInstanceProperty(_action$payload$type).call(_action$payload$type, 'catalog')) {var _action$payload$type2, _trimmedState$catalog;\n        // Formatting wrapping google sheets table catalog\n        const idx = (_action$payload$type2 = action.payload.type) == null ? void 0 : _action$payload$type2.split('-')[1];\n        const catalogToUpdate = (trimmedState == null ? void 0 : trimmedState.catalog[idx]) || {};\n        catalogToUpdate[action.payload.name] = action.payload.value;\n        const paramatersCatalog = {};\n        // eslint-disable-next-line array-callback-return\n        (_trimmedState$catalog = trimmedState.catalog) == null ? void 0 : _mapInstanceProperty(_trimmedState$catalog).call(_trimmedState$catalog, (item) => {\n          paramatersCatalog[item.name] = item.value;\n        });\n        return {\n          ...trimmedState,\n          parameters: {\n            ...trimmedState.parameters,\n            catalog: paramatersCatalog } };\n\n\n      }\n      return {\n        ...trimmedState,\n        parameters: {\n          ...trimmedState.parameters,\n          [action.payload.name]: action.payload.value } };\n\n\n    case ActionType.addTableCatalogSheet:\n      if (trimmedState.catalog !== undefined) {\n        return {\n          ...trimmedState,\n          catalog: [...trimmedState.catalog, { name: '', value: '' }] };\n\n      }\n      return {\n        ...trimmedState,\n        catalog: [{ name: '', value: '' }] };\n\n    case ActionType.removeTableCatalogSheet:\n      (_trimmedState$catalog2 = trimmedState.catalog) == null ? void 0 : _spliceInstanceProperty(_trimmedState$catalog2).call(_trimmedState$catalog2, action.payload.indexToDelete, 1);\n      return {\n        ...trimmedState };\n\n    case ActionType.editorChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.json };\n\n    case ActionType.textChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value };\n\n    case ActionType.fetched:\n      // convert all the keys in this payload into strings\n      if (action.payload.extra) {var _extra_json, _extra_json2, _extra_json3;\n        extra_json = {\n          ...JSON.parse(action.payload.extra || '') };\n\n        deserializeExtraJSON = {\n          ...JSON.parse(action.payload.extra || ''),\n          metadata_params: _JSON$stringify((_extra_json = extra_json) == null ? void 0 : _extra_json.metadata_params),\n          engine_params: _JSON$stringify((_extra_json2 = extra_json) == null ? void 0 : _extra_json2.engine_params),\n          schemas_allowed_for_csv_upload: (_extra_json3 = extra_json) == null ? void 0 : _extra_json3.schemas_allowed_for_csv_upload };\n\n      }\n      if (action.payload.backend === 'bigquery' &&\n      action.payload.configuration_method ===\n      CONFIGURATION_METHOD.DYNAMIC_FORM) {var _action$payload, _action$payload$param;\n        return {\n          ...action.payload,\n          engine: action.payload.backend,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          parameters: {\n            query,\n            credentials_info: _JSON$stringify(((_action$payload = action.payload) == null ? void 0 : (_action$payload$param = _action$payload.parameters) == null ? void 0 : _action$payload$param.credentials_info) || '') } };\n\n\n      }\n      if (action.payload.backend === 'gsheets' &&\n      action.payload.configuration_method ===\n      CONFIGURATION_METHOD.DYNAMIC_FORM &&\n      ((_extra_json4 = extra_json) == null ? void 0 : (_extra_json4$engine_p = _extra_json4.engine_params) == null ? void 0 : _extra_json4$engine_p.catalog) !== undefined) {var _extra_json5, _extra_json5$engine_p, _context;\n        // pull catalog from engine params\n        const engineParamsCatalog = (_extra_json5 = extra_json) == null ? void 0 : (_extra_json5$engine_p = _extra_json5.engine_params) == null ? void 0 : _extra_json5$engine_p.catalog;\n        return {\n          ...action.payload,\n          engine: action.payload.backend,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          catalog: _mapInstanceProperty(_context = _Object$keys(engineParamsCatalog)).call(_context, (e) => ({\n            name: e,\n            value: engineParamsCatalog[e] })) };\n\n\n      }\n      if ((_action$payload2 = action.payload) != null && (_action$payload2$para = _action$payload2.parameters) != null && _action$payload2$para.query) {\n        // convert query into URI params string\n        query = new _URLSearchParams(action.payload.parameters.query).toString();\n        return {\n          ...action.payload,\n          encrypted_extra: action.payload.encrypted_extra || '',\n          engine: action.payload.backend || trimmedState.engine,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          parameters: {\n            ...action.payload.parameters,\n            query } };\n\n\n      }\n      return {\n        ...action.payload,\n        encrypted_extra: action.payload.encrypted_extra || '',\n        engine: action.payload.backend || trimmedState.engine,\n        configuration_method: action.payload.configuration_method,\n        extra_json: deserializeExtraJSON,\n        parameters: {\n          ...action.payload.parameters } };\n\n\n    case ActionType.dbSelected:\n      return {\n        ...action.payload };\n\n    case ActionType.configMethodChange:\n      return {\n        ...action.payload };\n\n    case ActionType.reset:\n    default:\n      return null;}\n\n}\nconst DEFAULT_TAB_KEY = '1';\nconst serializeExtra = (extraJson) => _JSON$stringify({\n  ...extraJson,\n  metadata_params: JSON.parse((extraJson == null ? void 0 : extraJson.metadata_params) || '{}'),\n  engine_params: JSON.parse((extraJson == null ? void 0 : extraJson.engine_params) || '{}'),\n  schemas_allowed_for_csv_upload: (extraJson == null ? void 0 : extraJson.schemas_allowed_for_csv_upload) || '[]' });\n\nconst DatabaseModal = ({ addDangerToast, addSuccessToast, onDatabaseAdd, onHide, show, databaseId }) => {var _availableDbs$databas;\n  const [db, setDB] = useReducer(dbReducer, null);\n  const [tabKey, setTabKey] = useState(DEFAULT_TAB_KEY);\n  const [availableDbs, getAvailableDbs] = useAvailableDatabases();\n  const [validationErrors, getValidation, setValidationErrors] = useDatabaseValidation();\n  const [hasConnectedDb, setHasConnectedDb] = useState(false);\n  const [dbName, setDbName] = useState('');\n  const [editNewDb, setEditNewDb] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n  const conf = useCommonConf();\n  const dbImages = getDatabaseImages();\n  const connectionAlert = getConnectionAlert();\n  const isEditMode = !!databaseId;\n  const sslForced = isFeatureEnabled(FeatureFlag.FORCE_DATABASE_CONNECTIONS_SSL);\n  const useSqlAlchemyForm = (db == null ? void 0 : db.configuration_method) === CONFIGURATION_METHOD.SQLALCHEMY_URI;\n  const useTabLayout = isEditMode || useSqlAlchemyForm;\n  // Database fetch logic\n  const { state: { loading: dbLoading, resource: dbFetched, error: dbErrors }, fetchResource, createResource, updateResource, clearError } = useSingleViewResource('database', t('database'), addDangerToast);\n  const isDynamic = (engine) => {var _context2;return (availableDbs == null ? void 0 : _filterInstanceProperty(_context2 = availableDbs.databases).call(_context2, (DB) => DB.backend === engine || DB.engine === engine)[0].parameters) !== undefined;};\n  const showDBError = validationErrors || dbErrors;\n  const isEmpty = (data) => data && _Object$keys(data).length === 0;\n  const dbModel = (availableDbs == null ? void 0 : (_availableDbs$databas = availableDbs.databases) == null ? void 0 : _findInstanceProperty(_availableDbs$databas).call(_availableDbs$databas, (available) =>\n  // TODO: we need a centralized engine in one place\n  available.engine === (isEditMode ? db == null ? void 0 : db.backend : db == null ? void 0 : db.engine))) || {};\n  // Test Connection logic\n  const testConnection = () => {var _db$database_name;\n    if (!(db != null && db.sqlalchemy_uri)) {\n      addDangerToast(t('Please enter a SQLAlchemy URI to test'));\n      return;\n    }\n    const connection = {\n      sqlalchemy_uri: (db == null ? void 0 : db.sqlalchemy_uri) || '',\n      database_name: (db == null ? void 0 : (_db$database_name = db.database_name) == null ? void 0 : _trimInstanceProperty(_db$database_name).call(_db$database_name)) || undefined,\n      impersonate_user: (db == null ? void 0 : db.impersonate_user) || undefined,\n      extra: serializeExtra(db == null ? void 0 : db.extra_json) || undefined,\n      encrypted_extra: (db == null ? void 0 : db.encrypted_extra) || '',\n      server_cert: (db == null ? void 0 : db.server_cert) || undefined };\n\n    testDatabaseConnection(connection, addDangerToast, addSuccessToast);\n  };\n  const onClose = () => {\n    setDB({ type: ActionType.reset });\n    setHasConnectedDb(false);\n    setValidationErrors(null); // reset validation errors on close\n    clearError();\n    setEditNewDb(false);\n    onHide();\n  };\n  const onSave = async () => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { id, ...update } = db || {};\n    // Clone DB object\n    const dbToUpdate = JSON.parse(_JSON$stringify(update));\n    if (dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM) {var _dbToUpdate$parameter, _dbToUpdate$parameter3, _dbToUpdate$parameter4;\n      // Validate DB before saving\n      await getValidation(dbToUpdate, true);\n      if (validationErrors && !isEmpty(validationErrors)) {\n        return;\n      }\n      if (dbToUpdate != null && (_dbToUpdate$parameter = dbToUpdate.parameters) != null && _dbToUpdate$parameter.query) {var _dbToUpdate$parameter2;\n        // convert query params into dictionary\n        dbToUpdate.parameters.query = JSON.parse(`{\"${decodeURI((dbToUpdate == null ? void 0 : (_dbToUpdate$parameter2 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter2.query) || '').\n        replace(/\"/g, '\\\\\"').\n        replace(/&/g, '\",\"').\n        replace(/=/g, '\":\"')}\"}`);\n      } else\n      if ((dbToUpdate == null ? void 0 : (_dbToUpdate$parameter3 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter3.query) === '' &&\n      'query' in dbModel.parameters) {\n        dbToUpdate.parameters.query = {};\n      }\n      const engine = dbToUpdate.backend || dbToUpdate.engine;\n      if (engine === 'bigquery' && (_dbToUpdate$parameter4 = dbToUpdate.parameters) != null && _dbToUpdate$parameter4.credentials_info) {var _dbToUpdate$parameter5, _dbToUpdate$parameter6, _dbToUpdate$parameter7;\n        // wrap encrypted_extra in credentials_info only for BigQuery\n        if ((_dbToUpdate$parameter5 = dbToUpdate.parameters) != null && _dbToUpdate$parameter5.credentials_info &&\n        typeof ((_dbToUpdate$parameter6 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter6.credentials_info) === 'object' &&\n        ((_dbToUpdate$parameter7 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter7.credentials_info.constructor) === Object) {var _dbToUpdate$parameter8;\n          // Don't cast if object\n          dbToUpdate.encrypted_extra = _JSON$stringify({\n            credentials_info: (_dbToUpdate$parameter8 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter8.credentials_info });\n\n          // Convert credentials info string before updating\n          dbToUpdate.parameters.credentials_info = _JSON$stringify(dbToUpdate.parameters.credentials_info);\n        } else\n        {var _dbToUpdate$parameter9;\n          dbToUpdate.encrypted_extra = _JSON$stringify({\n            credentials_info: JSON.parse((_dbToUpdate$parameter9 = dbToUpdate.parameters) == null ? void 0 : _dbToUpdate$parameter9.credentials_info) });\n\n        }\n      }\n    }\n    if (dbToUpdate.parameters.catalog) {\n      // need to stringify gsheets catalog to allow it to be seralized\n      dbToUpdate.extra_json = {\n        engine_params: _JSON$stringify({\n          catalog: dbToUpdate.parameters.catalog }) };\n\n\n    }\n    if (dbToUpdate != null && dbToUpdate.extra_json) {\n      // convert extra_json to back to string\n      dbToUpdate.extra = serializeExtra(dbToUpdate == null ? void 0 : dbToUpdate.extra_json);\n    }\n    if (db != null && db.id) {\n      setLoading(true);\n      const result = await updateResource(db.id, dbToUpdate, dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM);\n      if (result) {\n        if (onDatabaseAdd) {\n          onDatabaseAdd();\n        }\n        if (!editNewDb) {\n          onClose();\n        }\n      }\n    } else\n    if (db) {\n      // Create\n      setLoading(true);\n      const dbId = await createResource(dbToUpdate, dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM);\n      if (dbId) {\n        setHasConnectedDb(true);\n        if (onDatabaseAdd) {\n          onDatabaseAdd();\n        }\n        if (useTabLayout) {\n          // tab layout only has one step\n          // so it should close immediately on save\n          onClose();\n        }\n      }\n    }\n    setEditNewDb(false);\n    setLoading(false);\n  };\n  const onChange = (type, payload) => {\n    setDB({ type, payload });\n  };\n  // Initialize\n  const fetchDB = () => {\n    if (isEditMode && databaseId) {\n      if (!dbLoading) {\n        fetchResource(databaseId).catch((e) => addDangerToast(t('Sorry there was an error fetching database information: %s', e.message)));\n      }\n    }\n  };\n  const setDatabaseModel = (database_name) => {var _context3;\n    const selectedDbModel = availableDbs == null ? void 0 : _filterInstanceProperty(_context3 = availableDbs.databases).call(_context3, (db) => db.name === database_name)[0];\n    const { engine, parameters } = selectedDbModel;\n    const isDynamic = parameters !== undefined;\n    setDB({\n      type: ActionType.dbSelected,\n      payload: {\n        database_name,\n        configuration_method: isDynamic ?\n        CONFIGURATION_METHOD.DYNAMIC_FORM :\n        CONFIGURATION_METHOD.SQLALCHEMY_URI,\n        engine } });\n\n\n    setDB({ type: ActionType.addTableCatalogSheet });\n  };\n  const renderAvailableSelector = () => {var _ref, _context4, _connectionAlert$ADD_;return ___EmotionJSX(\"div\", { className: \"available\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 439, columnNumber: 44 } },\n    ___EmotionJSX(\"h4\", { className: \"available-label\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 440, columnNumber: 7 } }, \"Or choose from a list of other databases we support:\"),\n\n\n    ___EmotionJSX(\"div\", { className: \"control-label\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 443, columnNumber: 7 } }, \"Supported databases\"),\n    ___EmotionJSX(Select, { className: \"available-select\", onChange: setDatabaseModel, placeholder: \"Choose a database...\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 444, columnNumber: 7 } }, (_ref =\n    [...((availableDbs == null ? void 0 : availableDbs.databases) || [])]) == null ? void 0 : _mapInstanceProperty(_context4 = _sortInstanceProperty(_ref).call(_ref,\n    (a, b) => a.name.localeCompare(b.name))).call(_context4,\n    (database) => ___EmotionJSX(Select.Option, { value: database.name, key: database.name, __self: this, __source: { fileName: _jsxFileName, lineNumber: 447, columnNumber: 33 } },\n    database.name))),\n\n\n    ___EmotionJSX(Alert, { showIcon: true, closable: false, css: (theme) => antDAlertStyles(theme), type: \"info\", message: (connectionAlert == null ? void 0 : (_connectionAlert$ADD_ = connectionAlert.ADD_DATABASE) == null ? void 0 : _connectionAlert$ADD_.message) ||\n      t('Want to add a new database?'), description: connectionAlert != null && connectionAlert.ADD_DATABASE ? ___EmotionJSX(React.Fragment, null, \"Any databases that allow connections via SQL Alchemy URIs can be added.\",\n\n      ' ',\n      ___EmotionJSX(\"a\", { href: connectionAlert == null ? void 0 : connectionAlert.ADD_DATABASE.contact_link, target: \"_blank\", rel: \"noopener noreferrer\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 455, columnNumber: 15 } },\n      connectionAlert == null ? void 0 : connectionAlert.ADD_DATABASE.contact_description_link),\n      ' ',\n      connectionAlert == null ? void 0 : connectionAlert.ADD_DATABASE.description) :\n      ___EmotionJSX(React.Fragment, null, \"Any databases that allow connections via SQL Alchemy URIs can be added. Learn about how to connect a database driver\",\n\n      ' ',\n      ___EmotionJSX(\"a\", { href: DOCUMENTATION_LINK, target: \"_blank\", rel: \"noopener noreferrer\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 462, columnNumber: 15 } }, \"here\"), \".\"), __self: this, __source: { fileName: _jsxFileName, lineNumber: 451, columnNumber: 7 } }));};\n\n\n\n\n\n  const renderPreferredSelector = () => {var _availableDbs$databas2, _context5;return ___EmotionJSX(\"div\", { className: \"preferred\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 468, columnNumber: 44 } },\n    availableDbs == null ? void 0 : (_availableDbs$databas2 = availableDbs.databases) == null ? void 0 : _mapInstanceProperty(_context5 = _filterInstanceProperty(_availableDbs$databas2).call(_availableDbs$databas2,\n    (db) => db.preferred)).call(_context5,\n    (database) => ___EmotionJSX(IconButton, { className: \"preferred-item\", onClick: () => setDatabaseModel(database.name), buttonText: database.name, icon: dbImages == null ? void 0 : dbImages[database.engine], __self: this, __source: { fileName: _jsxFileName, lineNumber: 471, columnNumber: 33 } })));};\n\n  const handleBackButtonOnFinish = () => {\n    if (dbFetched) {\n      fetchResource(dbFetched.id);\n    }\n    setEditNewDb(true);\n  };\n  const handleBackButtonOnConnect = () => {\n    if (editNewDb) {\n      setHasConnectedDb(false);\n    }\n    setDB({ type: ActionType.reset });\n  };\n  const renderModalFooter = () => {\n    if (db) {\n      // if db show back + connenct\n      if (!hasConnectedDb || editNewDb) {\n        return ___EmotionJSX(React.Fragment, null,\n        ___EmotionJSX(StyledFooterButton, { key: \"back\", onClick: handleBackButtonOnConnect, __self: this, __source: { fileName: _jsxFileName, lineNumber: 490, columnNumber: 13 } }, \"Back\"),\n\n\n        ___EmotionJSX(StyledFooterButton, { key: \"submit\", buttonStyle: \"primary\", onClick: onSave, __self: this, __source: { fileName: _jsxFileName, lineNumber: 493, columnNumber: 13 } }, \"Connect\"));\n\n\n\n      }\n      return ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(StyledFooterButton, { key: \"back\", onClick: handleBackButtonOnFinish, __self: this, __source: { fileName: _jsxFileName, lineNumber: 499, columnNumber: 11 } }, \"Back\"),\n\n\n      ___EmotionJSX(StyledFooterButton, { key: \"submit\", buttonStyle: \"primary\", onClick: onSave, \"data-test\": \"modal-confirm-button\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 502, columnNumber: 11 } }, \"Finish\"));\n\n\n\n    }\n    return [];\n  };\n  const renderEditModalFooter = () => ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(StyledFooterButton, { key: \"close\", onClick: onClose, __self: this, __source: { fileName: _jsxFileName, lineNumber: 510, columnNumber: 7 } }, \"Close\"),\n\n\n  ___EmotionJSX(StyledFooterButton, { key: \"submit\", buttonStyle: \"primary\", onClick: onSave, __self: this, __source: { fileName: _jsxFileName, lineNumber: 513, columnNumber: 7 } }, \"Finish\"));\n\n\n\n  useEffect(() => {\n    if (show) {\n      setTabKey(DEFAULT_TAB_KEY);\n      getAvailableDbs();\n      setLoading(true);\n    }\n    if (databaseId && show) {\n      fetchDB();\n    }\n  }, [show, databaseId]);\n  useEffect(() => {\n    if (dbFetched) {\n      setDB({\n        type: ActionType.fetched,\n        payload: dbFetched });\n\n      // keep a copy of the name separate for display purposes\n      // because it shouldn't change when the form is updated\n      setDbName(dbFetched.database_name);\n    }\n  }, [dbFetched]);\n  useEffect(() => {\n    if (isLoading) {\n      setLoading(false);\n    }\n  }, [availableDbs]);\n  const tabChange = (key) => {\n    setTabKey(key);\n  };\n  const errorAlert = () => {\n    if (isEmpty(dbErrors) ||\n    isEmpty(validationErrors) &&\n    !((validationErrors == null ? void 0 : validationErrors.error_type) in errorAlertMapping)) {\n      return ___EmotionJSX(React.Fragment, null);\n    }\n    if (validationErrors) {var _errorAlertMapping$va, _errorAlertMapping$va2;\n      return ___EmotionJSX(Alert, { type: \"error\", css: (theme) => antDErrorAlertStyles(theme), message: ((_errorAlertMapping$va = errorAlertMapping[validationErrors == null ? void 0 : validationErrors.error_type]) == null ? void 0 : _errorAlertMapping$va.message) || (\n        validationErrors == null ? void 0 : validationErrors.error_type), description: ((_errorAlertMapping$va2 = errorAlertMapping[validationErrors == null ? void 0 : validationErrors.error_type]) == null ? void 0 : _errorAlertMapping$va2.description) ||\n        _JSON$stringify(validationErrors), showIcon: true, closable: false, __self: this, __source: { fileName: _jsxFileName, lineNumber: 553, columnNumber: 21 } });\n    }\n    const message = _Object$values(dbErrors);\n    return ___EmotionJSX(Alert, { type: \"error\", css: (theme) => antDErrorAlertStyles(theme), message: \"Database Creation Error\", description: message[0], __self: this, __source: { fileName: _jsxFileName, lineNumber: 558, columnNumber: 17 } });\n  };\n  const renderFinishState = () => {\n    if (!editNewDb) {\n      return ___EmotionJSX(ExtraOptions, { db: db, onInputChange: ({ target }) => onChange(ActionType.inputChange, {\n          type: target.type,\n          name: target.name,\n          checked: target.checked,\n          value: target.value }),\n        onTextChange: ({ target }) => onChange(ActionType.textChange, {\n          name: target.name,\n          value: target.value }),\n        onEditorChange: (payload) => onChange(ActionType.editorChange, payload), onExtraInputChange: ({ target }) => {\n          onChange(ActionType.extraInputChange, {\n            type: target.type,\n            name: target.name,\n            checked: target.checked,\n            value: target.value });\n\n        }, onExtraEditorChange: (payload) => onChange(ActionType.extraEditorChange, payload), __self: this, __source: { fileName: _jsxFileName, lineNumber: 562, columnNumber: 21 } });\n    }\n    return ___EmotionJSX(DatabaseConnectionForm, { isEditMode: true, sslForced: sslForced, dbModel: dbModel, db: db, onParametersChange: ({ target }) => onChange(ActionType.parametersChange, {\n        type: target.type,\n        name: target.name,\n        checked: target.checked,\n        value: target.value }),\n      onChange: ({ target }) => onChange(ActionType.textChange, {\n        name: target.name,\n        value: target.value }),\n      onAddTableCatalog: () => setDB({ type: ActionType.addTableCatalogSheet }), onRemoveTableCatalog: (idx) => setDB({\n        type: ActionType.removeTableCatalogSheet,\n        payload: { indexToDelete: idx } }),\n      getValidation: () => getValidation(db), validationErrors: validationErrors, __self: this, __source: { fileName: _jsxFileName, lineNumber: 579, columnNumber: 17 } });\n  };\n  return useTabLayout ? ___EmotionJSX(Modal, { css: (theme) => [\n    antDTabsStyles,\n    antDModalNoPaddingStyles,\n    antDModalStyles(theme),\n    formHelperStyles(theme),\n    formStyles(theme)],\n    name: \"database\", \"data-test\": \"database-modal\", onHandledPrimaryAction: onSave, onHide: onClose, primaryButtonName: isEditMode ? t('Save') : t('Connect'), width: \"500px\", centered: true, show: show, title: ___EmotionJSX(\"h4\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 598, columnNumber: 204 } }, isEditMode ? t('Edit database') : t('Connect a database')), footer: isEditMode ? renderEditModalFooter() : renderModalFooter(), __self: this, __source: { fileName: _jsxFileName, lineNumber: 592, columnNumber: 28 } },\n  ___EmotionJSX(StyledStickyHeader, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 599, columnNumber: 7 } },\n  ___EmotionJSX(TabHeader, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 600, columnNumber: 9 } },\n  ___EmotionJSX(ModalHeader, { isLoading: isLoading, isEditMode: isEditMode, useSqlAlchemyForm: useSqlAlchemyForm, hasConnectedDb: hasConnectedDb, db: db, dbName: dbName, dbModel: dbModel, __self: this, __source: { fileName: _jsxFileName, lineNumber: 601, columnNumber: 11 } }))),\n\n\n  ___EmotionJSX(Tabs, { defaultActiveKey: DEFAULT_TAB_KEY, activeKey: tabKey, onTabClick: tabChange, animated: { inkBar: true, tabPane: true }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 604, columnNumber: 7 } },\n  ___EmotionJSX(Tabs.TabPane, { tab: ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 605, columnNumber: 28 } }, t('Basic')), key: \"1\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 605, columnNumber: 9 } },\n  useSqlAlchemyForm ? ___EmotionJSX(StyledAlignment, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 606, columnNumber: 33 } },\n  ___EmotionJSX(SqlAlchemyForm, { db: db, onInputChange: ({ target }) => onChange(ActionType.inputChange, {\n      type: target.type,\n      name: target.name,\n      checked: target.checked,\n      value: target.value }),\n    conf: conf, testConnection: testConnection, isEditMode: isEditMode, __self: this, __source: { fileName: _jsxFileName, lineNumber: 607, columnNumber: 15 } }),\n  isDynamic((db == null ? void 0 : db.backend) || (db == null ? void 0 : db.engine)) && !isEditMode && ___EmotionJSX(\"div\", { css: (theme) => infoTooltip(theme), __self: this, __source: { fileName: _jsxFileName, lineNumber: 613, columnNumber: 72 } },\n  ___EmotionJSX(Button, { buttonStyle: \"link\", onClick: () => setDB({\n      type: ActionType.configMethodChange,\n      payload: {\n        database_name: db == null ? void 0 : db.database_name,\n        configuration_method: CONFIGURATION_METHOD.DYNAMIC_FORM,\n        engine: db == null ? void 0 : db.engine } }),\n\n    css: (theme) => alchemyButtonLinkStyles(theme), __self: this, __source: { fileName: _jsxFileName, lineNumber: 614, columnNumber: 19 } }, \"Connect this database using the dynamic form instead\"),\n\n\n  ___EmotionJSX(InfoTooltip, { tooltip: t('Click this link to switch to an alternate form that exposes only the required fields needed to connect this database.'), viewBox: \"0 -6 24 24\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 624, columnNumber: 19 } }))) :\n\n  ___EmotionJSX(DatabaseConnectionForm, { isEditMode: true, sslForced: sslForced, dbModel: dbModel, db: db, onParametersChange: ({ target }) => onChange(ActionType.parametersChange, {\n      type: target.type,\n      name: target.name,\n      checked: target.checked,\n      value: target.value }),\n    onChange: ({ target }) => onChange(ActionType.textChange, {\n      name: target.name,\n      value: target.value }),\n    onAddTableCatalog: () => setDB({ type: ActionType.addTableCatalogSheet }), onRemoveTableCatalog: (idx) => setDB({\n      type: ActionType.removeTableCatalogSheet,\n      payload: { indexToDelete: idx } }),\n    getValidation: () => getValidation(db), validationErrors: validationErrors, __self: this, __source: { fileName: _jsxFileName, lineNumber: 626, columnNumber: 36 } }),\n  !isEditMode && ___EmotionJSX(StyledAlertMargin, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 638, columnNumber: 28 } },\n  ___EmotionJSX(Alert, { closable: false, css: (theme) => antDAlertStyles(theme), message: \"Additional fields may be required\", showIcon: true, description: ___EmotionJSX(React.Fragment, null, \"Select databases require additional fields to be completed in the Advanced tab to successfully connect the database. Learn what requirements your databases has\",\n\n\n    ' ',\n    ___EmotionJSX(\"a\", { href: DOCUMENTATION_LINK, target: \"_blank\", rel: \"noopener noreferrer\", className: \"additional-fields-alert-description\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 643, columnNumber: 21 } }, \"here\"), \".\"),\n\n\n\n    type: \"info\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 639, columnNumber: 15 } }))),\n\n\n  ___EmotionJSX(Tabs.TabPane, { tab: ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 650, columnNumber: 28 } }, t('Advanced')), key: \"2\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 650, columnNumber: 9 } },\n  ___EmotionJSX(ExtraOptions, { db: db, onInputChange: ({ target }) => onChange(ActionType.inputChange, {\n      type: target.type,\n      name: target.name,\n      checked: target.checked,\n      value: target.value }),\n    onTextChange: ({ target }) => onChange(ActionType.textChange, {\n      name: target.name,\n      value: target.value }),\n    onEditorChange: (payload) => onChange(ActionType.editorChange, payload), onExtraInputChange: ({ target }) => {\n      onChange(ActionType.extraInputChange, {\n        type: target.type,\n        name: target.name,\n        checked: target.checked,\n        value: target.value });\n\n    }, onExtraEditorChange: (payload) => {\n      onChange(ActionType.extraEditorChange, payload);\n    }, __self: this, __source: { fileName: _jsxFileName, lineNumber: 651, columnNumber: 11 } }),\n  showDBError && errorAlert()))) :\n\n\n  ___EmotionJSX(Modal, { css: (theme) => [\n    antDModalNoPaddingStyles,\n    antDModalStyles(theme),\n    formHelperStyles(theme),\n    formStyles(theme)],\n    name: \"database\", onHandledPrimaryAction: onSave, onHide: onClose, primaryButtonName: hasConnectedDb ? t('Finish') : t('Connect'), width: \"500px\", centered: true, show: show, title: ___EmotionJSX(\"h4\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 677, columnNumber: 183 } }, t('Connect a database')), footer: renderModalFooter(), __self: this, __source: { fileName: _jsxFileName, lineNumber: 672, columnNumber: 18 } },\n  hasConnectedDb ? ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(ModalHeader, { isLoading: isLoading, isEditMode: isEditMode, useSqlAlchemyForm: useSqlAlchemyForm, hasConnectedDb: hasConnectedDb, db: db, dbName: dbName, dbModel: dbModel, editNewDb: editNewDb, __self: this, __source: { fileName: _jsxFileName, lineNumber: 679, columnNumber: 11 } }),\n  renderFinishState()) :\n  ___EmotionJSX(React.Fragment, null,\n\n  !isLoading && (\n  !db ? ___EmotionJSX(SelectDatabaseStyles, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 684, columnNumber: 25 } },\n  ___EmotionJSX(ModalHeader, { isLoading: isLoading, isEditMode: isEditMode, useSqlAlchemyForm: useSqlAlchemyForm, hasConnectedDb: hasConnectedDb, db: db, dbName: dbName, dbModel: dbModel, __self: this, __source: { fileName: _jsxFileName, lineNumber: 685, columnNumber: 17 } }),\n  renderPreferredSelector(),\n  renderAvailableSelector()) :\n  ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(ModalHeader, { isLoading: isLoading, isEditMode: isEditMode, useSqlAlchemyForm: useSqlAlchemyForm, hasConnectedDb: hasConnectedDb, db: db, dbName: dbName, dbModel: dbModel, __self: this, __source: { fileName: _jsxFileName, lineNumber: 689, columnNumber: 17 } }),\n  connectionAlert && ___EmotionJSX(StyledAlertMargin, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 690, columnNumber: 38 } },\n  ___EmotionJSX(Alert, { closable: false, css: (theme) => antDAlertStyles(theme), type: \"info\", showIcon: true, message: t('IP Allowlist'), description: connectionAlert.ALLOWED_IPS, __self: this, __source: { fileName: _jsxFileName, lineNumber: 691, columnNumber: 21 } })),\n\n  ___EmotionJSX(DatabaseConnectionForm, { db: db, sslForced: sslForced, dbModel: dbModel, onAddTableCatalog: () => {\n      setDB({ type: ActionType.addTableCatalogSheet });\n    }, onRemoveTableCatalog: (idx) => {\n      setDB({\n        type: ActionType.removeTableCatalogSheet,\n        payload: { indexToDelete: idx } });\n\n    }, onParametersChange: ({ target }) => onChange(ActionType.parametersChange, {\n      type: target.type,\n      name: target.name,\n      checked: target.checked,\n      value: target.value }),\n    onChange: ({ target }) => onChange(ActionType.textChange, {\n      name: target.name,\n      value: target.value }),\n    getValidation: () => getValidation(db), validationErrors: validationErrors, __self: this, __source: { fileName: _jsxFileName, lineNumber: 693, columnNumber: 17 } }),\n  ___EmotionJSX(\"div\", { css: (theme) => infoTooltip(theme), __self: this, __source: { fileName: _jsxFileName, lineNumber: 709, columnNumber: 17 } },\n  ___EmotionJSX(Button, { \"data-test\": \"sqla-connect-btn\", buttonStyle: \"link\", onClick: () => setDB({\n      type: ActionType.configMethodChange,\n      payload: {\n        engine: db.engine,\n        configuration_method: CONFIGURATION_METHOD.SQLALCHEMY_URI,\n        database_name: db.database_name } }),\n\n    css: buttonLinkStyles, __self: this, __source: { fileName: _jsxFileName, lineNumber: 710, columnNumber: 19 } }, \"Connect this database with a SQLAlchemy URI string instead\"),\n\n\n  ___EmotionJSX(InfoTooltip, { tooltip: t('Click this link to switch to an alternate form that allows you to input the SQLAlchemy URL for this database manually.'), viewBox: \"0 -6 24 24\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 720, columnNumber: 19 } })),\n\n\n  showDBError && errorAlert()))),\n\n\n  isLoading && ___EmotionJSX(Loading, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 726, columnNumber: 21 } }));\n\n};__signature__(DatabaseModal, \"useReducer{[db, setDB](null)}\\nuseState{[tabKey, setTabKey](DEFAULT_TAB_KEY)}\\nuseAvailableDatabases{[availableDbs, getAvailableDbs]}\\nuseDatabaseValidation{[validationErrors, getValidation, setValidationErrors,]}\\nuseState{[hasConnectedDb, setHasConnectedDb](false)}\\nuseState{[dbName, setDbName]('')}\\nuseState{[editNewDb, setEditNewDb](false)}\\nuseState{[isLoading, setLoading](false)}\\nuseCommonConf{conf}\\nuseSingleViewResource{{ state: { loading: dbLoading, resource: dbFetched, error: dbErrors }, fetchResource, createResource, updateResource, clearError, }}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\", () => [useAvailableDatabases, useDatabaseValidation, useCommonConf, useSingleViewResource]);const _default =\nwithToasts(DatabaseModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(errorAlertMapping, \"errorAlertMapping\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(ActionType, \"ActionType\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(dbReducer, \"dbReducer\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(DEFAULT_TAB_KEY, \"DEFAULT_TAB_KEY\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(serializeExtra, \"serializeExtra\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(DatabaseModal, \"DatabaseModal\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/views/CRUD/data/database/DatabaseModal/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  t,\n  SupersetTheme,\n  FeatureFlag,\n  isFeatureEnabled,\n} from '@superset-ui/core';\nimport React, {\n  FunctionComponent,\n  useEffect,\n  useState,\n  useReducer,\n  Reducer,\n} from 'react';\nimport Tabs from 'src/components/Tabs';\nimport { Select } from 'src/common/components';\nimport Alert from 'src/components/Alert';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport IconButton from 'src/components/IconButton';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport {\n  testDatabaseConnection,\n  useSingleViewResource,\n  useAvailableDatabases,\n  useDatabaseValidation,\n  getDatabaseImages,\n  getConnectionAlert,\n} from 'src/views/CRUD/hooks';\nimport { useCommonConf } from 'src/views/CRUD/data/database/state';\nimport {\n  DatabaseObject,\n  DatabaseForm,\n  CONFIGURATION_METHOD,\n  CatalogObject,\n} from 'src/views/CRUD/data/database/types';\nimport Loading from 'src/components/Loading';\nimport ExtraOptions from './ExtraOptions';\nimport SqlAlchemyForm from './SqlAlchemyForm';\nimport DatabaseConnectionForm from './DatabaseConnectionForm';\nimport {\n  antDErrorAlertStyles,\n  antDAlertStyles,\n  StyledAlertMargin,\n  antDModalNoPaddingStyles,\n  antDModalStyles,\n  antDTabsStyles,\n  buttonLinkStyles,\n  alchemyButtonLinkStyles,\n  TabHeader,\n  formHelperStyles,\n  formStyles,\n  StyledAlignment,\n  SelectDatabaseStyles,\n  infoTooltip,\n  StyledFooterButton,\n  StyledStickyHeader,\n} from './styles';\nimport ModalHeader, { DOCUMENTATION_LINK } from './ModalHeader';\n\nconst errorAlertMapping = {\n  CONNECTION_MISSING_PARAMETERS_ERROR: {\n    message: 'Missing Required Fields',\n    description: 'Please complete all required fields.',\n  },\n  CONNECTION_INVALID_HOSTNAME_ERROR: {\n    message: 'Could not verify the host',\n    description:\n      'The host is invalid. Please verify that this field is entered correctly.',\n  },\n  CONNECTION_PORT_CLOSED_ERROR: {\n    message: 'Port is closed',\n    description: 'Please verify that port is open to connect.',\n  },\n  CONNECTION_INVALID_PORT_ERROR: {\n    message: 'Invalid Port Number',\n    description: 'The port must be a whole number less than or equal to 65535.',\n  },\n  CONNECTION_ACCESS_DENIED_ERROR: {\n    message: 'Invalid account information',\n    description: 'Either the username or password is incorrect.',\n  },\n  CONNECTION_INVALID_PASSWORD_ERROR: {\n    message: 'Invalid account information',\n    description: 'Either the username or password is incorrect.',\n  },\n  INVALID_PAYLOAD_SCHEMA_ERROR: {\n    message: 'Incorrect Fields',\n    description: 'Please make sure all fields are filled out correctly',\n  },\n  TABLE_DOES_NOT_EXIST_ERROR: {\n    message: 'URL could not be identified',\n    description:\n      'The URL could not be identified. Please check for typos and make sure that \"Type of google sheet allowed\" selection matches the input',\n  },\n};\ninterface DatabaseModalProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  onDatabaseAdd?: (database?: DatabaseObject) => void; // TODO: should we add a separate function for edit?\n  onHide: () => void;\n  show: boolean;\n  databaseId: number | undefined; // If included, will go into edit mode\n}\n\nenum ActionType {\n  configMethodChange,\n  dbSelected,\n  editorChange,\n  fetched,\n  inputChange,\n  parametersChange,\n  reset,\n  textChange,\n  extraInputChange,\n  extraEditorChange,\n  addTableCatalogSheet,\n  removeTableCatalogSheet,\n}\n\ninterface DBReducerPayloadType {\n  target?: string;\n  name: string;\n  json?: {};\n  type?: string;\n  checked?: boolean;\n  value?: string;\n}\n\ntype DBReducerActionType =\n  | {\n      type:\n        | ActionType.extraEditorChange\n        | ActionType.extraInputChange\n        | ActionType.textChange\n        | ActionType.inputChange\n        | ActionType.editorChange\n        | ActionType.parametersChange;\n      payload: DBReducerPayloadType;\n    }\n  | {\n      type: ActionType.fetched;\n      payload: Partial<DatabaseObject>;\n    }\n  | {\n      type: ActionType.dbSelected;\n      payload: {\n        database_name?: string;\n        engine?: string;\n        configuration_method: CONFIGURATION_METHOD;\n      };\n    }\n  | {\n      type: ActionType.reset | ActionType.addTableCatalogSheet;\n    }\n  | {\n      type: ActionType.removeTableCatalogSheet;\n      payload: {\n        indexToDelete: number;\n      };\n    }\n  | {\n      type: ActionType.configMethodChange;\n      payload: {\n        database_name?: string;\n        engine?: string;\n        configuration_method: CONFIGURATION_METHOD;\n      };\n    };\n\nfunction dbReducer(\n  state: Partial<DatabaseObject> | null,\n  action: DBReducerActionType,\n): Partial<DatabaseObject> | null {\n  const trimmedState = {\n    ...(state || {}),\n  };\n  let query = '';\n  let deserializeExtraJSON = {};\n  let extra_json: DatabaseObject['extra_json'];\n\n  switch (action.type) {\n    case ActionType.extraEditorChange:\n      return {\n        ...trimmedState,\n        extra_json: {\n          ...trimmedState.extra_json,\n          [action.payload.name]: action.payload.json,\n        },\n      };\n    case ActionType.extraInputChange:\n      if (\n        action.payload.name === 'schema_cache_timeout' ||\n        action.payload.name === 'table_cache_timeout'\n      ) {\n        return {\n          ...trimmedState,\n          extra_json: {\n            ...trimmedState.extra_json,\n            metadata_cache_timeout: {\n              ...trimmedState.extra_json?.metadata_cache_timeout,\n              [action.payload.name]: action.payload.value,\n            },\n          },\n        };\n      }\n      return {\n        ...trimmedState,\n        extra_json: {\n          ...trimmedState.extra_json,\n          [action.payload.name]:\n            action.payload.type === 'checkbox'\n              ? action.payload.checked\n              : action.payload.value,\n        },\n      };\n    case ActionType.inputChange:\n      if (action.payload.type === 'checkbox') {\n        return {\n          ...trimmedState,\n          [action.payload.name]: action.payload.checked,\n        };\n      }\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case ActionType.parametersChange:\n      if (\n        trimmedState.catalog !== undefined &&\n        action.payload.type?.startsWith('catalog')\n      ) {\n        // Formatting wrapping google sheets table catalog\n        const idx = action.payload.type?.split('-')[1];\n        const catalogToUpdate = trimmedState?.catalog[idx] || {};\n        catalogToUpdate[action.payload.name] = action.payload.value;\n\n        const paramatersCatalog = {};\n        // eslint-disable-next-line array-callback-return\n        trimmedState.catalog?.map((item: CatalogObject) => {\n          paramatersCatalog[item.name] = item.value;\n        });\n\n        return {\n          ...trimmedState,\n          parameters: {\n            ...trimmedState.parameters,\n            catalog: paramatersCatalog,\n          },\n        };\n      }\n      return {\n        ...trimmedState,\n        parameters: {\n          ...trimmedState.parameters,\n          [action.payload.name]: action.payload.value,\n        },\n      };\n    case ActionType.addTableCatalogSheet:\n      if (trimmedState.catalog !== undefined) {\n        return {\n          ...trimmedState,\n          catalog: [...trimmedState.catalog, { name: '', value: '' }],\n        };\n      }\n      return {\n        ...trimmedState,\n        catalog: [{ name: '', value: '' }],\n      };\n    case ActionType.removeTableCatalogSheet:\n      trimmedState.catalog?.splice(action.payload.indexToDelete, 1);\n      return {\n        ...trimmedState,\n      };\n    case ActionType.editorChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.json,\n      };\n    case ActionType.textChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case ActionType.fetched:\n      // convert all the keys in this payload into strings\n      if (action.payload.extra) {\n        extra_json = {\n          ...JSON.parse(action.payload.extra || ''),\n        } as DatabaseObject['extra_json'];\n\n        deserializeExtraJSON = {\n          ...JSON.parse(action.payload.extra || ''),\n          metadata_params: JSON.stringify(extra_json?.metadata_params),\n          engine_params: JSON.stringify(extra_json?.engine_params),\n          schemas_allowed_for_csv_upload:\n            extra_json?.schemas_allowed_for_csv_upload,\n        };\n      }\n\n      if (\n        action.payload.backend === 'bigquery' &&\n        action.payload.configuration_method ===\n          CONFIGURATION_METHOD.DYNAMIC_FORM\n      ) {\n        return {\n          ...action.payload,\n          engine: action.payload.backend,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          parameters: {\n            query,\n            credentials_info: JSON.stringify(\n              action.payload?.parameters?.credentials_info || '',\n            ),\n          },\n        };\n      }\n\n      if (\n        action.payload.backend === 'gsheets' &&\n        action.payload.configuration_method ===\n          CONFIGURATION_METHOD.DYNAMIC_FORM &&\n        extra_json?.engine_params?.catalog !== undefined\n      ) {\n        // pull catalog from engine params\n        const engineParamsCatalog = extra_json?.engine_params?.catalog;\n\n        return {\n          ...action.payload,\n          engine: action.payload.backend,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          catalog: Object.keys(engineParamsCatalog).map(e => ({\n            name: e,\n            value: engineParamsCatalog[e],\n          })),\n        } as DatabaseObject;\n      }\n\n      if (action.payload?.parameters?.query) {\n        // convert query into URI params string\n        query = new URLSearchParams(\n          action.payload.parameters.query as string,\n        ).toString();\n\n        return {\n          ...action.payload,\n          encrypted_extra: action.payload.encrypted_extra || '',\n          engine: action.payload.backend || trimmedState.engine,\n          configuration_method: action.payload.configuration_method,\n          extra_json: deserializeExtraJSON,\n          parameters: {\n            ...action.payload.parameters,\n            query,\n          },\n        };\n      }\n\n      return {\n        ...action.payload,\n        encrypted_extra: action.payload.encrypted_extra || '',\n        engine: action.payload.backend || trimmedState.engine,\n        configuration_method: action.payload.configuration_method,\n        extra_json: deserializeExtraJSON,\n        parameters: {\n          ...action.payload.parameters,\n        },\n      };\n\n    case ActionType.dbSelected:\n      return {\n        ...action.payload,\n      };\n    case ActionType.configMethodChange:\n      return {\n        ...action.payload,\n      };\n    case ActionType.reset:\n    default:\n      return null;\n  }\n}\n\nconst DEFAULT_TAB_KEY = '1';\n\nconst serializeExtra = (extraJson: DatabaseObject['extra_json']) =>\n  JSON.stringify({\n    ...extraJson,\n    metadata_params: JSON.parse((extraJson?.metadata_params as string) || '{}'),\n    engine_params: JSON.parse(\n      ((extraJson?.engine_params as unknown) as string) || '{}',\n    ),\n    schemas_allowed_for_csv_upload:\n      (extraJson?.schemas_allowed_for_csv_upload as string) || '[]',\n  });\n\nconst DatabaseModal: FunctionComponent<DatabaseModalProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  onDatabaseAdd,\n  onHide,\n  show,\n  databaseId,\n}) => {\n  const [db, setDB] = useReducer<\n    Reducer<Partial<DatabaseObject> | null, DBReducerActionType>\n  >(dbReducer, null);\n  const [tabKey, setTabKey] = useState<string>(DEFAULT_TAB_KEY);\n  const [availableDbs, getAvailableDbs] = useAvailableDatabases();\n  const [\n    validationErrors,\n    getValidation,\n    setValidationErrors,\n  ] = useDatabaseValidation();\n  const [hasConnectedDb, setHasConnectedDb] = useState<boolean>(false);\n  const [dbName, setDbName] = useState('');\n  const [editNewDb, setEditNewDb] = useState<boolean>(false);\n  const [isLoading, setLoading] = useState<boolean>(false);\n  const conf = useCommonConf();\n  const dbImages = getDatabaseImages();\n  const connectionAlert = getConnectionAlert();\n  const isEditMode = !!databaseId;\n  const sslForced = isFeatureEnabled(\n    FeatureFlag.FORCE_DATABASE_CONNECTIONS_SSL,\n  );\n  const useSqlAlchemyForm =\n    db?.configuration_method === CONFIGURATION_METHOD.SQLALCHEMY_URI;\n  const useTabLayout = isEditMode || useSqlAlchemyForm;\n\n  // Database fetch logic\n  const {\n    state: { loading: dbLoading, resource: dbFetched, error: dbErrors },\n    fetchResource,\n    createResource,\n    updateResource,\n    clearError,\n  } = useSingleViewResource<DatabaseObject>(\n    'database',\n    t('database'),\n    addDangerToast,\n  );\n  const isDynamic = (engine: string | undefined) =>\n    availableDbs?.databases.filter(\n      (DB: DatabaseObject) => DB.backend === engine || DB.engine === engine,\n    )[0].parameters !== undefined;\n  const showDBError = validationErrors || dbErrors;\n  const isEmpty = (data?: Object | null) =>\n    data && Object.keys(data).length === 0;\n\n  const dbModel: DatabaseForm =\n    availableDbs?.databases?.find(\n      (available: { engine: string | undefined }) =>\n        // TODO: we need a centralized engine in one place\n        available.engine === (isEditMode ? db?.backend : db?.engine),\n    ) || {};\n\n  // Test Connection logic\n  const testConnection = () => {\n    if (!db?.sqlalchemy_uri) {\n      addDangerToast(t('Please enter a SQLAlchemy URI to test'));\n      return;\n    }\n\n    const connection = {\n      sqlalchemy_uri: db?.sqlalchemy_uri || '',\n      database_name: db?.database_name?.trim() || undefined,\n      impersonate_user: db?.impersonate_user || undefined,\n      extra: serializeExtra(db?.extra_json) || undefined,\n      encrypted_extra: db?.encrypted_extra || '',\n      server_cert: db?.server_cert || undefined,\n    };\n\n    testDatabaseConnection(connection, addDangerToast, addSuccessToast);\n  };\n\n  const onClose = () => {\n    setDB({ type: ActionType.reset });\n    setHasConnectedDb(false);\n    setValidationErrors(null); // reset validation errors on close\n    clearError();\n    setEditNewDb(false);\n    onHide();\n  };\n\n  const onSave = async () => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { id, ...update } = db || {};\n\n    // Clone DB object\n    const dbToUpdate = JSON.parse(JSON.stringify(update));\n\n    if (dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM) {\n      // Validate DB before saving\n      await getValidation(dbToUpdate, true);\n      if (validationErrors && !isEmpty(validationErrors)) {\n        return;\n      }\n\n      if (dbToUpdate?.parameters?.query) {\n        // convert query params into dictionary\n        dbToUpdate.parameters.query = JSON.parse(\n          `{\"${decodeURI((dbToUpdate?.parameters?.query as string) || '')\n            .replace(/\"/g, '\\\\\"')\n            .replace(/&/g, '\",\"')\n            .replace(/=/g, '\":\"')}\"}`,\n        );\n      } else if (\n        dbToUpdate?.parameters?.query === '' &&\n        'query' in dbModel.parameters\n      ) {\n        dbToUpdate.parameters.query = {};\n      }\n\n      const engine = dbToUpdate.backend || dbToUpdate.engine;\n      if (engine === 'bigquery' && dbToUpdate.parameters?.credentials_info) {\n        // wrap encrypted_extra in credentials_info only for BigQuery\n        if (\n          dbToUpdate.parameters?.credentials_info &&\n          typeof dbToUpdate.parameters?.credentials_info === 'object' &&\n          dbToUpdate.parameters?.credentials_info.constructor === Object\n        ) {\n          // Don't cast if object\n          dbToUpdate.encrypted_extra = JSON.stringify({\n            credentials_info: dbToUpdate.parameters?.credentials_info,\n          });\n\n          // Convert credentials info string before updating\n          dbToUpdate.parameters.credentials_info = JSON.stringify(\n            dbToUpdate.parameters.credentials_info,\n          );\n        } else {\n          dbToUpdate.encrypted_extra = JSON.stringify({\n            credentials_info: JSON.parse(\n              dbToUpdate.parameters?.credentials_info,\n            ),\n          });\n        }\n      }\n    }\n\n    if (dbToUpdate.parameters.catalog) {\n      // need to stringify gsheets catalog to allow it to be seralized\n      dbToUpdate.extra_json = {\n        engine_params: JSON.stringify({\n          catalog: dbToUpdate.parameters.catalog,\n        }),\n      };\n    }\n\n    if (dbToUpdate?.extra_json) {\n      // convert extra_json to back to string\n      dbToUpdate.extra = serializeExtra(dbToUpdate?.extra_json);\n    }\n\n    if (db?.id) {\n      setLoading(true);\n      const result = await updateResource(\n        db.id as number,\n        dbToUpdate as DatabaseObject,\n        dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM, // onShow toast on SQLA Forms\n      );\n      if (result) {\n        if (onDatabaseAdd) {\n          onDatabaseAdd();\n        }\n        if (!editNewDb) {\n          onClose();\n        }\n      }\n    } else if (db) {\n      // Create\n      setLoading(true);\n      const dbId = await createResource(\n        dbToUpdate as DatabaseObject,\n        dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM, // onShow toast on SQLA Forms\n      );\n      if (dbId) {\n        setHasConnectedDb(true);\n        if (onDatabaseAdd) {\n          onDatabaseAdd();\n        }\n        if (useTabLayout) {\n          // tab layout only has one step\n          // so it should close immediately on save\n          onClose();\n        }\n      }\n    }\n    setEditNewDb(false);\n    setLoading(false);\n  };\n\n  const onChange = (type: any, payload: any) => {\n    setDB({ type, payload } as DBReducerActionType);\n  };\n\n  // Initialize\n  const fetchDB = () => {\n    if (isEditMode && databaseId) {\n      if (!dbLoading) {\n        fetchResource(databaseId).catch(e =>\n          addDangerToast(\n            t(\n              'Sorry there was an error fetching database information: %s',\n              e.message,\n            ),\n          ),\n        );\n      }\n    }\n  };\n\n  const setDatabaseModel = (database_name: string) => {\n    const selectedDbModel = availableDbs?.databases.filter(\n      (db: DatabaseObject) => db.name === database_name,\n    )[0];\n    const { engine, parameters } = selectedDbModel;\n    const isDynamic = parameters !== undefined;\n    setDB({\n      type: ActionType.dbSelected,\n      payload: {\n        database_name,\n        configuration_method: isDynamic\n          ? CONFIGURATION_METHOD.DYNAMIC_FORM\n          : CONFIGURATION_METHOD.SQLALCHEMY_URI,\n        engine,\n      },\n    });\n    setDB({ type: ActionType.addTableCatalogSheet });\n  };\n\n  const renderAvailableSelector = () => (\n    <div className=\"available\">\n      <h4 className=\"available-label\">\n        Or choose from a list of other databases we support:\n      </h4>\n      <div className=\"control-label\">Supported databases</div>\n      <Select\n        className=\"available-select\"\n        onChange={setDatabaseModel}\n        placeholder=\"Choose a database...\"\n      >\n        {[...(availableDbs?.databases || [])]\n          ?.sort((a: DatabaseForm, b: DatabaseForm) =>\n            a.name.localeCompare(b.name),\n          )\n          .map((database: DatabaseForm) => (\n            <Select.Option value={database.name} key={database.name}>\n              {database.name}\n            </Select.Option>\n          ))}\n      </Select>\n      <Alert\n        showIcon\n        closable={false}\n        css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n        type=\"info\"\n        message={\n          connectionAlert?.ADD_DATABASE?.message ||\n          t('Want to add a new database?')\n        }\n        description={\n          connectionAlert?.ADD_DATABASE ? (\n            <>\n              Any databases that allow connections via SQL Alchemy URIs can be\n              added.{' '}\n              <a\n                href={connectionAlert?.ADD_DATABASE.contact_link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {connectionAlert?.ADD_DATABASE.contact_description_link}\n              </a>{' '}\n              {connectionAlert?.ADD_DATABASE.description}\n            </>\n          ) : (\n            <>\n              Any databases that allow connections via SQL Alchemy URIs can be\n              added. Learn about how to connect a database driver{' '}\n              <a\n                href={DOCUMENTATION_LINK}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                here\n              </a>\n              .\n            </>\n          )\n        }\n      />\n    </div>\n  );\n\n  const renderPreferredSelector = () => (\n    <div className=\"preferred\">\n      {availableDbs?.databases\n        ?.filter((db: DatabaseForm) => db.preferred)\n        .map((database: DatabaseForm) => (\n          <IconButton\n            className=\"preferred-item\"\n            onClick={() => setDatabaseModel(database.name)}\n            buttonText={database.name}\n            icon={dbImages?.[database.engine]}\n          />\n        ))}\n    </div>\n  );\n\n  const handleBackButtonOnFinish = () => {\n    if (dbFetched) {\n      fetchResource(dbFetched.id as number);\n    }\n    setEditNewDb(true);\n  };\n\n  const handleBackButtonOnConnect = () => {\n    if (editNewDb) {\n      setHasConnectedDb(false);\n    }\n    setDB({ type: ActionType.reset });\n  };\n\n  const renderModalFooter = () => {\n    if (db) {\n      // if db show back + connenct\n      if (!hasConnectedDb || editNewDb) {\n        return (\n          <>\n            <StyledFooterButton key=\"back\" onClick={handleBackButtonOnConnect}>\n              Back\n            </StyledFooterButton>\n            <StyledFooterButton\n              key=\"submit\"\n              buttonStyle=\"primary\"\n              onClick={onSave}\n            >\n              Connect\n            </StyledFooterButton>\n          </>\n        );\n      }\n\n      return (\n        <>\n          <StyledFooterButton key=\"back\" onClick={handleBackButtonOnFinish}>\n            Back\n          </StyledFooterButton>\n          <StyledFooterButton\n            key=\"submit\"\n            buttonStyle=\"primary\"\n            onClick={onSave}\n            data-test=\"modal-confirm-button\"\n          >\n            Finish\n          </StyledFooterButton>\n        </>\n      );\n    }\n    return [];\n  };\n\n  const renderEditModalFooter = () => (\n    <>\n      <StyledFooterButton key=\"close\" onClick={onClose}>\n        Close\n      </StyledFooterButton>\n      <StyledFooterButton key=\"submit\" buttonStyle=\"primary\" onClick={onSave}>\n        Finish\n      </StyledFooterButton>\n    </>\n  );\n  useEffect(() => {\n    if (show) {\n      setTabKey(DEFAULT_TAB_KEY);\n      getAvailableDbs();\n      setLoading(true);\n    }\n    if (databaseId && show) {\n      fetchDB();\n    }\n  }, [show, databaseId]);\n\n  useEffect(() => {\n    if (dbFetched) {\n      setDB({\n        type: ActionType.fetched,\n        payload: dbFetched,\n      });\n      // keep a copy of the name separate for display purposes\n      // because it shouldn't change when the form is updated\n      setDbName(dbFetched.database_name);\n    }\n  }, [dbFetched]);\n\n  useEffect(() => {\n    if (isLoading) {\n      setLoading(false);\n    }\n  }, [availableDbs]);\n\n  const tabChange = (key: string) => {\n    setTabKey(key);\n  };\n\n  const errorAlert = () => {\n    if (\n      isEmpty(dbErrors) ||\n      (isEmpty(validationErrors) &&\n        !(validationErrors?.error_type in errorAlertMapping))\n    ) {\n      return <></>;\n    }\n\n    if (validationErrors) {\n      return (\n        <Alert\n          type=\"error\"\n          css={(theme: SupersetTheme) => antDErrorAlertStyles(theme)}\n          message={\n            errorAlertMapping[validationErrors?.error_type]?.message ||\n            validationErrors?.error_type\n          }\n          description={\n            errorAlertMapping[validationErrors?.error_type]?.description ||\n            JSON.stringify(validationErrors)\n          }\n          showIcon\n          closable={false}\n        />\n      );\n    }\n\n    const message: Array<string> = Object.values(dbErrors);\n    return (\n      <Alert\n        type=\"error\"\n        css={(theme: SupersetTheme) => antDErrorAlertStyles(theme)}\n        message=\"Database Creation Error\"\n        description={message[0]}\n      />\n    );\n  };\n\n  const renderFinishState = () => {\n    if (!editNewDb) {\n      return (\n        <ExtraOptions\n          db={db as DatabaseObject}\n          onInputChange={({ target }: { target: HTMLInputElement }) =>\n            onChange(ActionType.inputChange, {\n              type: target.type,\n              name: target.name,\n              checked: target.checked,\n              value: target.value,\n            })\n          }\n          onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\n            onChange(ActionType.textChange, {\n              name: target.name,\n              value: target.value,\n            })\n          }\n          onEditorChange={(payload: { name: string; json: any }) =>\n            onChange(ActionType.editorChange, payload)\n          }\n          onExtraInputChange={({ target }: { target: HTMLInputElement }) => {\n            onChange(ActionType.extraInputChange, {\n              type: target.type,\n              name: target.name,\n              checked: target.checked,\n              value: target.value,\n            });\n          }}\n          onExtraEditorChange={(payload: { name: string; json: any }) =>\n            onChange(ActionType.extraEditorChange, payload)\n          }\n        />\n      );\n    }\n    return (\n      <DatabaseConnectionForm\n        isEditMode\n        sslForced={sslForced}\n        dbModel={dbModel}\n        db={db as DatabaseObject}\n        onParametersChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.parametersChange, {\n            type: target.type,\n            name: target.name,\n            checked: target.checked,\n            value: target.value,\n          })\n        }\n        onChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.textChange, {\n            name: target.name,\n            value: target.value,\n          })\n        }\n        onAddTableCatalog={() =>\n          setDB({ type: ActionType.addTableCatalogSheet })\n        }\n        onRemoveTableCatalog={(idx: number) =>\n          setDB({\n            type: ActionType.removeTableCatalogSheet,\n            payload: { indexToDelete: idx },\n          })\n        }\n        getValidation={() => getValidation(db)}\n        validationErrors={validationErrors}\n      />\n    );\n  };\n\n  return useTabLayout ? (\n    <Modal\n      css={(theme: SupersetTheme) => [\n        antDTabsStyles,\n        antDModalNoPaddingStyles,\n        antDModalStyles(theme),\n        formHelperStyles(theme),\n        formStyles(theme),\n      ]}\n      name=\"database\"\n      data-test=\"database-modal\"\n      onHandledPrimaryAction={onSave}\n      onHide={onClose}\n      primaryButtonName={isEditMode ? t('Save') : t('Connect')}\n      width=\"500px\"\n      centered\n      show={show}\n      title={\n        <h4>{isEditMode ? t('Edit database') : t('Connect a database')}</h4>\n      }\n      footer={isEditMode ? renderEditModalFooter() : renderModalFooter()}\n    >\n      <StyledStickyHeader>\n        <TabHeader>\n          <ModalHeader\n            isLoading={isLoading}\n            isEditMode={isEditMode}\n            useSqlAlchemyForm={useSqlAlchemyForm}\n            hasConnectedDb={hasConnectedDb}\n            db={db}\n            dbName={dbName}\n            dbModel={dbModel}\n          />\n        </TabHeader>\n      </StyledStickyHeader>\n      <Tabs\n        defaultActiveKey={DEFAULT_TAB_KEY}\n        activeKey={tabKey}\n        onTabClick={tabChange}\n        animated={{ inkBar: true, tabPane: true }}\n      >\n        <Tabs.TabPane tab={<span>{t('Basic')}</span>} key=\"1\">\n          {useSqlAlchemyForm ? (\n            <StyledAlignment>\n              <SqlAlchemyForm\n                db={db as DatabaseObject}\n                onInputChange={({ target }: { target: HTMLInputElement }) =>\n                  onChange(ActionType.inputChange, {\n                    type: target.type,\n                    name: target.name,\n                    checked: target.checked,\n                    value: target.value,\n                  })\n                }\n                conf={conf}\n                testConnection={testConnection}\n                isEditMode={isEditMode}\n              />\n              {isDynamic(db?.backend || db?.engine) && !isEditMode && (\n                <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n                  <Button\n                    buttonStyle=\"link\"\n                    onClick={() =>\n                      setDB({\n                        type: ActionType.configMethodChange,\n                        payload: {\n                          database_name: db?.database_name,\n                          configuration_method:\n                            CONFIGURATION_METHOD.DYNAMIC_FORM,\n                          engine: db?.engine,\n                        },\n                      })\n                    }\n                    css={theme => alchemyButtonLinkStyles(theme)}\n                  >\n                    Connect this database using the dynamic form instead\n                  </Button>\n                  <InfoTooltip\n                    tooltip={t(\n                      'Click this link to switch to an alternate form that exposes only the required fields needed to connect this database.',\n                    )}\n                    viewBox=\"0 -6 24 24\"\n                  />\n                </div>\n              )}\n            </StyledAlignment>\n          ) : (\n            <DatabaseConnectionForm\n              isEditMode\n              sslForced={sslForced}\n              dbModel={dbModel}\n              db={db as DatabaseObject}\n              onParametersChange={({ target }: { target: HTMLInputElement }) =>\n                onChange(ActionType.parametersChange, {\n                  type: target.type,\n                  name: target.name,\n                  checked: target.checked,\n                  value: target.value,\n                })\n              }\n              onChange={({ target }: { target: HTMLInputElement }) =>\n                onChange(ActionType.textChange, {\n                  name: target.name,\n                  value: target.value,\n                })\n              }\n              onAddTableCatalog={() =>\n                setDB({ type: ActionType.addTableCatalogSheet })\n              }\n              onRemoveTableCatalog={(idx: number) =>\n                setDB({\n                  type: ActionType.removeTableCatalogSheet,\n                  payload: { indexToDelete: idx },\n                })\n              }\n              getValidation={() => getValidation(db)}\n              validationErrors={validationErrors}\n            />\n          )}\n          {!isEditMode && (\n            <StyledAlertMargin>\n              <Alert\n                closable={false}\n                css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n                message=\"Additional fields may be required\"\n                showIcon\n                description={\n                  <>\n                    Select databases require additional fields to be completed\n                    in the Advanced tab to successfully connect the database.\n                    Learn what requirements your databases has{' '}\n                    <a\n                      href={DOCUMENTATION_LINK}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"additional-fields-alert-description\"\n                    >\n                      here\n                    </a>\n                    .\n                  </>\n                }\n                type=\"info\"\n              />\n            </StyledAlertMargin>\n          )}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab={<span>{t('Advanced')}</span>} key=\"2\">\n          <ExtraOptions\n            db={db as DatabaseObject}\n            onInputChange={({ target }: { target: HTMLInputElement }) =>\n              onChange(ActionType.inputChange, {\n                type: target.type,\n                name: target.name,\n                checked: target.checked,\n                value: target.value,\n              })\n            }\n            onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\n              onChange(ActionType.textChange, {\n                name: target.name,\n                value: target.value,\n              })\n            }\n            onEditorChange={(payload: { name: string; json: any }) =>\n              onChange(ActionType.editorChange, payload)\n            }\n            onExtraInputChange={({ target }: { target: HTMLInputElement }) => {\n              onChange(ActionType.extraInputChange, {\n                type: target.type,\n                name: target.name,\n                checked: target.checked,\n                value: target.value,\n              });\n            }}\n            onExtraEditorChange={(payload: { name: string; json: any }) => {\n              onChange(ActionType.extraEditorChange, payload);\n            }}\n          />\n          {showDBError && errorAlert()}\n        </Tabs.TabPane>\n      </Tabs>\n    </Modal>\n  ) : (\n    <Modal\n      css={(theme: SupersetTheme) => [\n        antDModalNoPaddingStyles,\n        antDModalStyles(theme),\n        formHelperStyles(theme),\n        formStyles(theme),\n      ]}\n      name=\"database\"\n      onHandledPrimaryAction={onSave}\n      onHide={onClose}\n      primaryButtonName={hasConnectedDb ? t('Finish') : t('Connect')}\n      width=\"500px\"\n      centered\n      show={show}\n      title={<h4>{t('Connect a database')}</h4>}\n      footer={renderModalFooter()}\n    >\n      {hasConnectedDb ? (\n        <>\n          <ModalHeader\n            isLoading={isLoading}\n            isEditMode={isEditMode}\n            useSqlAlchemyForm={useSqlAlchemyForm}\n            hasConnectedDb={hasConnectedDb}\n            db={db}\n            dbName={dbName}\n            dbModel={dbModel}\n            editNewDb={editNewDb}\n          />\n          {renderFinishState()}\n        </>\n      ) : (\n        <>\n          {/* Dyanmic Form Step 1 */}\n          {!isLoading &&\n            (!db ? (\n              <SelectDatabaseStyles>\n                <ModalHeader\n                  isLoading={isLoading}\n                  isEditMode={isEditMode}\n                  useSqlAlchemyForm={useSqlAlchemyForm}\n                  hasConnectedDb={hasConnectedDb}\n                  db={db}\n                  dbName={dbName}\n                  dbModel={dbModel}\n                />\n                {renderPreferredSelector()}\n                {renderAvailableSelector()}\n              </SelectDatabaseStyles>\n            ) : (\n              <>\n                <ModalHeader\n                  isLoading={isLoading}\n                  isEditMode={isEditMode}\n                  useSqlAlchemyForm={useSqlAlchemyForm}\n                  hasConnectedDb={hasConnectedDb}\n                  db={db}\n                  dbName={dbName}\n                  dbModel={dbModel}\n                />\n                {connectionAlert && (\n                  <StyledAlertMargin>\n                    <Alert\n                      closable={false}\n                      css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n                      type=\"info\"\n                      showIcon\n                      message={t('IP Allowlist')}\n                      description={connectionAlert.ALLOWED_IPS}\n                    />\n                  </StyledAlertMargin>\n                )}\n                <DatabaseConnectionForm\n                  db={db}\n                  sslForced={sslForced}\n                  dbModel={dbModel}\n                  onAddTableCatalog={() => {\n                    setDB({ type: ActionType.addTableCatalogSheet });\n                  }}\n                  onRemoveTableCatalog={(idx: number) => {\n                    setDB({\n                      type: ActionType.removeTableCatalogSheet,\n                      payload: { indexToDelete: idx },\n                    });\n                  }}\n                  onParametersChange={({\n                    target,\n                  }: {\n                    target: HTMLInputElement;\n                  }) =>\n                    onChange(ActionType.parametersChange, {\n                      type: target.type,\n                      name: target.name,\n                      checked: target.checked,\n                      value: target.value,\n                    })\n                  }\n                  onChange={({ target }: { target: HTMLInputElement }) =>\n                    onChange(ActionType.textChange, {\n                      name: target.name,\n                      value: target.value,\n                    })\n                  }\n                  getValidation={() => getValidation(db)}\n                  validationErrors={validationErrors}\n                />\n                <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n                  <Button\n                    data-test=\"sqla-connect-btn\"\n                    buttonStyle=\"link\"\n                    onClick={() =>\n                      setDB({\n                        type: ActionType.configMethodChange,\n                        payload: {\n                          engine: db.engine,\n                          configuration_method:\n                            CONFIGURATION_METHOD.SQLALCHEMY_URI,\n                          database_name: db.database_name,\n                        },\n                      })\n                    }\n                    css={buttonLinkStyles}\n                  >\n                    Connect this database with a SQLAlchemy URI string instead\n                  </Button>\n                  <InfoTooltip\n                    tooltip={t(\n                      'Click this link to switch to an alternate form that allows you to input the SQLAlchemy URL for this database manually.',\n                    )}\n                    viewBox=\"0 -6 24 24\"\n                  />\n                </div>\n                {/* Step 2 */}\n                {showDBError && errorAlert()}\n              </>\n            ))}\n        </>\n      )}\n      {isLoading && <Loading />}\n    </Modal>\n  );\n};\n\nexport default withToasts(DatabaseModal);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}