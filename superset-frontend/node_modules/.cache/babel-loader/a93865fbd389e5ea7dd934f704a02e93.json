{"ast":null,"code":"import \"core-js/modules/es.promise.finally.js\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport copyTextToClipboard from 'src/utils/copy';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  copyNode: PropTypes.node,\n  getText: PropTypes.func,\n  onCopyEnd: PropTypes.func,\n  shouldShowText: PropTypes.bool,\n  text: PropTypes.string,\n  wrapped: PropTypes.bool,\n  tooltipText: PropTypes.string,\n  addDangerToast: PropTypes.func.isRequired,\n  addSuccessToast: PropTypes.func.isRequired };\n\n\nconst defaultProps = {\n  copyNode: ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 39, columnNumber: 13 } }, \"Copy\"),\n  onCopyEnd: () => {},\n  shouldShowText: true,\n  wrapped: true,\n  tooltipText: t('Copy to clipboard') };var _ref = process.env.NODE_ENV === \"production\" ? { name: \"8irbms\", styles: \"display:inline-flex;align-items:center\" } : { name: \"mx2pbj-CopyToClipboard\", styles: \"display:inline-flex;align-items:center;label:CopyToClipboard;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0NvcHlUb0NsaXBib2FyZC9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0dZIiwiZmlsZSI6Ii9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0NvcHlUb0NsaXBib2FyZC9pbmRleC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IHQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgd2l0aFRvYXN0cyBmcm9tICdzcmMvbWVzc2FnZVRvYXN0cy9lbmhhbmNlcnMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgY29weVRleHRUb0NsaXBib2FyZCBmcm9tICdzcmMvdXRpbHMvY29weSc7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgY29weU5vZGU6IFByb3BUeXBlcy5ub2RlLFxuICBnZXRUZXh0OiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Db3B5RW5kOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2hvdWxkU2hvd1RleHQ6IFByb3BUeXBlcy5ib29sLFxuICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICB3cmFwcGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgdG9vbHRpcFRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIGNvcHlOb2RlOiA8c3Bhbj5Db3B5PC9zcGFuPixcbiAgb25Db3B5RW5kOiAoKSA9PiB7fSxcbiAgc2hvdWxkU2hvd1RleHQ6IHRydWUsXG4gIHdyYXBwZWQ6IHRydWUsXG4gIHRvb2x0aXBUZXh0OiB0KCdDb3B5IHRvIGNsaXBib2FyZCcpLFxufTtcblxuY2xhc3MgQ29weVRvQ2xpcGJvYXJkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvLyBiaW5kaW5nc1xuICAgIHRoaXMuY29weVRvQ2xpcGJvYXJkID0gdGhpcy5jb3B5VG9DbGlwYm9hcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xpY2sgPSB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uQ2xpY2soKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZ2V0VGV4dCkge1xuICAgICAgdGhpcy5wcm9wcy5nZXRUZXh0KGQgPT4ge1xuICAgICAgICB0aGlzLmNvcHlUb0NsaXBib2FyZChkKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvcHlUb0NsaXBib2FyZCh0aGlzLnByb3BzLnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGdldERlY29yYXRlZENvcHlOb2RlKCkge1xuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jb3B5Tm9kZSwge1xuICAgICAgc3R5bGU6IHsgY3Vyc29yOiAncG9pbnRlcicgfSxcbiAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGljayxcbiAgICB9KTtcbiAgfVxuXG4gIGNvcHlUb0NsaXBib2FyZCh0ZXh0VG9Db3B5KSB7XG4gICAgY29weVRleHRUb0NsaXBib2FyZCh0ZXh0VG9Db3B5KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdDb3BpZWQgdG8gY2xpcGJvYXJkIScpKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0KFxuICAgICAgICAgIHQoXG4gICAgICAgICAgICAnU29ycnksIHlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGNvcHlpbmcuIFVzZSBDdHJsIC8gQ21kICsgQyEnLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLm9uQ29weUVuZCgpO1xuICAgICAgfSk7XG4gIH1cblxuICByZW5kZXJOb3RXcmFwcGVkKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8VG9vbHRpcFxuICAgICAgICBpZD1cImNvcHktdG8tY2xpcGJvYXJkLXRvb2x0aXBcIlxuICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fVxuICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50b29sdGlwVGV4dH1cbiAgICAgICAgdHJpZ2dlcj17Wydob3ZlciddfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5nZXREZWNvcmF0ZWRDb3B5Tm9kZSgpfVxuICAgICAgPC9Ub29sdGlwPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJMaW5rKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8c3BhbiBjc3M9e3sgZGlzcGxheTogJ2lubGluZS1mbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX0+XG4gICAgICAgIHt0aGlzLnByb3BzLnNob3VsZFNob3dUZXh0ICYmIHRoaXMucHJvcHMudGV4dCAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibS1yLTVcIiBkYXRhLXRlc3Q9XCJzaG9ydC11cmxcIj5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLnRleHR9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgIGlkPVwiY29weS10by1jbGlwYm9hcmQtdG9vbHRpcFwiXG4gICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcbiAgICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50b29sdGlwVGV4dH1cbiAgICAgICAgICB0cmlnZ2VyPXtbJ2hvdmVyJ119XG4gICAgICAgID5cbiAgICAgICAgICB7dGhpcy5nZXREZWNvcmF0ZWRDb3B5Tm9kZSgpfVxuICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICA8L3NwYW4+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHdyYXBwZWQgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKCF3cmFwcGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXJOb3RXcmFwcGVkKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlbmRlckxpbmsoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKENvcHlUb0NsaXBib2FyZCk7XG5cbkNvcHlUb0NsaXBib2FyZC5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5Db3B5VG9DbGlwYm9hcmQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\n\nclass CopyToClipboard extends React.Component {\n  constructor(props) {var _context, _context2;\n    super(props);\n\n    // bindings\n    this.copyToClipboard = _bindInstanceProperty(_context = this.copyToClipboard).call(_context, this);\n    this.onClick = _bindInstanceProperty(_context2 = this.onClick).call(_context2, this);\n  }\n\n  onClick() {\n    if (this.props.getText) {\n      this.props.getText((d) => {\n        this.copyToClipboard(d);\n      });\n    } else {\n      this.copyToClipboard(this.props.text);\n    }\n  }\n\n  getDecoratedCopyNode() {\n    return /*#__PURE__*/React.cloneElement(this.props.copyNode, {\n      style: { cursor: 'pointer' },\n      onClick: this.onClick });\n\n  }\n\n  copyToClipboard(textToCopy) {\n    copyTextToClipboard(textToCopy).\n    then(() => {\n      this.props.addSuccessToast(t('Copied to clipboard!'));\n    }).\n    catch(() => {\n      this.props.addDangerToast(\n      t(\n      'Sorry, your browser does not support copying. Use Ctrl / Cmd + C!'));\n\n\n    }).\n    finally(() => {\n      this.props.onCopyEnd();\n    });\n  }\n\n  renderNotWrapped() {\n    return (\n      ___EmotionJSX(Tooltip, {\n        id: \"copy-to-clipboard-tooltip\",\n        placement: \"top\",\n        style: { cursor: 'pointer' },\n        title: this.props.tooltipText,\n        trigger: ['hover'], __self: this, __source: { fileName: _jsxFileName, lineNumber: 91, columnNumber: 7 } },\n\n      this.getDecoratedCopyNode()));\n\n\n  }\n\n  renderLink() {\n    return (\n      ___EmotionJSX(\"span\", { css: _ref, __self: this, __source: { fileName: _jsxFileName, lineNumber: 105, columnNumber: 7 } },\n      this.props.shouldShowText && this.props.text &&\n      ___EmotionJSX(\"span\", { className: \"m-r-5\", \"data-test\": \"short-url\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 107, columnNumber: 11 } },\n      this.props.text),\n\n\n      ___EmotionJSX(Tooltip, {\n        id: \"copy-to-clipboard-tooltip\",\n        placement: \"top\",\n        title: this.props.tooltipText,\n        trigger: ['hover'], __self: this, __source: { fileName: _jsxFileName, lineNumber: 111, columnNumber: 9 } },\n\n      this.getDecoratedCopyNode())));\n\n\n\n  }\n\n  render() {\n    const { wrapped } = this.props;\n    if (!wrapped) {\n      return this.renderNotWrapped();\n    }\n    return this.renderLink();\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}const _default =\nwithToasts(CopyToClipboard);export default _default;\n\nCopyToClipboard.propTypes = propTypes;\nCopyToClipboard.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx\");reactHotLoader.register(CopyToClipboard, \"CopyToClipboard\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/components/CopyToClipboard/index.jsx"],"names":["React","PropTypes","t","Tooltip","withToasts","copyTextToClipboard","propTypes","copyNode","node","getText","func","onCopyEnd","shouldShowText","bool","text","string","wrapped","tooltipText","addDangerToast","isRequired","addSuccessToast","defaultProps","CopyToClipboard","Component","constructor","props","copyToClipboard","onClick","d","getDecoratedCopyNode","cloneElement","style","cursor","textToCopy","then","catch","finally","renderNotWrapped","renderLink","render"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';\nimport copyTextToClipboard from 'src/utils/copy';\n\nconst propTypes = {\n  copyNode: PropTypes.node,\n  getText: PropTypes.func,\n  onCopyEnd: PropTypes.func,\n  shouldShowText: PropTypes.bool,\n  text: PropTypes.string,\n  wrapped: PropTypes.bool,\n  tooltipText: PropTypes.string,\n  addDangerToast: PropTypes.func.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  copyNode: <span>Copy</span>,\n  onCopyEnd: () => {},\n  shouldShowText: true,\n  wrapped: true,\n  tooltipText: t('Copy to clipboard'),\n};\n\nclass CopyToClipboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // bindings\n    this.copyToClipboard = this.copyToClipboard.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    if (this.props.getText) {\n      this.props.getText(d => {\n        this.copyToClipboard(d);\n      });\n    } else {\n      this.copyToClipboard(this.props.text);\n    }\n  }\n\n  getDecoratedCopyNode() {\n    return React.cloneElement(this.props.copyNode, {\n      style: { cursor: 'pointer' },\n      onClick: this.onClick,\n    });\n  }\n\n  copyToClipboard(textToCopy) {\n    copyTextToClipboard(textToCopy)\n      .then(() => {\n        this.props.addSuccessToast(t('Copied to clipboard!'));\n      })\n      .catch(() => {\n        this.props.addDangerToast(\n          t(\n            'Sorry, your browser does not support copying. Use Ctrl / Cmd + C!',\n          ),\n        );\n      })\n      .finally(() => {\n        this.props.onCopyEnd();\n      });\n  }\n\n  renderNotWrapped() {\n    return (\n      <Tooltip\n        id=\"copy-to-clipboard-tooltip\"\n        placement=\"top\"\n        style={{ cursor: 'pointer' }}\n        title={this.props.tooltipText}\n        trigger={['hover']}\n      >\n        {this.getDecoratedCopyNode()}\n      </Tooltip>\n    );\n  }\n\n  renderLink() {\n    return (\n      <span css={{ display: 'inline-flex', alignItems: 'center' }}>\n        {this.props.shouldShowText && this.props.text && (\n          <span className=\"m-r-5\" data-test=\"short-url\">\n            {this.props.text}\n          </span>\n        )}\n        <Tooltip\n          id=\"copy-to-clipboard-tooltip\"\n          placement=\"top\"\n          title={this.props.tooltipText}\n          trigger={['hover']}\n        >\n          {this.getDecoratedCopyNode()}\n        </Tooltip>\n      </span>\n    );\n  }\n\n  render() {\n    const { wrapped } = this.props;\n    if (!wrapped) {\n      return this.renderNotWrapped();\n    }\n    return this.renderLink();\n  }\n}\n\nexport default withToasts(CopyToClipboard);\n\nCopyToClipboard.propTypes = propTypes;\nCopyToClipboard.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}