{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _sortInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/sort\";import _findInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _flatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/flat\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\",_context,_context2,_context3;(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef } from 'react';\nimport moment from 'moment-timezone';\nimport { NativeGraySelect as Select } from 'src/components/Select';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DEFAULT_TIMEZONE = 'GMT Standard Time';\nconst MIN_SELECT_WIDTH = '375px';\nconst offsetsToName = {\n  '-300-240': ['Eastern Standard Time', 'Eastern Daylight Time'],\n  '-360-300': ['Central Standard Time', 'Central Daylight Time'],\n  '-420-360': ['Mountain Standard Time', 'Mountain Daylight Time'],\n  '-420-420': [\n  'Mountain Standard Time - Phoenix',\n  'Mountain Standard Time - Phoenix'],\n\n  '-480-420': ['Pacific Standard Time', 'Pacific Daylight Time'],\n  '-540-480': ['Alaska Standard Time', 'Alaska Daylight Time'],\n  '-600-600': ['Hawaii Standard Time', 'Hawaii Daylight Time'],\n  '60120': ['Central European Time', 'Central European Daylight Time'],\n  '00': [DEFAULT_TIMEZONE, DEFAULT_TIMEZONE],\n  '060': ['GMT Standard Time - London', 'British Summer Time'] };\n\nconst currentDate = moment();\nconst JANUARY = moment([2021, 1]);\nconst JULY = moment([2021, 7]);\nconst getOffsetKey = (name) => JANUARY.tz(name).utcOffset().toString() +\nJULY.tz(name).utcOffset().toString();\nconst getTimezoneName = (name) => {var _offsetsToName$offset, _offsetsToName$offset2;\n  const offsets = getOffsetKey(name);\n  return (currentDate.tz(name).isDST() ? (_offsetsToName$offset =\n  offsetsToName[offsets]) == null ? void 0 : _offsetsToName$offset[1] : (_offsetsToName$offset2 =\n  offsetsToName[offsets]) == null ? void 0 : _offsetsToName$offset2[0]) || name;\n};\nconst ALL_ZONES = _flatInstanceProperty(_context = _mapInstanceProperty(_context2 = moment.tz.\ncountries()).call(_context2,\n(country) => moment.tz.zonesForCountry(country, true))).call(_context);\n\nconst TIMEZONES = [];\n_forEachInstanceProperty(ALL_ZONES).call(ALL_ZONES, (zone) => {\n  if (!_findInstanceProperty(TIMEZONES).call(TIMEZONES, (option) => getOffsetKey(option.name) === getOffsetKey(zone.name))) {\n    TIMEZONES.push(zone); // dedupe zones by offsets\n  }\n});\nconst TIMEZONE_OPTIONS = _mapInstanceProperty(_context3 = _sortInstanceProperty(TIMEZONES).call(TIMEZONES,\n// sort by offset\n(a, b) => moment.tz(currentDate, a.name).utcOffset() -\nmoment.tz(currentDate, b.name).utcOffset())).call(_context3, (zone) => ({\n  label: `GMT ${moment.\n  tz(currentDate, zone.name).\n  format('Z')} (${getTimezoneName(zone.name)})`,\n  value: zone.name,\n  offsets: getOffsetKey(zone.name) }));\n\nconst timezoneOptions = _mapInstanceProperty(TIMEZONE_OPTIONS).call(TIMEZONE_OPTIONS, (option) => ___EmotionJSX(Select.Option, { key: option.value, value: option.value, __self: this, __source: { fileName: _jsxFileName, lineNumber: 70, columnNumber: 57 } },\noption.label));\n\nconst TimezoneSelector = ({ onTimezoneChange, timezone }) => {\n  const prevTimezone = useRef(timezone);\n  const matchTimezoneToOptions = (timezone) => {var _TIMEZONE_OPTIONS$fin;return ((_TIMEZONE_OPTIONS$fin = _findInstanceProperty(TIMEZONE_OPTIONS).call(TIMEZONE_OPTIONS, (option) => option.offsets === getOffsetKey(timezone))) == null ? void 0 : _TIMEZONE_OPTIONS$fin.\n    value) || DEFAULT_TIMEZONE;};\n  const updateTimezone = (tz) => {\n    // update the ref to track changes\n    prevTimezone.current = tz;\n    // the parent component contains the state for the value\n    onTimezoneChange(tz);\n  };\n  useEffect(() => {\n    const updatedTz = matchTimezoneToOptions(timezone || moment.tz.guess());\n    if (prevTimezone.current !== updatedTz) {\n      updateTimezone(updatedTz);\n    }\n  }, [timezone]);\n  return ___EmotionJSX(Select, { css: /*#__PURE__*/_css({ minWidth: MIN_SELECT_WIDTH }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:TimezoneSelector;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mcmFua2hlL3Byb2plY3RzL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL1RpbWV6b25lU2VsZWN0b3IvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdGb0IiLCJmaWxlIjoiL1VzZXJzL2ZyYW5raGUvcHJvamVjdHMvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvVGltZXpvbmVTZWxlY3Rvci9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC10aW1lem9uZSc7XG5pbXBvcnQgeyBOYXRpdmVHcmF5U2VsZWN0IGFzIFNlbGVjdCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1NlbGVjdCc7XG5jb25zdCBERUZBVUxUX1RJTUVaT05FID0gJ0dNVCBTdGFuZGFyZCBUaW1lJztcbmNvbnN0IE1JTl9TRUxFQ1RfV0lEVEggPSAnMzc1cHgnO1xuY29uc3Qgb2Zmc2V0c1RvTmFtZSA9IHtcbiAgICAnLTMwMC0yNDAnOiBbJ0Vhc3Rlcm4gU3RhbmRhcmQgVGltZScsICdFYXN0ZXJuIERheWxpZ2h0IFRpbWUnXSxcbiAgICAnLTM2MC0zMDAnOiBbJ0NlbnRyYWwgU3RhbmRhcmQgVGltZScsICdDZW50cmFsIERheWxpZ2h0IFRpbWUnXSxcbiAgICAnLTQyMC0zNjAnOiBbJ01vdW50YWluIFN0YW5kYXJkIFRpbWUnLCAnTW91bnRhaW4gRGF5bGlnaHQgVGltZSddLFxuICAgICctNDIwLTQyMCc6IFtcbiAgICAgICAgJ01vdW50YWluIFN0YW5kYXJkIFRpbWUgLSBQaG9lbml4JyxcbiAgICAgICAgJ01vdW50YWluIFN0YW5kYXJkIFRpbWUgLSBQaG9lbml4JyxcbiAgICBdLFxuICAgICctNDgwLTQyMCc6IFsnUGFjaWZpYyBTdGFuZGFyZCBUaW1lJywgJ1BhY2lmaWMgRGF5bGlnaHQgVGltZSddLFxuICAgICctNTQwLTQ4MCc6IFsnQWxhc2thIFN0YW5kYXJkIFRpbWUnLCAnQWxhc2thIERheWxpZ2h0IFRpbWUnXSxcbiAgICAnLTYwMC02MDAnOiBbJ0hhd2FpaSBTdGFuZGFyZCBUaW1lJywgJ0hhd2FpaSBEYXlsaWdodCBUaW1lJ10sXG4gICAgJzYwMTIwJzogWydDZW50cmFsIEV1cm9wZWFuIFRpbWUnLCAnQ2VudHJhbCBFdXJvcGVhbiBEYXlsaWdodCBUaW1lJ10sXG4gICAgJzAwJzogW0RFRkFVTFRfVElNRVpPTkUsIERFRkFVTFRfVElNRVpPTkVdLFxuICAgICcwNjAnOiBbJ0dNVCBTdGFuZGFyZCBUaW1lIC0gTG9uZG9uJywgJ0JyaXRpc2ggU3VtbWVyIFRpbWUnXSxcbn07XG5jb25zdCBjdXJyZW50RGF0ZSA9IG1vbWVudCgpO1xuY29uc3QgSkFOVUFSWSA9IG1vbWVudChbMjAyMSwgMV0pO1xuY29uc3QgSlVMWSA9IG1vbWVudChbMjAyMSwgN10pO1xuY29uc3QgZ2V0T2Zmc2V0S2V5ID0gKG5hbWUpID0+IEpBTlVBUlkudHoobmFtZSkudXRjT2Zmc2V0KCkudG9TdHJpbmcoKSArXG4gICAgSlVMWS50eihuYW1lKS51dGNPZmZzZXQoKS50b1N0cmluZygpO1xuY29uc3QgZ2V0VGltZXpvbmVOYW1lID0gKG5hbWUpID0+IHtcbiAgICBjb25zdCBvZmZzZXRzID0gZ2V0T2Zmc2V0S2V5KG5hbWUpO1xuICAgIHJldHVybiAoKGN1cnJlbnREYXRlLnR6KG5hbWUpLmlzRFNUKClcbiAgICAgICAgPyBvZmZzZXRzVG9OYW1lW29mZnNldHNdPy5bMV1cbiAgICAgICAgOiBvZmZzZXRzVG9OYW1lW29mZnNldHNdPy5bMF0pIHx8IG5hbWUpO1xufTtcbmNvbnN0IEFMTF9aT05FUyA9IG1vbWVudC50elxuICAgIC5jb3VudHJpZXMoKVxuICAgIC5tYXAoY291bnRyeSA9PiBtb21lbnQudHouem9uZXNGb3JDb3VudHJ5KGNvdW50cnksIHRydWUpKVxuICAgIC5mbGF0KCk7XG5jb25zdCBUSU1FWk9ORVMgPSBbXTtcbkFMTF9aT05FUy5mb3JFYWNoKHpvbmUgPT4ge1xuICAgIGlmICghVElNRVpPTkVTLmZpbmQob3B0aW9uID0+IGdldE9mZnNldEtleShvcHRpb24ubmFtZSkgPT09IGdldE9mZnNldEtleSh6b25lLm5hbWUpKSkge1xuICAgICAgICBUSU1FWk9ORVMucHVzaCh6b25lKTsgLy8gZGVkdXBlIHpvbmVzIGJ5IG9mZnNldHNcbiAgICB9XG59KTtcbmNvbnN0IFRJTUVaT05FX09QVElPTlMgPSBUSU1FWk9ORVMuc29ydChcbi8vIHNvcnQgYnkgb2Zmc2V0XG4oYSwgYikgPT4gbW9tZW50LnR6KGN1cnJlbnREYXRlLCBhLm5hbWUpLnV0Y09mZnNldCgpIC1cbiAgICBtb21lbnQudHooY3VycmVudERhdGUsIGIubmFtZSkudXRjT2Zmc2V0KCkpLm1hcCh6b25lID0+ICh7XG4gICAgbGFiZWw6IGBHTVQgJHttb21lbnRcbiAgICAgICAgLnR6KGN1cnJlbnREYXRlLCB6b25lLm5hbWUpXG4gICAgICAgIC5mb3JtYXQoJ1onKX0gKCR7Z2V0VGltZXpvbmVOYW1lKHpvbmUubmFtZSl9KWAsXG4gICAgdmFsdWU6IHpvbmUubmFtZSxcbiAgICBvZmZzZXRzOiBnZXRPZmZzZXRLZXkoem9uZS5uYW1lKSxcbn0pKTtcbmNvbnN0IHRpbWV6b25lT3B0aW9ucyA9IFRJTUVaT05FX09QVElPTlMubWFwKG9wdGlvbiA9PiAoPFNlbGVjdC5PcHRpb24ga2V5PXtvcHRpb24udmFsdWV9IHZhbHVlPXtvcHRpb24udmFsdWV9PlxuICAgIHtvcHRpb24ubGFiZWx9XG4gIDwvU2VsZWN0Lk9wdGlvbj4pKTtcbmNvbnN0IFRpbWV6b25lU2VsZWN0b3IgPSAoeyBvblRpbWV6b25lQ2hhbmdlLCB0aW1lem9uZSB9KSA9PiB7XG4gICAgY29uc3QgcHJldlRpbWV6b25lID0gdXNlUmVmKHRpbWV6b25lKTtcbiAgICBjb25zdCBtYXRjaFRpbWV6b25lVG9PcHRpb25zID0gKHRpbWV6b25lKSA9PiBUSU1FWk9ORV9PUFRJT05TLmZpbmQob3B0aW9uID0+IG9wdGlvbi5vZmZzZXRzID09PSBnZXRPZmZzZXRLZXkodGltZXpvbmUpKVxuICAgICAgICA/LnZhbHVlIHx8IERFRkFVTFRfVElNRVpPTkU7XG4gICAgY29uc3QgdXBkYXRlVGltZXpvbmUgPSAodHopID0+IHtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSByZWYgdG8gdHJhY2sgY2hhbmdlc1xuICAgICAgICBwcmV2VGltZXpvbmUuY3VycmVudCA9IHR6O1xuICAgICAgICAvLyB0aGUgcGFyZW50IGNvbXBvbmVudCBjb250YWlucyB0aGUgc3RhdGUgZm9yIHRoZSB2YWx1ZVxuICAgICAgICBvblRpbWV6b25lQ2hhbmdlKHR6KTtcbiAgICB9O1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRUeiA9IG1hdGNoVGltZXpvbmVUb09wdGlvbnModGltZXpvbmUgfHwgbW9tZW50LnR6Lmd1ZXNzKCkpO1xuICAgICAgICBpZiAocHJldlRpbWV6b25lLmN1cnJlbnQgIT09IHVwZGF0ZWRUeikge1xuICAgICAgICAgICAgdXBkYXRlVGltZXpvbmUodXBkYXRlZFR6KTtcbiAgICAgICAgfVxuICAgIH0sIFt0aW1lem9uZV0pO1xuICAgIHJldHVybiAoPFNlbGVjdCBjc3M9e3sgbWluV2lkdGg6IE1JTl9TRUxFQ1RfV0lEVEggfX0gLy8gc21hbGxlc3Qgc2l6ZSBmb3IgY3VycmVudCB2YWx1ZXNcbiAgICAgb25DaGFuZ2U9e29uVGltZXpvbmVDaGFuZ2V9IHZhbHVlPXt0aW1lem9uZSB8fCBERUZBVUxUX1RJTUVaT05FfT5cbiAgICAgIHt0aW1lem9uZU9wdGlvbnN9XG4gICAgPC9TZWxlY3Q+KTtcbn07XG5leHBvcnQgZGVmYXVsdCBUaW1lem9uZVNlbGVjdG9yO1xuIl19 */\") // smallest size for current values\n    , onChange: onTimezoneChange, value: timezone || DEFAULT_TIMEZONE, __self: this, __source: { fileName: _jsxFileName, lineNumber: 89, columnNumber: 13 } },\n  timezoneOptions);\n\n};__signature__(TimezoneSelector, \"useRef{prevTimezone}\\nuseEffect{}\");const _default =\nTimezoneSelector;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_TIMEZONE, \"DEFAULT_TIMEZONE\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(MIN_SELECT_WIDTH, \"MIN_SELECT_WIDTH\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(offsetsToName, \"offsetsToName\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(currentDate, \"currentDate\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(JANUARY, \"JANUARY\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(JULY, \"JULY\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(getOffsetKey, \"getOffsetKey\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(getTimezoneName, \"getTimezoneName\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(ALL_ZONES, \"ALL_ZONES\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(TIMEZONES, \"TIMEZONES\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(TIMEZONE_OPTIONS, \"TIMEZONE_OPTIONS\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(timezoneOptions, \"timezoneOptions\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(TimezoneSelector, \"TimezoneSelector\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/components/TimezoneSelector/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport moment from 'moment-timezone';\n\nimport { NativeGraySelect as Select } from 'src/components/Select';\n\nconst DEFAULT_TIMEZONE = 'GMT Standard Time';\nconst MIN_SELECT_WIDTH = '375px';\n\nconst offsetsToName = {\n  '-300-240': ['Eastern Standard Time', 'Eastern Daylight Time'],\n  '-360-300': ['Central Standard Time', 'Central Daylight Time'],\n  '-420-360': ['Mountain Standard Time', 'Mountain Daylight Time'],\n  '-420-420': [\n    'Mountain Standard Time - Phoenix',\n    'Mountain Standard Time - Phoenix',\n  ],\n  '-480-420': ['Pacific Standard Time', 'Pacific Daylight Time'],\n  '-540-480': ['Alaska Standard Time', 'Alaska Daylight Time'],\n  '-600-600': ['Hawaii Standard Time', 'Hawaii Daylight Time'],\n  '60120': ['Central European Time', 'Central European Daylight Time'],\n  '00': [DEFAULT_TIMEZONE, DEFAULT_TIMEZONE],\n  '060': ['GMT Standard Time - London', 'British Summer Time'],\n};\n\nconst currentDate = moment();\nconst JANUARY = moment([2021, 1]);\nconst JULY = moment([2021, 7]);\n\nconst getOffsetKey = (name: string) =>\n  JANUARY.tz(name).utcOffset().toString() +\n  JULY.tz(name).utcOffset().toString();\n\nconst getTimezoneName = (name: string) => {\n  const offsets = getOffsetKey(name);\n  return (\n    (currentDate.tz(name).isDST()\n      ? offsetsToName[offsets]?.[1]\n      : offsetsToName[offsets]?.[0]) || name\n  );\n};\n\nexport interface TimezoneProps {\n  onTimezoneChange: (value: string) => void;\n  timezone?: string | null;\n}\n\nconst ALL_ZONES = moment.tz\n  .countries()\n  .map(country => moment.tz.zonesForCountry(country, true))\n  .flat();\n\nconst TIMEZONES: moment.MomentZoneOffset[] = [];\nALL_ZONES.forEach(zone => {\n  if (\n    !TIMEZONES.find(\n      option => getOffsetKey(option.name) === getOffsetKey(zone.name),\n    )\n  ) {\n    TIMEZONES.push(zone); // dedupe zones by offsets\n  }\n});\n\nconst TIMEZONE_OPTIONS = TIMEZONES.sort(\n  // sort by offset\n  (a, b) =>\n    moment.tz(currentDate, a.name).utcOffset() -\n    moment.tz(currentDate, b.name).utcOffset(),\n).map(zone => ({\n  label: `GMT ${moment\n    .tz(currentDate, zone.name)\n    .format('Z')} (${getTimezoneName(zone.name)})`,\n  value: zone.name,\n  offsets: getOffsetKey(zone.name),\n}));\n\nconst timezoneOptions = TIMEZONE_OPTIONS.map(option => (\n  <Select.Option key={option.value} value={option.value}>\n    {option.label}\n  </Select.Option>\n));\n\nconst TimezoneSelector = ({ onTimezoneChange, timezone }: TimezoneProps) => {\n  const prevTimezone = useRef(timezone);\n  const matchTimezoneToOptions = (timezone: string) =>\n    TIMEZONE_OPTIONS.find(option => option.offsets === getOffsetKey(timezone))\n      ?.value || DEFAULT_TIMEZONE;\n\n  const updateTimezone = (tz: string) => {\n    // update the ref to track changes\n    prevTimezone.current = tz;\n    // the parent component contains the state for the value\n    onTimezoneChange(tz);\n  };\n\n  useEffect(() => {\n    const updatedTz = matchTimezoneToOptions(timezone || moment.tz.guess());\n    if (prevTimezone.current !== updatedTz) {\n      updateTimezone(updatedTz);\n    }\n  }, [timezone]);\n\n  return (\n    <Select\n      css={{ minWidth: MIN_SELECT_WIDTH }} // smallest size for current values\n      onChange={onTimezoneChange}\n      value={timezone || DEFAULT_TIMEZONE}\n    >\n      {timezoneOptions}\n    </Select>\n  );\n};\n\nexport default TimezoneSelector;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}