{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";import _trimInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/trim\";import _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _sortInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/sort\";import _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _queueMicrotask from \"@babel/runtime-corejs3/core-js-stable/queue-microtask\";import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _indexOfInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/index-of\";import _Set from \"@babel/runtime-corejs3/core-js-stable/set\";var _jsxFileName = \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport Fuse from 'fuse.js';\nimport cx from 'classnames';\nimport { t, styled, css, useTheme } from '@superset-ui/core';\nimport { Collapse, Input } from 'src/common/components';\nimport Label from 'src/components/Label';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport Icons from 'src/components/Icons';\nimport { nativeFilterGate } from 'src/dashboard/components/nativeFilters/utils';\nimport scrollIntoView from 'scroll-into-view-if-needed';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DEFAULT_ORDER = [\n'line',\n'big_number',\n'table',\n'filter_box',\n'dist_bar',\n'area',\n'bar',\n'deck_polygon',\n'pie',\n'time_table',\n'pivot_table_v2',\n'histogram',\n'big_number_total',\n'deck_scatter',\n'deck_hex',\n'time_pivot',\n'deck_arc',\n'heatmap',\n'deck_grid',\n'dual_line',\n'deck_screengrid',\n'line_multi',\n'treemap',\n'box_plot',\n'sunburst',\n'sankey',\n'word_cloud',\n'mapbox',\n'kepler',\n'cal_heatmap',\n'rose',\n'bubble',\n'deck_geojson',\n'horizon',\n'deck_multi',\n'compare',\n'partition',\n'event_flow',\n'deck_path',\n'graph_chart',\n'world_map',\n'paired_ttest',\n'para',\n'country_map'];\n\nconst typesWithDefaultOrder = new _Set(DEFAULT_ORDER);\nconst THUMBNAIL_GRID_UNITS = 24;\nexport const MAX_ADVISABLE_VIZ_GALLERY_WIDTH = 1090;\nconst OTHER_CATEGORY = t('Other');\nconst ALL_CHARTS = t('All charts');\nconst RECOMMENDED_TAGS = [\nt('Highly-used'),\nt('ECharts'),\nt('Advanced-Analytics')];\n\nexport const VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\nconst VizPickerLayout = styled.div`\n  display: grid;\n  grid-template-rows: auto minmax(100px, 1fr) minmax(200px, 35%);\n  // em is used here because the sidebar should be sized to fit the longest standard tag\n  grid-template-columns: minmax(14em, auto) 5fr;\n  grid-template-areas:\n    'sidebar search'\n    'sidebar main'\n    'details details';\n  height: 70vh;\n  overflow: auto;\n`;\nconst SectionTitle = styled.h3`\n  margin-top: 0;\n  margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  font-size: ${({ theme }) => theme.typography.sizes.l}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  line-height: ${({ theme }) => theme.gridUnit * 6}px;\n`;\nconst LeftPane = styled.div`\n  grid-area: sidebar;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  overflow: auto;\n\n  .ant-collapse .ant-collapse-item {\n    .ant-collapse-header {\n      font-size: ${({ theme }) => theme.typography.sizes.s}px;\n      color: ${({ theme }) => theme.colors.grayscale.base};\n      padding-left: ${({ theme }) => theme.gridUnit * 2}px;\n      padding-bottom: ${({ theme }) => theme.gridUnit}px;\n    }\n    .ant-collapse-content .ant-collapse-content-box {\n      display: flex;\n      flex-direction: column;\n      padding: 0 ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\nconst RightPane = styled.div`\n  grid-area: main;\n  overflow-y: auto;\n`;\nconst SearchWrapper = styled.div`\n  ${({ theme }) => `\n    grid-area: search;\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-bottom: ${theme.gridUnit}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    margin-right: ${theme.gridUnit * 3}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${theme.gridUnit * 2}px;\n    }\n  `}\n`;\n/** Styles to line up prefix/suffix icons in the search input */\nconst InputIconAlignment = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\nconst SelectorLabel = styled.button`\n  ${({ theme }) => `\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${theme.gridUnit}px 0;\n    padding: 0 ${theme.gridUnit}px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${theme.colors.primary.dark1};\n      color: ${theme.colors.primary.light5};\n\n      svg {\n        color: ${theme.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${theme.gridUnit * 1.5}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}\n`;\nconst IconsPane = styled.div`\n  overflow: auto;\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    ${({ theme }) => theme.gridUnit * THUMBNAIL_GRID_UNITS}px\n  );\n  grid-auto-rows: max-content;\n  justify-content: space-evenly;\n  grid-gap: ${({ theme }) => theme.gridUnit * 2}px;\n  justify-items: center;\n  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n`;\nconst DetailsPane = (theme) => css`\n  grid-area: details;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n`;\nconst DetailsPopulated = (theme) => css`\n  padding: ${theme.gridUnit * 4}px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto auto 1fr;\n  grid-template-areas:\n    'viz-name examples-header'\n    'viz-tags examples'\n    'description examples';\n`;\nconst DetailsEmpty = (theme) => css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  font-style: italic;\n  color: ${theme.colors.grayscale.light1};\n`;\n// overflow hidden on the details pane and overflow auto on the description\n// (plus grid layout) enables the description to scroll while the header stays in place.\nconst TagsWrapper = styled.div`\n  grid-area: viz-tags;\n  width: ${({ theme }) => theme.gridUnit * 120}px;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n`;\nconst Description = styled.p`\n  grid-area: description;\n  overflow: auto;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  margin: 0;\n`;\nconst Examples = styled.div`\n  grid-area: examples;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: auto;\n  gap: ${({ theme }) => theme.gridUnit * 4}px;\n\n  img {\n    height: 100%;\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\nconst thumbnailContainerCss = (theme) => css`\n  cursor: pointer;\n  width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n\n  img {\n    min-width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    min-height: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    transition: border-color ${theme.transitionTiming};\n  }\n\n  &.selected img {\n    border: 2px solid ${theme.colors.primary.light2};\n  }\n\n  &:hover:not(.selected) img {\n    border: 1px solid ${theme.colors.grayscale.light1};\n  }\n\n  .viztype-label {\n    margin-top: ${theme.gridUnit * 2}px;\n    text-align: center;\n  }\n`;\nfunction vizSortFactor(entry) {\n  if (typesWithDefaultOrder.has(entry.key)) {\n    return _indexOfInstanceProperty(DEFAULT_ORDER).call(DEFAULT_ORDER, entry.key);\n  }\n  return DEFAULT_ORDER.length;\n}\nconst Thumbnail = ({ entry, selectedViz, setSelectedViz }) => {\n  const theme = useTheme();\n  const { key, value: type } = entry;\n  const isSelected = selectedViz === entry.key;\n  return ___EmotionJSX(\"div\", { role: \"button\"\n    // using css instead of a styled component to preserve\n    // the data-test attribute\n    , css: thumbnailContainerCss(theme), tabIndex: 0, className: isSelected ? 'selected' : '', onClick: () => setSelectedViz(key), \"data-test\": \"viztype-selector-container\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 291, columnNumber: 13 } },\n  ___EmotionJSX(\"img\", { alt: type.name, width: \"100%\", className: `viztype-selector ${isSelected ? 'selected' : ''}`, src: type.thumbnail, __self: this, __source: { fileName: _jsxFileName, lineNumber: 295, columnNumber: 7 } }),\n  ___EmotionJSX(\"div\", { className: \"viztype-label\", \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__viztype-label`, __self: this, __source: { fileName: _jsxFileName, lineNumber: 296, columnNumber: 7 } },\n  type.name));\n\n\n};\n/** A list of viz thumbnails, used within the viz picker modal */__signature__(Thumbnail, \"useTheme{theme}\", () => [useTheme]);\nconst ThumbnailGallery = ({ vizEntries, ...props }) => ___EmotionJSX(IconsPane, { \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__viz-row`, __self: this, __source: { fileName: _jsxFileName, lineNumber: 302, columnNumber: 57 } },\n_mapInstanceProperty(vizEntries).call(vizEntries, (entry) => ___EmotionJSX(Thumbnail, _extends({ key: entry.key }, props, { entry: entry, __self: this, __source: { fileName: _jsxFileName, lineNumber: 303, columnNumber: 31 } }))));\n\nconst Selector = ({ selector, icon, isSelected, onClick, className }) => {\n  const btnRef = useRef(null);\n  // see Element.scrollIntoViewIfNeeded()\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded\n  useEffect(() => {\n    if (isSelected) {\n      // We need to wait for the modal to open and then scroll, so we put it in the microtask queue\n      _queueMicrotask(() => scrollIntoView(btnRef.current, {\n        behavior: 'smooth',\n        scrollMode: 'if-needed' }));\n\n    }\n  }, []);\n  return ___EmotionJSX(SelectorLabel, { ref: btnRef, key: selector, name: selector, className: cx(className, isSelected && 'selected'), onClick: () => onClick(selector), __self: this, __source: { fileName: _jsxFileName, lineNumber: 318, columnNumber: 13 } },\n  icon,\n  selector);\n\n};__signature__(Selector, \"useRef{btnRef}\\nuseEffect{}\");\nconst doesVizMatchSelector = (viz, selector) => {var _context;return selector === viz.category ||\n  selector === OTHER_CATEGORY && viz.category == null ||\n  _indexOfInstanceProperty(_context = viz.tags || []).call(_context, selector) > -1;};\nexport default function VizTypeGallery(props) {var _context8, _context10, _selectedVizMetadata$, _context11;\n  const { selectedViz, onChange, className } = props;\n  const { mountedPluginMetadata } = usePluginContext();\n  const searchInputRef = useRef();\n  const [searchInputValue, setSearchInputValue] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(true);\n  const isActivelySearching = isSearchFocused && !!searchInputValue;\n  const selectedVizMetadata = selectedViz ?\n  mountedPluginMetadata[selectedViz] :\n  null;\n  const chartMetadata = useMemo(() => {var _context2, _context3;\n    const result = _filterInstanceProperty(_context2 = _mapInstanceProperty(_context3 = _Object$entries(mountedPluginMetadata)).call(_context3,\n    ([key, value]) => ({ key, value }))).call(_context2,\n    ({ value }) => nativeFilterGate(value.behaviors || []) && !value.deprecated);\n    _sortInstanceProperty(result).call(result, (a, b) => vizSortFactor(a) - vizSortFactor(b));\n    return result;\n  }, [mountedPluginMetadata]);\n  const chartsByCategory = useMemo(() => {\n    const result = {};\n    _forEachInstanceProperty(chartMetadata).call(chartMetadata, (entry) => {\n      const category = entry.value.category || OTHER_CATEGORY;\n      if (!result[category]) {\n        result[category] = [];\n      }\n      result[category].push(entry);\n    });\n    return result;\n  }, [chartMetadata]);\n  const categories = useMemo(() => {var _context4;return _sortInstanceProperty(_context4 = _Object$keys(chartsByCategory)).call(_context4, (a, b) => {\n      // make sure Other goes at the end\n      if (a === OTHER_CATEGORY)\n      return 1;\n      if (b === OTHER_CATEGORY)\n      return -1;\n      // sort alphabetically\n      return a.localeCompare(b);\n    });}, [chartsByCategory]);\n  const chartsByTags = useMemo(() => {\n    const result = {};\n    _forEachInstanceProperty(chartMetadata).call(chartMetadata, (entry) => {\n      const tags = entry.value.tags || [];\n      _forEachInstanceProperty(tags).call(tags, (tag) => {\n        if (!result[tag]) {\n          result[tag] = [];\n        }\n        result[tag].push(entry);\n      });\n    });\n    return result;\n  }, [chartMetadata]);\n  const tags = useMemo(() => {var _context5, _context6;return _filterInstanceProperty(_context5 = _sortInstanceProperty(_context6 = _Object$keys(chartsByTags)).call(_context6,\n    (a, b) =>\n    // sort alphabetically\n    a.localeCompare(b))).call(_context5,\n    (tag) => _indexOfInstanceProperty(RECOMMENDED_TAGS).call(RECOMMENDED_TAGS, tag) === -1);}, [chartsByTags]);\n  const sortedMetadata = useMemo(() => _sortInstanceProperty(chartMetadata).call(chartMetadata, (a, b) => a.key.localeCompare(b.key)), [chartMetadata]);\n  const [activeSelector, setActiveSelector] = useState(() => (selectedVizMetadata == null ? void 0 : selectedVizMetadata.category) || RECOMMENDED_TAGS[0]);\n  // get a fuse instance for fuzzy search\n  const fuse = useMemo(() => new Fuse(chartMetadata, {\n    ignoreLocation: true,\n    threshold: 0.3,\n    keys: ['value.name', 'value.tags', 'value.description'] }),\n  [chartMetadata]);\n  const searchResults = useMemo(() => {var _context7;\n    if (_trimInstanceProperty(searchInputValue).call(searchInputValue) === '') {\n      return [];\n    }\n    return _mapInstanceProperty(_context7 = fuse.search(searchInputValue)).call(_context7, (result) => result.item);\n  }, [searchInputValue, fuse]);\n  const focusSearch = useCallback(() => {\n    // \"start searching\" is actually a two-stage process.\n    // When you first click on the search bar, the input is focused and nothing else happens.\n    // Once you begin typing, the selected category is cleared and the displayed viz entries change.\n    setIsSearchFocused(true);\n  }, []);\n  const changeSearch = useCallback((event) => setSearchInputValue(event.target.value), []);\n  const stopSearching = useCallback(() => {\n    // stopping a search takes you back to the category you were looking at before.\n    // Unlike focusSearch, this is a simple one-step process.\n    setIsSearchFocused(false);\n    setSearchInputValue('');\n    searchInputRef.current.blur();\n  }, []);\n  const clickSelector = useCallback((key) => {\n    if (isSearchFocused) {\n      stopSearching();\n    }\n    setActiveSelector(key);\n    // clear the selected viz if it is not present in the new category or tags\n    const isSelectedVizCompatible = selectedVizMetadata && doesVizMatchSelector(selectedVizMetadata, key);\n    if (key !== activeSelector && !isSelectedVizCompatible) {\n      onChange(null);\n    }\n  }, [\n  stopSearching,\n  isSearchFocused,\n  activeSelector,\n  selectedVizMetadata,\n  onChange]);\n\n  const sectionMap = useMemo(() => ({\n    RECOMMENDED_TAGS: {\n      title: t('Recommended tags'),\n      icon: ___EmotionJSX(Icons.Tags, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 429, columnNumber: 19 } }),\n      selectors: RECOMMENDED_TAGS },\n\n    CATEGORY: {\n      title: t('Category'),\n      icon: ___EmotionJSX(Icons.Category, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 434, columnNumber: 19 } }),\n      selectors: categories },\n\n    TAGS: {\n      title: t('Tags'),\n      icon: ___EmotionJSX(Icons.Tags, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 439, columnNumber: 19 } }),\n      selectors: tags } }),\n\n  [categories, tags]);\n  const vizEntriesToDisplay = isActivelySearching ?\n  searchResults :\n  activeSelector === ALL_CHARTS ?\n  sortedMetadata :\n  chartsByCategory[activeSelector] || chartsByTags[activeSelector] || [];\n  return ___EmotionJSX(VizPickerLayout, { className: className, __self: this, __source: { fileName: _jsxFileName, lineNumber: 448, columnNumber: 13 } },\n  ___EmotionJSX(LeftPane, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 449, columnNumber: 7 } },\n  ___EmotionJSX(Selector, { css: ({ gridUnit }) =>\n    // adjust style for not being inside a collapse\n    css`\n              margin: ${gridUnit * 2}px;\n              margin-bottom: 0;\n            `, selector: ALL_CHARTS, icon: ___EmotionJSX(Icons.Ballot, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 455, columnNumber: 44 } }), isSelected: !isActivelySearching && ALL_CHARTS === activeSelector, onClick: clickSelector, __self: this, __source: { fileName: _jsxFileName, lineNumber: 450, columnNumber: 9 } }),\n  ___EmotionJSX(Collapse, { expandIconPosition: \"right\", ghost: true, defaultActiveKey: _Object$keys(sectionMap), __self: this, __source: { fileName: _jsxFileName, lineNumber: 456, columnNumber: 9 } },\n  _mapInstanceProperty(_context8 = _Object$keys(sectionMap)).call(_context8, (key) => {var _context9;\n    const section = sectionMap[key];\n    return ___EmotionJSX(Collapse.Panel, { header: ___EmotionJSX(\"span\", { className: \"header\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 459, columnNumber: 45 } }, section.title), key: key, __self: this, __source: { fileName: _jsxFileName, lineNumber: 459, columnNumber: 21 } },\n    _mapInstanceProperty(_context9 = section.selectors).call(_context9, (selector) => ___EmotionJSX(Selector, { key: selector, selector: selector, icon: section.icon, isSelected: !isActivelySearching && selector === activeSelector, onClick: clickSelector, __self: this, __source: { fileName: _jsxFileName, lineNumber: 460, columnNumber: 55 } })));\n\n  }))),\n\n\n\n  ___EmotionJSX(SearchWrapper, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 466, columnNumber: 7 } },\n  ___EmotionJSX(Input, { type: \"text\", ref: searchInputRef /* cast required because emotion */, value: searchInputValue, placeholder: t('Search all charts'), onChange: changeSearch, onFocus: focusSearch, \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__search-input`, prefix: ___EmotionJSX(InputIconAlignment, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 467, columnNumber: 257 } },\n    ___EmotionJSX(Icons.Search, { iconSize: \"m\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 468, columnNumber: 15 } })),\n    suffix: ___EmotionJSX(InputIconAlignment, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 469, columnNumber: 44 } },\n    searchInputValue && ___EmotionJSX(Icons.XLarge, { iconSize: \"m\", onClick: stopSearching, __self: this, __source: { fileName: _jsxFileName, lineNumber: 470, columnNumber: 37 } })), __self: this, __source: { fileName: _jsxFileName, lineNumber: 467, columnNumber: 9 } })),\n\n\n\n  ___EmotionJSX(RightPane, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 474, columnNumber: 7 } },\n  ___EmotionJSX(ThumbnailGallery, { vizEntries: vizEntriesToDisplay, selectedViz: selectedViz, setSelectedViz: onChange, __self: this, __source: { fileName: _jsxFileName, lineNumber: 475, columnNumber: 9 } })),\n\n\n  selectedVizMetadata ? ___EmotionJSX(\"div\", { css: (theme) => [\n    DetailsPane(theme),\n    DetailsPopulated(theme)], __self: this, __source: { fileName: _jsxFileName, lineNumber: 478, columnNumber: 31 } },\n\n  ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(SectionTitle, { css: css`\n                grid-area: viz-name;\n              `, __self: this, __source: { fileName: _jsxFileName, lineNumber: 483, columnNumber: 13 } },\n  selectedVizMetadata == null ? void 0 : selectedVizMetadata.name),\n\n  ___EmotionJSX(TagsWrapper, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 488, columnNumber: 13 } },\n  selectedVizMetadata == null ? void 0 : _mapInstanceProperty(_context10 = selectedVizMetadata.tags).call(_context10, (tag) => ___EmotionJSX(Label, { key: tag, __self: this, __source: { fileName: _jsxFileName, lineNumber: 489, columnNumber: 54 } }, tag))),\n\n  ___EmotionJSX(Description, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 491, columnNumber: 13 } },\n  (selectedVizMetadata == null ? void 0 : selectedVizMetadata.description) ||\n  t('No description available.')),\n\n  ___EmotionJSX(SectionTitle, { css: css`\n                grid-area: examples-header;\n              `, __self: this, __source: { fileName: _jsxFileName, lineNumber: 495, columnNumber: 13 } },\n  !!(selectedVizMetadata != null && (_selectedVizMetadata$ = selectedVizMetadata.exampleGallery) != null && _selectedVizMetadata$.length) && t('Examples')),\n\n  ___EmotionJSX(Examples, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 500, columnNumber: 13 } },\n  _mapInstanceProperty(_context11 = (selectedVizMetadata == null ? void 0 : selectedVizMetadata.exampleGallery) || []).call(_context11, (example) => ___EmotionJSX(\"img\", { src: example.url, alt: example.caption, title: example.caption, __self: this, __source: { fileName: _jsxFileName, lineNumber: 501, columnNumber: 76 } }))))) :\n\n\n  ___EmotionJSX(\"div\", { css: (theme) => [\n    DetailsPane(theme),\n    DetailsEmpty(theme)], __self: this, __source: { fileName: _jsxFileName, lineNumber: 504, columnNumber: 20 } },\n\n  t('Select a visualization type')));\n\n\n}__signature__(VizTypeGallery, \"usePluginContext{{ mountedPluginMetadata }}\\nuseRef{searchInputRef}\\nuseState{[searchInputValue, setSearchInputValue]('')}\\nuseState{[isSearchFocused, setIsSearchFocused](true)}\\nuseMemo{chartMetadata}\\nuseMemo{chartsByCategory}\\nuseMemo{categories}\\nuseMemo{chartsByTags}\\nuseMemo{tags}\\nuseMemo{sortedMetadata}\\nuseState{[activeSelector, setActiveSelector](() => selectedVizMetadata?.category || RECOMMENDED_TAGS[0])}\\nuseMemo{fuse}\\nuseMemo{searchResults}\\nuseCallback{focusSearch}\\nuseCallback{changeSearch}\\nuseCallback{stopSearching}\\nuseCallback{clickSelector}\\nuseMemo{sectionMap}\", () => [usePluginContext]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DEFAULT_ORDER, \"DEFAULT_ORDER\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(typesWithDefaultOrder, \"typesWithDefaultOrder\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(THUMBNAIL_GRID_UNITS, \"THUMBNAIL_GRID_UNITS\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(MAX_ADVISABLE_VIZ_GALLERY_WIDTH, \"MAX_ADVISABLE_VIZ_GALLERY_WIDTH\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(OTHER_CATEGORY, \"OTHER_CATEGORY\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(ALL_CHARTS, \"ALL_CHARTS\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(RECOMMENDED_TAGS, \"RECOMMENDED_TAGS\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(VIZ_TYPE_CONTROL_TEST_ID, \"VIZ_TYPE_CONTROL_TEST_ID\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(VizPickerLayout, \"VizPickerLayout\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(SectionTitle, \"SectionTitle\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(LeftPane, \"LeftPane\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(RightPane, \"RightPane\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(SearchWrapper, \"SearchWrapper\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(InputIconAlignment, \"InputIconAlignment\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(SelectorLabel, \"SelectorLabel\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(IconsPane, \"IconsPane\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(DetailsPane, \"DetailsPane\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(DetailsPopulated, \"DetailsPopulated\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(DetailsEmpty, \"DetailsEmpty\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(TagsWrapper, \"TagsWrapper\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(Description, \"Description\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(Examples, \"Examples\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(thumbnailContainerCss, \"thumbnailContainerCss\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(vizSortFactor, \"vizSortFactor\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(Thumbnail, \"Thumbnail\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(ThumbnailGallery, \"ThumbnailGallery\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(Selector, \"Selector\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(doesVizMatchSelector, \"doesVizMatchSelector\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");reactHotLoader.register(VizTypeGallery, \"VizTypeGallery\", \"/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/Users/frankhe/projects/superset/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport Fuse from 'fuse.js';\nimport cx from 'classnames';\nimport {\n  t,\n  styled,\n  css,\n  ChartMetadata,\n  SupersetTheme,\n  useTheme,\n} from '@superset-ui/core';\nimport { Collapse, Input } from 'src/common/components';\nimport Label from 'src/components/Label';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport Icons from 'src/components/Icons';\nimport { nativeFilterGate } from 'src/dashboard/components/nativeFilters/utils';\nimport scrollIntoView from 'scroll-into-view-if-needed';\n\ninterface VizTypeGalleryProps {\n  onChange: (vizType: string | null) => void;\n  selectedViz: string | null;\n  className?: string;\n}\n\ntype VizEntry = {\n  key: string;\n  value: ChartMetadata;\n};\n\nconst DEFAULT_ORDER = [\n  'line',\n  'big_number',\n  'table',\n  'filter_box',\n  'dist_bar',\n  'area',\n  'bar',\n  'deck_polygon',\n  'pie',\n  'time_table',\n  'pivot_table_v2',\n  'histogram',\n  'big_number_total',\n  'deck_scatter',\n  'deck_hex',\n  'time_pivot',\n  'deck_arc',\n  'heatmap',\n  'deck_grid',\n  'dual_line',\n  'deck_screengrid',\n  'line_multi',\n  'treemap',\n  'box_plot',\n  'sunburst',\n  'sankey',\n  'word_cloud',\n  'mapbox',\n  'kepler',\n  'cal_heatmap',\n  'rose',\n  'bubble',\n  'deck_geojson',\n  'horizon',\n  'deck_multi',\n  'compare',\n  'partition',\n  'event_flow',\n  'deck_path',\n  'graph_chart',\n  'world_map',\n  'paired_ttest',\n  'para',\n  'country_map',\n];\n\nconst typesWithDefaultOrder = new Set(DEFAULT_ORDER);\n\nconst THUMBNAIL_GRID_UNITS = 24;\n\nexport const MAX_ADVISABLE_VIZ_GALLERY_WIDTH = 1090;\n\nconst OTHER_CATEGORY = t('Other');\n\nconst ALL_CHARTS = t('All charts');\n\nconst RECOMMENDED_TAGS = [\n  t('Highly-used'),\n  t('ECharts'),\n  t('Advanced-Analytics'),\n];\n\nexport const VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\n\nconst VizPickerLayout = styled.div`\n  display: grid;\n  grid-template-rows: auto minmax(100px, 1fr) minmax(200px, 35%);\n  // em is used here because the sidebar should be sized to fit the longest standard tag\n  grid-template-columns: minmax(14em, auto) 5fr;\n  grid-template-areas:\n    'sidebar search'\n    'sidebar main'\n    'details details';\n  height: 70vh;\n  overflow: auto;\n`;\n\nconst SectionTitle = styled.h3`\n  margin-top: 0;\n  margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  font-size: ${({ theme }) => theme.typography.sizes.l}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  line-height: ${({ theme }) => theme.gridUnit * 6}px;\n`;\n\nconst LeftPane = styled.div`\n  grid-area: sidebar;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  overflow: auto;\n\n  .ant-collapse .ant-collapse-item {\n    .ant-collapse-header {\n      font-size: ${({ theme }) => theme.typography.sizes.s}px;\n      color: ${({ theme }) => theme.colors.grayscale.base};\n      padding-left: ${({ theme }) => theme.gridUnit * 2}px;\n      padding-bottom: ${({ theme }) => theme.gridUnit}px;\n    }\n    .ant-collapse-content .ant-collapse-content-box {\n      display: flex;\n      flex-direction: column;\n      padding: 0 ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nconst RightPane = styled.div`\n  grid-area: main;\n  overflow-y: auto;\n`;\n\nconst SearchWrapper = styled.div`\n  ${({ theme }) => `\n    grid-area: search;\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-bottom: ${theme.gridUnit}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    margin-right: ${theme.gridUnit * 3}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${theme.gridUnit * 2}px;\n    }\n  `}\n`;\n\n/** Styles to line up prefix/suffix icons in the search input */\nconst InputIconAlignment = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst SelectorLabel = styled.button`\n  ${({ theme }) => `\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${theme.gridUnit}px 0;\n    padding: 0 ${theme.gridUnit}px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${theme.colors.primary.dark1};\n      color: ${theme.colors.primary.light5};\n\n      svg {\n        color: ${theme.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${theme.gridUnit * 1.5}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}\n`;\n\nconst IconsPane = styled.div`\n  overflow: auto;\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    ${({ theme }) => theme.gridUnit * THUMBNAIL_GRID_UNITS}px\n  );\n  grid-auto-rows: max-content;\n  justify-content: space-evenly;\n  grid-gap: ${({ theme }) => theme.gridUnit * 2}px;\n  justify-items: center;\n  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst DetailsPane = (theme: SupersetTheme) => css`\n  grid-area: details;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n`;\n\nconst DetailsPopulated = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 4}px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto auto 1fr;\n  grid-template-areas:\n    'viz-name examples-header'\n    'viz-tags examples'\n    'description examples';\n`;\n\nconst DetailsEmpty = (theme: SupersetTheme) => css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  font-style: italic;\n  color: ${theme.colors.grayscale.light1};\n`;\n\n// overflow hidden on the details pane and overflow auto on the description\n// (plus grid layout) enables the description to scroll while the header stays in place.\nconst TagsWrapper = styled.div`\n  grid-area: viz-tags;\n  width: ${({ theme }) => theme.gridUnit * 120}px;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst Description = styled.p`\n  grid-area: description;\n  overflow: auto;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  margin: 0;\n`;\n\nconst Examples = styled.div`\n  grid-area: examples;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: auto;\n  gap: ${({ theme }) => theme.gridUnit * 4}px;\n\n  img {\n    height: 100%;\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\n\nconst thumbnailContainerCss = (theme: SupersetTheme) => css`\n  cursor: pointer;\n  width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n\n  img {\n    min-width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    min-height: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    transition: border-color ${theme.transitionTiming};\n  }\n\n  &.selected img {\n    border: 2px solid ${theme.colors.primary.light2};\n  }\n\n  &:hover:not(.selected) img {\n    border: 1px solid ${theme.colors.grayscale.light1};\n  }\n\n  .viztype-label {\n    margin-top: ${theme.gridUnit * 2}px;\n    text-align: center;\n  }\n`;\n\nfunction vizSortFactor(entry: VizEntry) {\n  if (typesWithDefaultOrder.has(entry.key)) {\n    return DEFAULT_ORDER.indexOf(entry.key);\n  }\n  return DEFAULT_ORDER.length;\n}\n\ninterface ThumbnailProps {\n  entry: VizEntry;\n  selectedViz: string | null;\n  setSelectedViz: (viz: string) => void;\n}\n\nconst Thumbnail: React.FC<ThumbnailProps> = ({\n  entry,\n  selectedViz,\n  setSelectedViz,\n}) => {\n  const theme = useTheme();\n  const { key, value: type } = entry;\n  const isSelected = selectedViz === entry.key;\n\n  return (\n    <div\n      role=\"button\"\n      // using css instead of a styled component to preserve\n      // the data-test attribute\n      css={thumbnailContainerCss(theme)}\n      tabIndex={0}\n      className={isSelected ? 'selected' : ''}\n      onClick={() => setSelectedViz(key)}\n      data-test=\"viztype-selector-container\"\n    >\n      <img\n        alt={type.name}\n        width=\"100%\"\n        className={`viztype-selector ${isSelected ? 'selected' : ''}`}\n        src={type.thumbnail}\n      />\n      <div\n        className=\"viztype-label\"\n        data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__viztype-label`}\n      >\n        {type.name}\n      </div>\n    </div>\n  );\n};\n\ninterface ThumbnailGalleryProps {\n  vizEntries: VizEntry[];\n  selectedViz: string | null;\n  setSelectedViz: (viz: string) => void;\n}\n\n/** A list of viz thumbnails, used within the viz picker modal */\nconst ThumbnailGallery: React.FC<ThumbnailGalleryProps> = ({\n  vizEntries,\n  ...props\n}) => (\n  <IconsPane data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__viz-row`}>\n    {vizEntries.map(entry => (\n      <Thumbnail key={entry.key} {...props} entry={entry} />\n    ))}\n  </IconsPane>\n);\n\nconst Selector: React.FC<{\n  selector: string;\n  icon: JSX.Element;\n  isSelected: boolean;\n  onClick: (selector: string) => void;\n  className?: string;\n}> = ({ selector, icon, isSelected, onClick, className }) => {\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  // see Element.scrollIntoViewIfNeeded()\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded\n  useEffect(() => {\n    if (isSelected) {\n      // We need to wait for the modal to open and then scroll, so we put it in the microtask queue\n      queueMicrotask(() =>\n        scrollIntoView(btnRef.current as HTMLButtonElement, {\n          behavior: 'smooth',\n          scrollMode: 'if-needed',\n        }),\n      );\n    }\n  }, []);\n\n  return (\n    <SelectorLabel\n      ref={btnRef}\n      key={selector}\n      name={selector}\n      className={cx(className, isSelected && 'selected')}\n      onClick={() => onClick(selector)}\n    >\n      {icon}\n      {selector}\n    </SelectorLabel>\n  );\n};\n\nconst doesVizMatchSelector = (viz: ChartMetadata, selector: string) =>\n  selector === viz.category ||\n  (selector === OTHER_CATEGORY && viz.category == null) ||\n  (viz.tags || []).indexOf(selector) > -1;\n\nexport default function VizTypeGallery(props: VizTypeGalleryProps) {\n  const { selectedViz, onChange, className } = props;\n  const { mountedPluginMetadata } = usePluginContext();\n  const searchInputRef = useRef<HTMLInputElement>();\n  const [searchInputValue, setSearchInputValue] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(true);\n  const isActivelySearching = isSearchFocused && !!searchInputValue;\n\n  const selectedVizMetadata: ChartMetadata | null = selectedViz\n    ? mountedPluginMetadata[selectedViz]\n    : null;\n\n  const chartMetadata: VizEntry[] = useMemo(() => {\n    const result = Object.entries(mountedPluginMetadata)\n      .map(([key, value]) => ({ key, value }))\n      .filter(\n        ({ value }) =>\n          nativeFilterGate(value.behaviors || []) && !value.deprecated,\n      );\n    result.sort((a, b) => vizSortFactor(a) - vizSortFactor(b));\n    return result;\n  }, [mountedPluginMetadata]);\n\n  const chartsByCategory = useMemo(() => {\n    const result: Record<string, VizEntry[]> = {};\n    chartMetadata.forEach(entry => {\n      const category = entry.value.category || OTHER_CATEGORY;\n      if (!result[category]) {\n        result[category] = [];\n      }\n      result[category].push(entry);\n    });\n    return result;\n  }, [chartMetadata]);\n\n  const categories = useMemo(\n    () =>\n      Object.keys(chartsByCategory).sort((a, b) => {\n        // make sure Other goes at the end\n        if (a === OTHER_CATEGORY) return 1;\n        if (b === OTHER_CATEGORY) return -1;\n        // sort alphabetically\n        return a.localeCompare(b);\n      }),\n    [chartsByCategory],\n  );\n\n  const chartsByTags = useMemo(() => {\n    const result: Record<string, VizEntry[]> = {};\n    chartMetadata.forEach(entry => {\n      const tags = entry.value.tags || [];\n      tags.forEach(tag => {\n        if (!result[tag]) {\n          result[tag] = [];\n        }\n        result[tag].push(entry);\n      });\n    });\n    return result;\n  }, [chartMetadata]);\n\n  const tags = useMemo(\n    () =>\n      Object.keys(chartsByTags)\n        .sort((a, b) =>\n          // sort alphabetically\n          a.localeCompare(b),\n        )\n        .filter(tag => RECOMMENDED_TAGS.indexOf(tag) === -1),\n    [chartsByTags],\n  );\n\n  const sortedMetadata = useMemo(\n    () => chartMetadata.sort((a, b) => a.key.localeCompare(b.key)),\n    [chartMetadata],\n  );\n\n  const [activeSelector, setActiveSelector] = useState<string>(\n    () => selectedVizMetadata?.category || RECOMMENDED_TAGS[0],\n  );\n\n  // get a fuse instance for fuzzy search\n  const fuse = useMemo(\n    () =>\n      new Fuse(chartMetadata, {\n        ignoreLocation: true,\n        threshold: 0.3,\n        keys: ['value.name', 'value.tags', 'value.description'],\n      }),\n    [chartMetadata],\n  );\n\n  const searchResults = useMemo(() => {\n    if (searchInputValue.trim() === '') {\n      return [];\n    }\n    return fuse.search(searchInputValue).map(result => result.item);\n  }, [searchInputValue, fuse]);\n\n  const focusSearch = useCallback(() => {\n    // \"start searching\" is actually a two-stage process.\n    // When you first click on the search bar, the input is focused and nothing else happens.\n    // Once you begin typing, the selected category is cleared and the displayed viz entries change.\n    setIsSearchFocused(true);\n  }, []);\n\n  const changeSearch: ChangeEventHandler<HTMLInputElement> = useCallback(\n    event => setSearchInputValue(event.target.value),\n    [],\n  );\n\n  const stopSearching = useCallback(() => {\n    // stopping a search takes you back to the category you were looking at before.\n    // Unlike focusSearch, this is a simple one-step process.\n    setIsSearchFocused(false);\n    setSearchInputValue('');\n    searchInputRef.current!.blur();\n  }, []);\n\n  const clickSelector = useCallback(\n    (key: string) => {\n      if (isSearchFocused) {\n        stopSearching();\n      }\n      setActiveSelector(key);\n      // clear the selected viz if it is not present in the new category or tags\n      const isSelectedVizCompatible =\n        selectedVizMetadata && doesVizMatchSelector(selectedVizMetadata, key);\n      if (key !== activeSelector && !isSelectedVizCompatible) {\n        onChange(null);\n      }\n    },\n    [\n      stopSearching,\n      isSearchFocused,\n      activeSelector,\n      selectedVizMetadata,\n      onChange,\n    ],\n  );\n\n  const sectionMap = useMemo(\n    () => ({\n      RECOMMENDED_TAGS: {\n        title: t('Recommended tags'),\n        icon: <Icons.Tags />,\n        selectors: RECOMMENDED_TAGS,\n      },\n      CATEGORY: {\n        title: t('Category'),\n        icon: <Icons.Category />,\n        selectors: categories,\n      },\n      TAGS: {\n        title: t('Tags'),\n        icon: <Icons.Tags />,\n        selectors: tags,\n      },\n    }),\n    [categories, tags],\n  );\n\n  const vizEntriesToDisplay = isActivelySearching\n    ? searchResults\n    : activeSelector === ALL_CHARTS\n    ? sortedMetadata\n    : chartsByCategory[activeSelector] || chartsByTags[activeSelector] || [];\n\n  return (\n    <VizPickerLayout className={className}>\n      <LeftPane>\n        <Selector\n          css={({ gridUnit }) =>\n            // adjust style for not being inside a collapse\n            css`\n              margin: ${gridUnit * 2}px;\n              margin-bottom: 0;\n            `\n          }\n          selector={ALL_CHARTS}\n          icon={<Icons.Ballot />}\n          isSelected={!isActivelySearching && ALL_CHARTS === activeSelector}\n          onClick={clickSelector}\n        />\n        <Collapse\n          expandIconPosition=\"right\"\n          ghost\n          defaultActiveKey={Object.keys(sectionMap)}\n        >\n          {Object.keys(sectionMap).map(key => {\n            const section = sectionMap[key];\n\n            return (\n              <Collapse.Panel\n                header={<span className=\"header\">{section.title}</span>}\n                key={key}\n              >\n                {section.selectors.map((selector: string) => (\n                  <Selector\n                    key={selector}\n                    selector={selector}\n                    icon={section.icon}\n                    isSelected={\n                      !isActivelySearching && selector === activeSelector\n                    }\n                    onClick={clickSelector}\n                  />\n                ))}\n              </Collapse.Panel>\n            );\n          })}\n        </Collapse>\n      </LeftPane>\n\n      <SearchWrapper>\n        <Input\n          type=\"text\"\n          ref={searchInputRef as any /* cast required because emotion */}\n          value={searchInputValue}\n          placeholder={t('Search all charts')}\n          onChange={changeSearch}\n          onFocus={focusSearch}\n          data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__search-input`}\n          prefix={\n            <InputIconAlignment>\n              <Icons.Search iconSize=\"m\" />\n            </InputIconAlignment>\n          }\n          suffix={\n            <InputIconAlignment>\n              {searchInputValue && (\n                <Icons.XLarge iconSize=\"m\" onClick={stopSearching} />\n              )}\n            </InputIconAlignment>\n          }\n        />\n      </SearchWrapper>\n\n      <RightPane>\n        <ThumbnailGallery\n          vizEntries={vizEntriesToDisplay}\n          selectedViz={selectedViz}\n          setSelectedViz={onChange}\n        />\n      </RightPane>\n\n      {selectedVizMetadata ? (\n        <div\n          css={(theme: SupersetTheme) => [\n            DetailsPane(theme),\n            DetailsPopulated(theme),\n          ]}\n        >\n          <>\n            <SectionTitle\n              css={css`\n                grid-area: viz-name;\n              `}\n            >\n              {selectedVizMetadata?.name}\n            </SectionTitle>\n            <TagsWrapper>\n              {selectedVizMetadata?.tags.map(tag => (\n                <Label key={tag}>{tag}</Label>\n              ))}\n            </TagsWrapper>\n            <Description>\n              {selectedVizMetadata?.description ||\n                t('No description available.')}\n            </Description>\n            <SectionTitle\n              css={css`\n                grid-area: examples-header;\n              `}\n            >\n              {!!selectedVizMetadata?.exampleGallery?.length && t('Examples')}\n            </SectionTitle>\n            <Examples>\n              {(selectedVizMetadata?.exampleGallery || []).map(example => (\n                <img\n                  src={example.url}\n                  alt={example.caption}\n                  title={example.caption}\n                />\n              ))}\n            </Examples>\n          </>\n        </div>\n      ) : (\n        <div\n          css={(theme: SupersetTheme) => [\n            DetailsPane(theme),\n            DetailsEmpty(theme),\n          ]}\n        >\n          {t('Select a visualization type')}\n        </div>\n      )}\n    </VizPickerLayout>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}